{"version":3,"file":"static/js/7302.53bd7fd8.chunk.js","mappings":"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","sources":["hooks/usePermission.js","pages/settings/announcements.js"],"sourcesContent":["// hooks/usePermission.js\nimport { useCallback } from 'react';\n\nexport const usePermission = () => {\n  const checkPermission = useCallback((module, action) => {\n    try {\n      const data = JSON.parse(localStorage.getItem('auth') || '[]');\n      const userType = data?.loginType;\n      const permissions = data?.user?.permissions || [];\n\n      if (userType === 'super_admin') return true;\n\n      if (userType === 'admin') {\n        return permissions.some((permission) => permission.module_name === module && permission.allowed_actions.includes(action));\n      }\n\n      return false;\n    } catch (error) {\n      console.error('Error checking permission:', error);\n      return false;\n    }\n  }, []);\n\n  return { checkPermission };\n};\n","import React, { useState, useEffect, useCallback } from 'react';\nimport DataTable from 'react-data-table-component';\nimport {\n  TextField,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Box,\n  Stack,\n  Grid,\n  IconButton,\n  FormLabel,\n  Tooltip,\n  Avatar,\n  Select,\n  MenuItem\n} from '@mui/material';\nimport { BoxAdd, CloseSquare, Edit, Trash } from 'iconsax-react';\nimport { useFormik } from 'formik';\nimport axiosInstance from 'utils/axios';\nimport * as Yup from 'yup';\nimport { PopupTransition } from 'components/@extended/Transitions';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { Quill } from 'react-quill';\nimport 'quill-emoji/dist/quill-emoji.css';\nimport * as Emoji from 'quill-emoji';\n\nQuill.register('modules/emoji', Emoji);\n\n//css import\nimport 'assets/css/commonStyle.css';\nimport 'assets/css/DataTable.css';\nimport MainCard from 'components/MainCard';\nimport { APP_PATH_BASE_URL } from 'config';\nimport Swal from 'sweetalert2';\nimport { Capitalise } from 'utils/capitalise';\nimport { usePermission } from 'hooks/usePermission';\n\nconst Announcement = () => {\n  const { checkPermission } = usePermission();\n\n  const canCreate = checkPermission('Announcements', 'create');\n  const canUpdate = checkPermission('Announcements', 'update');\n  const canDelete = checkPermission('Announcements', 'delete');\n\n  const [open, setOpen] = useState(false);\n  const [currentAnnouncement, setCurrentAnnouncement] = useState(null);\n  const [announcements, setAnnouncements] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editorContent, setEditorContent] = useState('');\n  const [backgroundPicPreview, setBackgroundPicPreview] = useState(null);\n  // const [contentPicPreview, setContentPicPreview] = useState(null);\n\n  // Fetch Announcements data from API\n  const fetchAnnouncements = useCallback(async () => {\n    try {\n      const response = await axiosInstance.get(`${APP_PATH_BASE_URL}api/announcements`);\n      const announcementsWithId = response.data.map((announcement, index) => ({\n        ...announcement,\n        sno: index + 1\n      }));\n      setAnnouncements(announcementsWithId);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching announcements:', error);\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchAnnouncements();\n  }, [fetchAnnouncements]);\n\n  const handleOpen = () => {\n    setCurrentAnnouncement(null);\n    setEditorContent('');\n    setBackgroundPicPreview(null);\n    // setContentPicPreview(null);\n    setOpen(true);\n  };\n\n  const handleEdit = (announcement) => {\n    setCurrentAnnouncement(announcement);\n    setEditorContent(announcement.content || '');\n    setBackgroundPicPreview(announcement.background_pic_url ? `${announcement.background_pic_url}` : null);\n    // setContentPicPreview(announcement.content_pic_url ? `${announcement.content_pic_url}` : null);\n    setOpen(true);\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const result = await Swal.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      });\n\n      // Only proceed if user confirmed\n      if (result.isConfirmed) {\n        await axiosInstance.patch(`${APP_PATH_BASE_URL}api/announcements/${id}/archive`);\n        setAnnouncements(announcements.filter((announcement) => announcement.id !== id));\n        Swal.fire({\n          title: 'Success!',\n          text: 'Announcement deleted successfully',\n          icon: 'success',\n          confirmButtonText: 'OK'\n        });\n      }\n    } catch (error) {\n      console.error('Error deleting announcement:', error);\n      Swal.fire({\n        title: 'Error!',\n        text: 'Failed to delete announcement',\n        icon: 'error',\n        confirmButtonText: 'OK'\n      });\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const validationSchema = Yup.object().shape({\n    title: Yup.string().required('Title is required')\n  });\n\n  const formik = useFormik({\n    initialValues: {\n      title: currentAnnouncement?.title || '',\n      audience: currentAnnouncement?.audience || '',\n      background_pic: null,\n      // content_pic: null,\n      content: currentAnnouncement?.content || ''\n    },\n    validationSchema: validationSchema,\n    enableReinitialize: true,\n    onSubmit: async (values, { setSubmitting }) => {\n      try {\n        const formData = new FormData();\n        formData.append('title', values.title);\n        formData.append('audience', values.audience);\n        formData.append('content', editorContent);\n\n        // Append files if they exist, or existing paths if in edit mode\n        if (values.background_pic instanceof File) {\n          formData.append('background_pic', values.background_pic);\n        } else if (currentAnnouncement?.background_pic) {\n          formData.append('background_pic_path', currentAnnouncement.background_pic);\n        }\n\n        // if (values.content_pic instanceof File) {\n        //   formData.append('content_pic', values.content_pic);\n        // } else if (currentAnnouncement?.content_pic) {\n        //   formData.append('content_pic_path', currentAnnouncement.content_pic);\n        // }\n\n        let response;\n        if (currentAnnouncement) {\n          // Update existing announcement\n          response = await axiosInstance.patch(`${APP_PATH_BASE_URL}api/announcements/${currentAnnouncement.id}`, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n        } else {\n          // Add new announcement\n          response = await axiosInstance.post(`${APP_PATH_BASE_URL}api/announcements`, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          });\n        }\n\n        if (response.data.success === true) {\n          Swal.fire({\n            title: 'Success!',\n            text: response.data.message,\n            icon: 'success',\n            confirmButtonText: 'OK'\n          });\n          fetchAnnouncements(); // Refresh the list\n          handleClose();\n        }\n      } catch (error) {\n        console.error('Error saving announcement:', error);\n        Swal.fire({\n          title: 'Error!',\n          text: error.response?.data?.message || 'Failed to save announcement',\n          icon: 'error',\n          confirmButtonText: 'OK'\n        });\n      } finally {\n        setSubmitting(false);\n      }\n    }\n  });\n\n  const handleBackgroundPicChange = (event) => {\n    const file = event.currentTarget.files[0];\n    if (file) {\n      formik.setFieldValue('background_pic', file);\n      const reader = new FileReader();\n      reader.onload = () => {\n        setBackgroundPicPreview(reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  // const handleContentPicChange = (event) => {\n  //   const file = event.currentTarget.files[0];\n  //   if (file) {\n  //     formik.setFieldValue('content_pic', file);\n  //     const reader = new FileReader();\n  //     reader.onload = () => {\n  //       setContentPicPreview(reader.result);\n  //     };\n  //     reader.readAsDataURL(file);\n  //   }\n  // };\n\n  // ReactQuill modules configuration\n  const quillModules = {\n    toolbar: [\n      [{ header: [1, 2, 3, 4, 5, 6, false] }],\n      [{ font: [] }],\n      [{ size: ['small', false, 'large', 'huge'] }],\n      ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n      [{ color: [] }, { background: [] }],\n      [{ script: 'sub' }, { script: 'super' }],\n      [{ align: [] }],\n      [{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\n      ['link', 'image', 'video', 'emoji'], // emoji button is already here\n      ['code-block'],\n      ['clean']\n    ],\n    clipboard: {\n      matchVisual: false\n    },\n    'emoji-toolbar': true, // Add these emoji-specific configurations\n    'emoji-textarea': false,\n    'emoji-shortname': true\n  };\n\n  const formats = [\n    'header',\n    'font',\n    'size',\n    'bold',\n    'italic',\n    'underline',\n    'strike',\n    'blockquote',\n    'color',\n    'background',\n    'script',\n    'align',\n    'list',\n    'bullet',\n    'indent',\n    'link',\n    'image',\n    'video',\n    'code-block',\n    'emoji' // emoji is already in formats\n  ];\n\n  const columns = [\n    {\n      name: 'S.No',\n      selector: (row) => row.sno,\n      sortable: true,\n      width: '80px'\n    },\n    {\n      name: 'Title',\n      selector: (row) => Capitalise(row.title),\n      sortable: true\n    },\n    {\n      name: 'Type',\n      selector: (row) => Capitalise(row.audience),\n      sortable: true\n    },\n    {\n      name: 'Background Image',\n      cell: (row) =>\n        row.background_pic_url ? <Avatar src={`${row.background_pic_url}`} variant=\"rounded\" sx={{ width: 80, height: 60 }} /> : 'No image'\n    },\n    // {\n    //   name: 'Content Image',\n    //   cell: (row) =>\n    //     row.content_pic_url ? <Avatar src={`${row.content_pic_url}`} variant=\"rounded\" sx={{ width: 80, height: 60 }} /> : 'No image',\n    //   width: '150px'\n    // },\n    {\n      name: 'Actions',\n      cell: (row) => (\n        <Box sx={{ display: 'flex', gap: 1 }}>\n          {canUpdate && (\n            <Tooltip title=\"Edit\">\n              <IconButton variant=\"contained\" color=\"info\" onClick={() => handleEdit(row)}>\n                <Edit />\n              </IconButton>\n            </Tooltip>\n          )}\n          {canDelete && (\n            <Tooltip title=\"Delete\">\n              <IconButton variant=\"contained\" color=\"error\" onClick={() => handleDelete(row.id)}>\n                <Trash />\n              </IconButton>\n            </Tooltip>\n          )}\n        </Box>\n      )\n    }\n  ];\n\n  return (\n    <MainCard>\n      <Grid item container justifyContent=\"flex-end\" mb={3}>\n        <Grid item>\n          <Stack spacing={2}>\n            <Box sx={{ display: 'flex' }}>\n              {canCreate && (\n                <Button color=\"success\" variant=\"contained\" startIcon={<BoxAdd />} onClick={handleOpen}>\n                  Add New Announcement\n                </Button>\n              )}\n            </Box>\n          </Stack>\n        </Grid>\n      </Grid>\n\n      <DataTable\n        columns={columns}\n        data={announcements}\n        pagination\n        progressPending={loading}\n        paginationPerPage={10}\n        paginationRowsPerPageOptions={[5, 10, 20, 30]}\n        highlightOnHover\n        responsive\n      />\n\n      {/* Add/Edit Announcement Dialog */}\n      <Dialog\n        maxWidth=\"md\"\n        TransitionComponent={PopupTransition}\n        keepMounted\n        fullWidth\n        open={open}\n        onClose={(event, reason) => {\n          if (reason !== 'backdropClick') handleClose();\n        }}\n        BackdropProps={{\n          onClick: (event) => event.stopPropagation()\n        }}\n        sx={{ '& .MuiDialog-paper': { p: 0 }, transition: 'transform 225ms' }}\n        aria-describedby=\"alert-dialog-slide-description\"\n      >\n        <DialogTitle className=\"dialogTitle\">\n          {currentAnnouncement ? 'Edit Announcement' : 'Add New Announcement'}\n          <IconButton color=\"dark\" onClick={handleClose} edge=\"end\" size=\"big\" aria-label=\"close\">\n            <CloseSquare />\n          </IconButton>\n        </DialogTitle>\n        <DialogContent>\n          <form onSubmit={formik.handleSubmit}>\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12} md={6}>\n                <Stack spacing={1}>\n                  <FormLabel>Title *</FormLabel>\n                  <TextField\n                    fullWidth\n                    id=\"title\"\n                    name=\"title\"\n                    placeholder=\"Enter announcement title\"\n                    value={formik.values.title}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    error={formik.touched.title && Boolean(formik.errors.title)}\n                    helperText={formik.touched.title && formik.errors.title}\n                  />\n                </Stack>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <Stack spacing={1}>\n                  <FormLabel>Select user *</FormLabel>\n                  <Select\n                    fullWidth\n                    id=\"audience\"\n                    name=\"audience\"\n                    displayEmpty\n                    value={formik.values.audience}\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    error={formik.touched.audience && Boolean(formik.errors.audience)}\n                  >\n                    <MenuItem value=\"\">Select user</MenuItem>\n                    <MenuItem value=\"students\">Students</MenuItem>\n                    <MenuItem value=\"trainers\">Trainers</MenuItem>\n                    <MenuItem value=\"all\">All</MenuItem>\n                  </Select>\n                </Stack>\n              </Grid>\n\n              <Grid item xs={12} md={6}>\n                <Stack spacing={1}>\n                  <FormLabel>Background Image</FormLabel>\n                  <input\n                    accept=\"image/*\"\n                    style={{ display: 'none' }}\n                    id=\"background-pic-upload\"\n                    type=\"file\"\n                    onChange={handleBackgroundPicChange}\n                  />\n                  <label htmlFor=\"background-pic-upload\">\n                    <Button variant=\"outlined\" component=\"span\" fullWidth>\n                      Upload Background Image\n                    </Button>\n                  </label>\n                  {formik.touched.background_pic && formik.errors.background_pic && (\n                    <Box sx={{ color: 'error.main', fontSize: '0.75rem' }}>{formik.errors.background_pic}</Box>\n                  )}\n                  {backgroundPicPreview && (\n                    <Box mt={2}>\n                      <Avatar src={backgroundPicPreview} variant=\"rounded\" sx={{ width: '100%', height: 150 }} />\n                    </Box>\n                  )}\n                </Stack>\n              </Grid>\n\n              {/* <Grid item xs={12} md={6}>\n                <Stack spacing={1}>\n                  <FormLabel>Content Image</FormLabel>\n                  <input\n                    accept=\"image/*\"\n                    style={{ display: 'none' }}\n                    id=\"content-pic-upload\"\n                    type=\"file\"\n                    onChange={handleContentPicChange}\n                  />\n                  <label htmlFor=\"content-pic-upload\">\n                    <Button variant=\"outlined\" component=\"span\" fullWidth>\n                      Upload Content Image\n                    </Button>\n                  </label>\n                  {formik.touched.content_pic && formik.errors.content_pic && (\n                    <Box sx={{ color: 'error.main', fontSize: '0.75rem' }}>{formik.errors.content_pic}</Box>\n                  )}\n                  {contentPicPreview && (\n                    <Box mt={2}>\n                      <Avatar src={contentPicPreview} variant=\"rounded\" sx={{ width: '100%', height: 150 }} />\n                    </Box>\n                  )}\n                </Stack>\n              </Grid> */}\n\n              <Grid item xs={12}>\n                <Stack spacing={1}>\n                  <FormLabel>Content</FormLabel>\n                  <Box sx={{ height: 300, mb: 3 }}>\n                    <ReactQuill\n                      theme=\"snow\"\n                      value={editorContent}\n                      onChange={setEditorContent}\n                      modules={quillModules}\n                      formats={formats}\n                      style={{ height: '250px' }}\n                    />\n                  </Box>\n                </Stack>\n              </Grid>\n            </Grid>\n            <DialogActions sx={{ mt: 3 }}>\n              <Button onClick={handleClose}>Cancel</Button>\n              <Button type=\"submit\" variant=\"contained\" disabled={formik.isSubmitting}>\n                {currentAnnouncement ? 'Update Announcement' : 'Add Announcement'}\n              </Button>\n            </DialogActions>\n          </form>\n        </DialogContent>\n      </Dialog>\n    </MainCard>\n  );\n};\n\nexport default Announcement;\n"],"names":["usePermission","checkPermission","useCallback","module","action","_data$user","data","JSON","parse","localStorage","getItem","userType","loginType","permissions","user","some","permission","module_name","allowed_actions","includes","error","console","Quill","register","Emoji","canCreate","canUpdate","canDelete","_useState","useState","_useState2","_slicedToArray","open","setOpen","_useState3","_useState4","currentAnnouncement","setCurrentAnnouncement","_useState5","_useState6","announcements","setAnnouncements","_useState7","_useState8","loading","setLoading","_useState9","_useState10","editorContent","setEditorContent","_useState11","_useState12","backgroundPicPreview","setBackgroundPicPreview","fetchAnnouncements","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","announcementsWithId","wrap","_context","prev","next","axiosInstance","get","concat","APP_PATH_BASE_URL","sent","map","announcement","index","_objectSpread","sno","t0","stop","useEffect","handleDelete","_ref2","_callee2","id","_context2","Swal","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","isConfirmed","patch","filter","_x","apply","arguments","handleClose","validationSchema","Yup","shape","required","formik","useFormik","initialValues","audience","background_pic","content","enableReinitialize","onSubmit","_onSubmit","_callee3","values","_ref3","setSubmitting","formData","_error$response","_error$response$data","_context3","FormData","append","File","headers","post","success","message","finish","_x2","_x3","columns","name","selector","row","sortable","width","Capitalise","cell","background_pic_url","_jsx","Avatar","src","variant","sx","height","_jsxs","Box","display","gap","children","Tooltip","IconButton","color","onClick","Edit","Trash","MainCard","Grid","item","container","justifyContent","mb","Stack","spacing","Button","startIcon","BoxAdd","DataTable","pagination","progressPending","paginationPerPage","paginationRowsPerPageOptions","highlightOnHover","responsive","Dialog","maxWidth","TransitionComponent","PopupTransition","keepMounted","fullWidth","onClose","event","reason","BackdropProps","stopPropagation","p","transition","DialogTitle","className","edge","size","CloseSquare","DialogContent","handleSubmit","mt","xs","md","FormLabel","TextField","placeholder","value","onChange","handleChange","onBlur","handleBlur","touched","Boolean","errors","helperText","Select","displayEmpty","MenuItem","accept","style","type","file","currentTarget","files","setFieldValue","reader","FileReader","onload","result","readAsDataURL","htmlFor","component","fontSize","ReactQuill","theme","modules","toolbar","header","font","background","script","align","list","indent","clipboard","matchVisual","formats","DialogActions","disabled","isSubmitting"],"sourceRoot":""}