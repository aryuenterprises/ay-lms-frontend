"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[8741],{8741:function(e,t,n){n.r(t);var s=n(61819),r=n(15861),i=n(29439),a=n(1413),o=n(72791),c=n(13967),l=n(95193),d=n(57621),u=n(39504),x=n(61889),h=n(697),m=n(17133),Z=n(74982),g=n(48550),f=n(13239),j=n(20890),p=n(35527),v=n(39281),_=n(79836),b=n(56890),y=n(35855),S=n(53994),z=n(53382),w=n(36314),C=n(81918),W=n(94294),k=n(94070),A=n(62114),P=n(43896),D=n(63466),N=n(13400),I=n(20068),M=n(65117),O=n(23786),L=n(24034),T=n(23197),H=n(89731),F=n(85680),E=n(78045),V=n(57689),B=n(52797),R=n(1724),$=n(22983),q=n(90772),Y=n(81897),U=(n(91587),n(58536)),X=n(10163),G=n(97820),J=n(71652),K=n(41985),Q=n(12649),ee=n(34045),te=n(35125),ne=n(23038),se=n(80184),re=function(e){var t,n,s=e.mode,r=e.organizations,i=e.students,o=e.selectedOrg,p=e.selectedStudent,v=e.setSelectedOrg,_=e.setSelectedStudent,b=e.loading,y=(0,c.Z)();(0,l.Z)(y.breakpoints.down("md"));return(0,se.jsx)(d.Z,{sx:{mb:3,p:2},children:(0,se.jsx)(u.Z,{children:(0,se.jsxs)(x.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,se.jsx)(x.ZP,{item:!0,xs:12,md:3,children:(0,se.jsx)(h.Z,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"flex-end"},children:(0,se.jsx)(m.Z,{sx:{fontWeight:600,color:"text.primary"},children:"organization"===s?"Select Organization":"Select Student"})})}),(0,se.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,se.jsx)(Z.Z,{id:"select-id",options:"organization"===s?r:i,getOptionLabel:function(e){return"organization"===s?e.company_name:(0,F.Z)(e.student_name)},value:"organization"===s?r.find((function(e){return e.company_id===o}))||null:i.find((function(e){return e.student_id===p}))||null,onChange:function(e,t){"organization"===s?v(t?t.company_id:""):_(t?t.student_id:"")},isOptionEqualToValue:function(e,t){return"organization"===s?e.company_id===t.company_id:e.student_id===t.student_id},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Select ".concat("organization"===s?"Organization":"Student"),variant:"outlined",size:"small",disabled:b,InputProps:(0,a.Z)((0,a.Z)({},e.InputProps),{},{endAdornment:(0,se.jsxs)(se.Fragment,{children:[b?(0,se.jsx)(f.Z,{size:20}):null,e.InputProps.endAdornment]})})}))},sx:{width:"100%"}})}),"organization"===s&&o||"student"===s&&p?(0,se.jsx)(x.ZP,{item:!0,xs:12,md:3,children:(0,se.jsxs)(h.Z,{sx:{display:"flex",alignItems:"center",gap:1,justifyContent:"flex-start"},children:[(0,se.jsx)(Y.Z,{color:"primary"}),(0,se.jsx)(h.Z,{children:(0,se.jsx)(j.Z,{variant:"subtitle1",fontWeight:600,children:"organization"===s?null===(t=r.find((function(e){return e.company_id===o})))||void 0===t?void 0:t.company_name:(0,F.Z)(null===(n=i.find((function(e){return e.student_id===p})))||void 0===n?void 0:n.student_name)})})]})}):null]})})})},ie=function(e){var t=e.message,n=e.icon;return(0,se.jsxs)(p.Z,{sx:{p:6,textAlign:"center",background:"transparent"},children:[(0,se.jsx)(n,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,se.jsx)(j.Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:t}),(0,se.jsx)(j.Z,{variant:"body2",color:"text.secondary",children:"Select an item from the dropdown above to view reports"})]})},ae=function(e){var t=e.students;return(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"S.No"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Student Name"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Total Classes"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Attendance"})]})}),(0,se.jsx)(z.Z,{children:t.map((function(e,t){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:t+1})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:(0,F.Z)(e.student_name||e.name)})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:e.total_classes})}),(0,se.jsx)(S.Z,{children:(0,se.jsxs)(w.Z,{direction:"row",spacing:1,flexWrap:"wrap",children:[(0,se.jsx)(C.Z,{label:"Present: ".concat(e.attended_classes||0),color:"success",size:"small"}),(0,se.jsx)(C.Z,{label:"Absent: ".concat(e.absent_classes||0),color:"error",size:"small"})]})})]},e.student_id||e.id)}))})]})})},oe=function(e){var t=e.attendance,n=e.mode;return(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"S.No"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Date"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Time Slot"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Course"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Batch"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Tutor"}),"organization"===n?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Present"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Absent"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Absent Students"})]}):(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Status"})]})}),(0,se.jsx)(z.Z,{children:t.map((function(e){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:e.sno})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:(0,E.o)(e.scheduled_date,{includeTime:!1})})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:"".concat(e.start_time||"-"," - ").concat(e.end_time||"-")})}),(0,se.jsxs)(S.Z,{children:[" ",(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:e.course_name})]}),(0,se.jsxs)(S.Z,{children:[" ",(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:e.title})]}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:e.trainer_name||"-"})}),"organization"===n?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.attendance.present_count||0,color:"success",size:"small"})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.attendance.absent_count||0,color:"error",size:"small"})}),(0,se.jsx)(S.Z,{children:(0,se.jsxs)(w.Z,{direction:"row",spacing:.5,flexWrap:"wrap",children:[(e.attendance.absent_names||[]).slice(0,3).map((function(e,t){return(0,se.jsx)(C.Z,{label:e,color:"error",size:"small"},t)})),(e.attendance.absent_names||[]).length>3&&(0,se.jsx)(C.Z,{label:"+".concat((e.attendance.absent_names||[]).length-3),size:"small"})]})})]}):(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:(0,F.Z)(e.status),color:"Upcoming"===e.status?"default":"Present"===e.status?"success":"error",size:"small",sx:{fontWeight:600}})})]},e.sno)}))})]})})},ce=function(e){var t=e.courses,n=e.selectCourse,s=e.mode;return(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"S.No"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Course Name"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Assignments"}),"organization"===s&&(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Students"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Actions"})]})}),(0,se.jsx)(z.Z,{children:t.map((function(e,t){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:t+1})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:e.course_name})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.total_assignments,color:"primary",variant:"filled",sx:{fontWeight:600,minWidth:60}})}),"organization"===s&&(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.total_students,color:"success",variant:"filled",sx:{fontWeight:600,minWidth:60}})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(W.Z,{variant:"contained",size:"small",onClick:function(){return n(e.course_id)},startIcon:(0,se.jsx)(B.Z,{}),children:"View Details"})})]},e.course_id)}))})]})})},le=function(e){var t=e.students,n=e.courseName,s=e.onBack;return(0,se.jsxs)(h.Z,{children:[(0,se.jsx)(W.Z,{variant:"outlined",onClick:s,startIcon:"\u2190",sx:{mb:2},children:"Back to Courses"}),(0,se.jsxs)(j.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:["Exercise Tracking for ",n]}),(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"S.No"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Student Name"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Submitted"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Pending"})]})}),(0,se.jsx)(z.Z,{children:t.map((function(e,t){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:t+1})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:(0,F.Z)(e.student_name)})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.submitted||0,color:"success",variant:"filled",sx:{fontWeight:600,minWidth:60}})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{className:"warning-chip",label:e.pending||0,color:"warning",variant:"filled",sx:{fontWeight:600,minWidth:60}})})]},e.student_id)}))})]})})]})},de=function(e){var t=e.students,n=e.selectStudent;return(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"S.No"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Student Name"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Completed"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Pending"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Actions"})]})}),(0,se.jsx)(z.Z,{children:t.map((function(e,t){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:t+1})}),(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:(0,F.Z)(e.student_name)})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.completed_tests||0,color:"success",variant:"filled",sx:{fontWeight:600,minWidth:60}})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{className:"warning-chip",label:e.pending_tests||0,color:"warning",variant:"filled",sx:{fontWeight:600,minWidth:60}})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(W.Z,{variant:"contained",size:"small",onClick:function(){return n(e.student_id)},startIcon:(0,se.jsx)(R.Z,{}),disabled:!e.test_details||0===e.test_details.length,children:"View Details"})})]},e.student_id)}))})]})})},ue=function(e){var t=e.student,n=e.onBack;return(0,se.jsxs)(h.Z,{children:[(0,se.jsx)(W.Z,{variant:"outlined",onClick:n,startIcon:"\u2190",sx:{mb:2},children:"Back to Students"}),(0,se.jsxs)(j.Z,{variant:"h6",gutterBottom:!0,color:"primary",children:["Assessment Details for ",(0,F.Z)(t.student_name)]}),(0,se.jsx)(v.Z,{component:p.Z,variant:"outlined",children:(0,se.jsxs)(_.Z,{children:[(0,se.jsx)(b.Z,{children:(0,se.jsxs)(y.Z,{sx:{background:"rgba(240,240,255,0.65)"},children:[(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Test Name"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700},children:"Course"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Total Marks"}),(0,se.jsx)(S.Z,{sx:{fontWeight:700,textAlign:"center"},children:"Status"})]})}),(0,se.jsx)(z.Z,{children:t.test_details&&t.test_details.length>0?t.test_details.map((function(e){return(0,se.jsxs)(y.Z,{hover:!0,children:[(0,se.jsx)(S.Z,{children:(0,se.jsx)(j.Z,{fontWeight:600,children:e.test_name})}),(0,se.jsxs)(S.Z,{children:[" ",(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:e.course_name})]}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(j.Z,{variant:"body2",fontWeight:600,children:e.total_marks})}),(0,se.jsx)(S.Z,{sx:{textAlign:"center"},children:(0,se.jsx)(C.Z,{label:e.status||"Completed",color:"pending"===e.status?"warning":"success",size:"small"})})]},e.test_id)})):(0,se.jsx)(y.Z,{children:(0,se.jsx)(S.Z,{colSpan:4,align:"center",sx:{py:4},children:(0,se.jsx)(j.Z,{color:"text.secondary",children:"No tests found for this student."})})})})]})})]})};t.default=function(){var e=(0,V.TH)().pathname.includes("student-reports")?"student":"organization",t=(0,c.Z)(),n=(0,l.Z)(t.breakpoints.down("md")),x=(0,o.useState)(0),m=(0,i.Z)(x,2),p=m[0],v=m[1],_=(0,o.useState)([]),b=(0,i.Z)(_,2),y=b[0],S=b[1],z=(0,o.useState)([]),w=(0,i.Z)(z,2),C=w[0],W=w[1],xe=(0,o.useState)(""),he=(0,i.Z)(xe,2),me=he[0],Ze=he[1],ge=(0,o.useState)(""),fe=(0,i.Z)(ge,2),je=fe[0],pe=fe[1],ve=(0,o.useState)({students:[],courses:[],attendance_summary:[],test_summary:[],schedules:[]}),_e=(0,i.Z)(ve,2),be=_e[0],ye=_e[1],Se=(0,o.useState)(null),ze=(0,i.Z)(Se,2),we=ze[0],Ce=ze[1],We=(0,o.useState)(null),ke=(0,i.Z)(We,2),Ae=ke[0],Pe=ke[1],De=(0,o.useState)(!1),Ne=(0,i.Z)(De,2),Ie=Ne[0],Me=Ne[1],Oe=(0,o.useState)(""),Le=(0,i.Z)(Oe,2),Te=Le[0],He=Le[1],Fe=(0,o.useState)(""),Ee=(0,i.Z)(Fe,2),Ve=Ee[0],Be=Ee[1],Re=(0,o.useState)(null),$e=(0,i.Z)(Re,2),qe=$e[0],Ye=$e[1],Ue=(0,o.useState)(null),Xe=(0,i.Z)(Ue,2),Ge=Xe[0],Je=Xe[1],Ke=(0,o.useState)(""),Qe=(0,i.Z)(Ke,2),et=Qe[0],tt=Qe[1],nt=(0,o.useState)(""),st=(0,i.Z)(nt,2),rt=st[0],it=st[1],at=(0,o.useState)(null),ot=(0,i.Z)(at,2),ct=ot[0],lt=ot[1],dt=(0,o.useState)(null),ut=(0,i.Z)(dt,2),xt=ut[0],ht=ut[1],mt=Boolean(xt),Zt=(0,o.useCallback)((0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.Z.get("".concat(T.t6,"api/jarugandi"));case 3:t=e.sent,S(t.data.organizations_list||[]),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching organizations:",e.t0),He("Failed to load organizations");case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),gt=(0,o.useCallback)((0,r.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.Z.get("".concat(T.t6,"api/jarugandi"));case 3:t=e.sent,W(t.data.students_list||[]),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching students:",e.t0),He("Failed to load students");case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),ft=(0,o.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(("organization"!==e||me)&&("student"!==e||je)){t.next=3;break}return ye({students:[],courses:[],attendance_summary:[],test_summary:[],schedules:[]}),t.abrupt("return");case 3:return Me(!0),He(""),t.prev=5,n="organization"===e?{organization_id:me}:{student_id:je},t.next=9,H.Z.get("".concat(T.t6,"api/jarugandi/"),{params:n});case 9:r=t.sent,ye(r.data.success?{students:r.data.students||[],courses:r.data.courses||[],attendance_summary:r.data.attendance_summary||[],test_summary:r.data.test_summary||[],schedules:r.data.schedules||[],filterCourse:r.data.course||[],filterCategory:r.data.category||[],filterBatch:r.data.batch||[]}:{students:[],courses:[],attendance_summary:[],test_summary:[],schedules:[],filterCourse:[],filterCategory:[],filterBatch:[]}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(5),console.error("Error fetching data:",t.t0),He("Failed to load report data"),ye({students:[],courses:[],attendance_summary:[],test_summary:[],schedules:[]});case 18:return t.prev=18,Me(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[5,13,18,21]])}))),[e,me,je]);(0,o.useEffect)((function(){v(0),Ce(null),Pe(null),ye({students:[],courses:[],attendance_summary:[],test_summary:[],schedules:[]}),"organization"===e?(Ze(""),Zt()):(pe(""),gt())}),[e,Zt,gt]),(0,o.useEffect)((function(){ft()}),[ft]);var jt=be.courses||[],pt=be.schedules||[],vt=be.test_summary||[],_t=be.attendance_summary||[],bt=pt.map((function(e,t){var n=_t.find((function(t){return t.date===e.scheduled_date&&t.batch_name===e.batch_name}));return(0,a.Z)((0,a.Z)({},e),{},{sno:t+1,status:e.status,attendance:n||{date:e.scheduled_date,present_count:0,absent_count:0,absent_names:[]}})})),yt=jt.find((function(e){return e.course_id===we})),St=vt.find((function(e){return e.student_id===Ae})),zt=(0,o.useMemo)((function(){return bt.filter((function(e){if(!Ve&&!et&&!rt&&!ct&&!qe&&!Ge)return!0;var t,n,s,r,i,a;if(Ve&&!(""===Ve||(null===(t=e.batch_name)||void 0===t?void 0:t.toLowerCase().includes(Ve.toLowerCase()))||(null===(n=e.class_link)||void 0===n?void 0:n.toLowerCase().includes(Ve.toLowerCase()))||(null===(s=e.status)||void 0===s?void 0:s.toLowerCase().includes(Ve.toLowerCase()))||(null===(r=e.trainer_id)||void 0===r?void 0:r.toLowerCase().includes(Ve.toLowerCase()))||(null===(i=e.trainer_name)||void 0===i?void 0:i.toLowerCase().includes(Ve.toLowerCase()))||(null===(a=e.course_name)||void 0===a?void 0:a.toLowerCase().includes(Ve.toLowerCase()))))return!1;if(rt&&!(e.category_id===rt.category_id))return!1;if(et&&!(e.course_name===et.course_name))return!1;if(ct&&!(e.title===ct.title))return!1;if(qe||Ge){if(!e.scheduled_date)return!1;var o=new Date(e.scheduled_date);if(isNaN(o.getTime()))return!1;if(qe&&Ge){var c=new Date(qe),l=new Date(Ge);if(l.setHours(23,59,59,999),o<c||o>l)return!1}else if(qe){var d=new Date(qe);if(isNaN(d.getTime()))return!1;if(o<d)return!1}else if(Ge){var u=new Date(Ge);if(isNaN(u.getTime()))return!1;if(u.setHours(23,59,59,999),o>u)return!1}}return!0}))}),[bt,Ve,et,rt,ct,qe,Ge]).map((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{sno:t+1})})),wt=function(){ht(null)},Ct=function(t){var n=function(e){return[].concat([{name:"S.No",selector:function(e){return e.sno}},{name:"Date",selector:function(e){return(0,E.o)(e.scheduled_date,{includeTime:!1})}},{name:"Time Slot",selector:function(e){return"".concat(e.start_time||"-"," - ").concat(e.end_time||"-")}},{name:"Course",selector:function(e){return e.course_name}},{name:"Batch",selector:function(e){return e.title}},{name:"Tutor",selector:function(e){return e.trainer_name||"-"}}],"organization"===e?[{name:"Present Count",selector:function(e){var t;return(null===(t=e.attendance)||void 0===t?void 0:t.present_count)||0}},{name:"Absent Count",selector:function(e){var t;return(null===(t=e.attendance)||void 0===t?void 0:t.absent_count)||0}},{name:"Absent Students",selector:function(e){var t;return((null===(t=e.attendance)||void 0===t?void 0:t.absent_names)||[]).join(", ")}}]:[{name:"Status",selector:function(e){return(0,F.Z)(e.status)}}])}(e);return t.map((function(e){var t={};return n.forEach((function(n){var s=n.selector?n.selector(e):e[n.name.toLowerCase().replace(/ /g,"_")];t[n.name]=void 0!==s?s:""})),t}))};return(0,se.jsxs)(L.Z,{sx:{mt:2,background:t.palette.background.paper},children:[(0,se.jsxs)(h.Z,{sx:{mb:3,mt:2,textAlign:"center"},children:[(0,se.jsx)(j.Z,{variant:"h4",fontWeight:700,gutterBottom:!0,color:"primary",children:"organization"===e?"Organization Analytics Dashboard":"Student Performance Dashboard"}),(0,se.jsx)(j.Z,{variant:"subtitle1",color:"text.secondary",children:"organization"===e?"Comprehensive overview of organization performance and student progress":"Track your learning progress, attendance, and assessment results"})]}),(0,se.jsx)(re,{mode:e,organizations:y,students:C,selectedOrg:Number(me),selectedStudent:Number(je),setSelectedOrg:function(e){Ze(e),v(0),Ce(null),Pe(null)},setSelectedStudent:function(e){pe(e),v(0),Ce(null),Pe(null)},loading:Ie}),Te&&(0,se.jsx)(k.Z,{severity:"error",sx:{mb:3},children:Te}),"organization"===e&&me||"student"===e&&je?(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(d.Z,{children:(0,se.jsxs)(u.Z,{sx:{p:0},children:[(0,se.jsxs)(A.Z,{value:p,onChange:function(e,t){v(t),Pe(null),Ce(null)},sx:{borderBottom:1,borderColor:"divider",px:2,"& .MuiTab-root":{minHeight:60}},variant:n?"scrollable":"standard",centered:!n,children:[(0,se.jsx)(P.Z,{label:"Student Records",icon:(0,se.jsx)($.Z,{}),iconPosition:"start"}),(0,se.jsx)(P.Z,{label:"Class Schedule & Attendance",icon:(0,se.jsx)(q.Z,{}),iconPosition:"start"}),(0,se.jsx)(P.Z,{label:"Exercise Tracking",icon:(0,se.jsx)(B.Z,{}),iconPosition:"start"}),(0,se.jsx)(P.Z,{label:"Assessment Tracking",icon:(0,se.jsx)(R.Z,{}),iconPosition:"start"})]}),(0,se.jsx)(h.Z,{sx:{p:n?1:3},children:Ie?(0,se.jsx)(h.Z,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,se.jsx)(f.Z,{})}):(0,se.jsxs)(se.Fragment,{children:[0===p&&(be.students.length>0?(0,se.jsx)(ae,{students:be.students}):(0,se.jsx)(ie,{message:"No student records available",icon:$.Z})),1===p&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(h.Z,{sx:{mt:2,display:"flex",flexDirection:"column",gap:2},children:[(0,se.jsxs)(h.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,alignItems:{xs:"stretch",sm:"flex-start"}},children:[(0,se.jsx)(g.Z,{placeholder:"Search...",variant:"outlined",size:"small",value:Ve,name:"search".concat(Date.now()),onChange:function(e){return Be(e.target.value)},sx:{width:{xs:"100%",sm:200},minWidth:{xs:"auto",sm:200}},InputProps:{startAdornment:(0,se.jsx)(D.Z,{position:"start",children:(0,se.jsx)(U.Z,{size:20})}),endAdornment:(0,se.jsx)(D.Z,{position:"end",children:Ve&&(0,se.jsx)(N.Z,{onClick:function(){Ve&&Be("")},edge:"end",size:"small",children:(0,se.jsx)(X.Z,{size:20})})})}}),(0,se.jsx)(Z.Z,{id:"category_id",options:(null===be||void 0===be?void 0:be.filterCategory)||[],getOptionLabel:function(e){return e.category_name||""},value:rt,onChange:function(e,t){it(t)},size:"small",sx:{width:{xs:"100%",sm:180},minWidth:{xs:"auto",sm:180}},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Filter by category...",InputProps:(0,a.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.category_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.category_id===t.category_id},renderOption:function(e,t){return(0,o.createElement)("li",(0,a.Z)((0,a.Z)({},e),{},{key:t.category_id}),t.category_name)}}),(0,se.jsx)(Z.Z,{id:"course_id",options:(null===be||void 0===be?void 0:be.filterCourse)||[],getOptionLabel:function(e){return e.course_name||""},value:et,onChange:function(e,t){tt(t)},size:"small",sx:{width:{xs:"100%",sm:180},minWidth:{xs:"auto",sm:180}},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Filter by course...",InputProps:(0,a.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.course_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.course_id===t.course_id},renderOption:function(e,t){return(0,o.createElement)("li",(0,a.Z)((0,a.Z)({},e),{},{key:t.course_id}),t.course_name)}}),(0,se.jsx)(Z.Z,{id:"batch_id",options:(null===be||void 0===be?void 0:be.filterBatch)||[],getOptionLabel:function(e){return e.title||""},value:ct,onChange:function(e,t){lt(t)},size:"small",sx:{width:{xs:"100%",sm:180},minWidth:{xs:"auto",sm:180}},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{placeholder:"Filter by batch...",InputProps:(0,a.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.batch_id===t.batch_id},renderOption:function(e,t){return(0,o.createElement)("li",(0,a.Z)((0,a.Z)({},e),{},{key:t.batch_id}),t.title)}})]}),(0,se.jsx)(h.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},gap:2,width:"100%"},children:(0,se.jsxs)(h.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",gap:1,width:{xs:"100%",sm:"auto"}},children:[(0,se.jsx)(J._,{dateAdapter:Q.H,children:(0,se.jsxs)(h.Z,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:1,width:{xs:"100%",sm:"auto"}},children:[(0,se.jsx)(K.M,{label:"From Date",value:qe,onChange:function(e){return Ye(e)},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"small",sx:{width:{xs:"100%",sm:150},"& .MuiInputBase-root":{fontSize:"0.75rem"},"& input":{padding:"8px 12px"}}}))}}),(0,se.jsx)(K.M,{label:"To Date",value:Ge,onChange:function(e){return Je(e)},renderInput:function(e){return(0,se.jsx)(g.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"small",sx:{width:{xs:"100%",sm:150},"& .MuiInputBase-root":{fontSize:"0.75rem"},"& input":{padding:"8px 12px"}}}))}})]})}),(qe||Ge)&&(0,se.jsx)(N.Z,{onClick:function(){Ye(null),Je(null)},size:"small",title:"Clear dates",sx:{alignSelf:{xs:"flex-start",sm:"center"},mt:{xs:1,sm:0}},children:(0,se.jsx)(X.Z,{size:20})})]})}),(0,se.jsxs)(h.Z,{sx:{display:"flex",justifyContent:{xs:"flex-start",sm:"flex-end"},alignItems:"center",flex:1},children:[(0,se.jsx)(I.Z,{title:"Download Report",children:(0,se.jsx)(N.Z,{variant:"contained",color:"secondary",sx:{borderRadius:2},onClick:function(e){ht(e.currentTarget)},"aria-controls":"download-menu","aria-haspopup":"true","aria-expanded":mt?"true":void 0,children:(0,se.jsx)(G.Z,{})})}),(0,se.jsxs)(M.Z,{id:"download-menu",anchorEl:xt,open:mt,onClose:wt,MenuListProps:{"aria-labelledby":"download-button"},children:[(0,se.jsx)(O.Z,{onClick:function(){!function(t){try{if(!t||0===t.length)return void alert("No data to export");var n=Ct(t),s=ee.P6.json_to_sheet(n),r=Object.keys(n[0]);ee.P6.sheet_add_aoa(s,[r],{origin:"A1"});var i=ee.P6.book_new();ee.P6.book_append_sheet(i,s,"AttendanceData");var a="organization"===e?"organization_report_".concat((new Date).toISOString().slice(0,10),".xlsx"):"student_report_".concat((new Date).toISOString().slice(0,10),".xlsx");ee.NC(i,a)}catch(Te){console.error("Error exporting to Excel:",Te),alert("Failed to export to Excel")}}(zt),wt()},disabled:0===zt.length,children:"Export to Excel"}),(0,se.jsx)(O.Z,{onClick:function(){!function(t){try{if(!t||0===t.length)return void alert("No data to export");var n=Ct(t),s=Object.keys(n[0]),r=n.map((function(e){return s.map((function(t){return e[t]||""}))})),i=new te.kH,a="organization"===e?"Organization Report - ".concat((new Date).toLocaleDateString()):"Student Report - ".concat((new Date).toLocaleDateString()),o="organization"===e?"organization_report_".concat((new Date).toISOString().slice(0,10),".pdf"):"student_report_".concat((new Date).toISOString().slice(0,10),".pdf");i.text(a,14,15),(0,ne.ZP)(i,{head:[s],body:r,startY:20,styles:{fontSize:8},headStyles:{fillColor:[41,128,185]}}),i.save(o)}catch(Te){console.error("Error exporting to PDF:",Te),alert("Failed to export to PDF")}}(zt),wt()},disabled:0===zt.length,children:"Export to PDF"})]})]})]}),zt.length>0?(0,se.jsx)(oe,{attendance:zt,mode:e}):(0,se.jsx)(ie,{message:"No schedule data available",icon:q.Z})]}),2===p&&(0,se.jsx)(h.Z,{children:we?(0,se.jsx)(le,{students:(null===yt||void 0===yt?void 0:yt.students)||[],courseName:(null===yt||void 0===yt?void 0:yt.course_name)||"",onBack:function(){return Ce(null)}}):jt.length>0?(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(ce,{courses:jt,selectCourse:Ce,mode:e})}):(0,se.jsx)(ie,{message:"No courses available",icon:B.Z})}),3===p&&(0,se.jsx)(h.Z,{children:Ae?St?(0,se.jsx)(ue,{student:St,onBack:function(){return Pe(null)}}):(0,se.jsx)(ie,{message:"Assessment data not found",icon:R.Z}):vt.length>0?(0,se.jsx)(de,{students:vt,selectStudent:Pe}):(0,se.jsx)(ie,{message:"No assessment data available",icon:R.Z})})]})})]})})}):(0,se.jsx)(ie,{message:"Select a ".concat("organization"===e?"Organization":"Student"," to view reports"),icon:"organization"===e?Y.Z:$.Z})]})}},78045:function(e,t,n){n.d(t,{o:function(){return i}});var s=n(29439),r=n(23197),i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.includeTime,a=void 0===i||i,o=n.includeSeconds,c=void 0!==o&&o,l=n.timeOnly,d=void 0!==l&&l,u=n.useCurrentIfEmpty,x=void 0!==u&&u,h=n.fallback,m=void 0===h?"":h;if(e)if("string"===typeof e&&/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){var Z=e.split(":").map(Number),g=(0,s.Z)(Z,3),f=g[0],j=g[1],p=g[2];(t=new Date).setHours(f,j,p||0,0)}else t=e instanceof Date?e:new Date(e);else{if(!x)return m;t=new Date}if(isNaN(t.getTime()))return m;var v=function(e,t){var n=t.getHours(),s=n>=12,r={yyyy:t.getFullYear(),yy:String(t.getFullYear()).slice(-2),MM:String(t.getMonth()+1).padStart(2,"0"),M:t.getMonth()+1,dd:String(t.getDate()).padStart(2,"0"),d:t.getDate(),HH:String(n).padStart(2,"0"),H:n,hh:String(n%12||12).padStart(2,"0"),h:n%12||12,mm:String(t.getMinutes()).padStart(2,"0"),m:t.getMinutes(),ss:String(t.getSeconds()).padStart(2,"0"),s:t.getSeconds(),a:s?"PM":"AM"};return e.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g,(function(e){return r[e]||e}))};if(d){var _=r.ZP.timeFormat;return c||(_=(_=(_=_.replace(/:ss?/g,"")).replace(/(^|\s)ss?(\s|$)/g,"$1$2")).replace(/::/g,":").replace(/(\s|^):|:(\s|$)/g,"$1$2")),v(_,t)}if(a){var b=v(r.ZP.dateFormat,t),y=r.ZP.timeFormat;c||(y=(y=y.replace(/[:\\/]?ss?/g,"")).replace(/::/g,":").replace(/:$/,""));var S=v(y,t);return"".concat(b," ").concat(S)}return v(r.ZP.dateFormat,t)}},1724:function(e,t,n){var s=n(64836);t.Z=void 0;var r=s(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"}),"Assessment");t.Z=a},52797:function(e,t,n){var s=n(64836);t.Z=void 0;var r=s(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment");t.Z=a},90772:function(e,t,n){var s=n(64836);t.Z=void 0;var r=s(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth");t.Z=a},22983:function(e,t,n){var s=n(64836);t.Z=void 0;var r=s(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M16.5 13c-1.2 0-3.07.34-4.5 1-1.43-.67-3.3-1-4.5-1C5.33 13 1 14.08 1 16.25V19h22v-2.75c0-2.17-4.33-3.25-6.5-3.25zm-4 4.5h-10v-1.25c0-.54 2.56-1.75 5-1.75s5 1.21 5 1.75v1.25zm9 0H14v-1.25c0-.46-.2-.86-.52-1.22.88-.3 1.96-.53 3.02-.53 2.44 0 5 1.21 5 1.75v1.25zM7.5 12c1.93 0 3.5-1.57 3.5-3.5S9.43 5 7.5 5 4 6.57 4 8.5 5.57 12 7.5 12zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 5.5c1.93 0 3.5-1.57 3.5-3.5S18.43 5 16.5 5 13 6.57 13 8.5s1.57 3.5 3.5 3.5zm0-5.5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"}),"PeopleOutline");t.Z=a},81897:function(e,t,n){var s=n(64836);t.Z=void 0;var r=s(n(45649)),i=n(80184),a=(0,r.default)((0,i.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3 1 9l11 6 9-4.91V17h2V9L12 3z"}),"School");t.Z=a},39281:function(e,t,n){n.d(t,{Z:function(){return g}});var s=n(87462),r=n(63366),i=n(72791),a=n(59278),o=n(94419),c=n(31402),l=n(66934),d=n(75878),u=n(21217);function x(e){return(0,u.ZP)("MuiTableContainer",e)}(0,d.Z)("MuiTableContainer",["root"]);var h=n(80184),m=["className","component"],Z=(0,l.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),g=i.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiTableContainer"}),i=n.className,l=n.component,d=void 0===l?"div":l,u=(0,r.Z)(n,m),g=(0,s.Z)({},n,{component:d}),f=function(e){var t=e.classes;return(0,o.Z)({root:["root"]},x,t)}(g);return(0,h.jsx)(Z,(0,s.Z)({ref:t,as:d,className:(0,a.Z)(f.root,i),ownerState:g},u))}))}}]);
//# sourceMappingURL=8741.c912c0e5.chunk.js.map