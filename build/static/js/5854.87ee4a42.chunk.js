"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[5854],{40809:function(e,n,a){a.r(n),a.d(n,{default:function(){return te}});var t=a(4942),r=a(1413),i=a(61819),o=a(15861),l=a(29439),s=a(72791),c=a(697),d=a(20890),u=a(61889),m=a(68096),h=a(36314),p=a(30168),g=a(63366),f=a(87462),y=a(59278),b=a(52554),x=a(94419);function v(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function _(e){return parseFloat(e)}var Z=a(44402),k=a(66934),j=a(31402),S=a(75878),w=a(21217);function C(e){return(0,w.ZP)("MuiSkeleton",e)}(0,S.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var q,P,E,B,R,T,I,z,F=a(80184),A=["animation","className","component","height","style","variant","width"],N=(0,b.F4)(R||(R=q||(q=(0,p.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),L=(0,b.F4)(T||(T=P||(P=(0,p.Z)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),O=(0,k.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:function(e,n){var a=e.ownerState;return[n.root,n[a.variant],!1!==a.animation&&n[a.animation],a.hasChildren&&n.withChildren,a.hasChildren&&!a.width&&n.fitContent,a.hasChildren&&!a.height&&n.heightAuto]}})((function(e){var n=e.theme,a=e.ownerState,t=v(n.shape.borderRadius)||"px",r=_(n.shape.borderRadius);return(0,f.Z)({display:"block",backgroundColor:n.vars?n.vars.palette.Skeleton.bg:(0,Z.Fq)(n.palette.text.primary,"light"===n.palette.mode?.11:.13),height:"1.2em"},"text"===a.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(t,"/").concat(Math.round(r/.6*10)/10).concat(t),"&:empty:before":{content:'"\\00a0"'}},"circular"===a.variant&&{borderRadius:"50%"},"rounded"===a.variant&&{borderRadius:(n.vars||n).shape.borderRadius},a.hasChildren&&{"& > *":{visibility:"hidden"}},a.hasChildren&&!a.width&&{maxWidth:"fit-content"},a.hasChildren&&!a.height&&{height:"auto"})}),(function(e){return"pulse"===e.ownerState.animation&&(0,b.iv)(I||(I=E||(E=(0,p.Z)(["\n      animation: "," 2s ease-in-out 0.5s infinite;\n    "]))),N)}),(function(e){var n=e.ownerState,a=e.theme;return"wave"===n.animation&&(0,b.iv)(z||(z=B||(B=(0,p.Z)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 2s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),L,(a.vars||a).palette.action.hover)})),D=s.forwardRef((function(e,n){var a=(0,j.Z)({props:e,name:"MuiSkeleton"}),t=a.animation,r=void 0===t?"pulse":t,i=a.className,o=a.component,l=void 0===o?"span":o,s=a.height,c=a.style,d=a.variant,u=void 0===d?"text":d,m=a.width,h=(0,g.Z)(a,A),p=(0,f.Z)({},a,{animation:r,component:l,variant:u,hasChildren:Boolean(h.children)}),b=function(e){var n=e.classes,a=e.variant,t=e.animation,r=e.hasChildren,i=e.width,o=e.height,l={root:["root",a,t,r&&"withChildren",r&&!i&&"fitContent",r&&!o&&"heightAuto"]};return(0,x.Z)(l,C,n)}(p);return(0,F.jsx)(O,(0,f.Z)({as:l,ref:n,className:(0,y.Z)(b.root,i),ownerState:p},h,{style:(0,f.Z)({width:m,height:s},c)}))})),M=a(17133),W=a(94294),G=a(48550),K=a(79012),H=a(85523),X=a(94454),U=a(47071),V=a(24034),Y=a(36277),$=a(8007),J=a(23197),Q=a(89731),ee=a(21830),ne=a.n(ee),ae=a.p+"static/media/defaultlogo.0c85b0e162410dd8f995.png",te=function(){var e=(0,s.useState)(!1),n=(0,l.Z)(e,2),a=n[0],p=n[1],g=(0,s.useState)(!0),f=(0,l.Z)(g,2),y=f[0],b=f[1],x=(0,s.useState)({general_logo:null,secondary_logo:null,signature:null,company_name:"",company_address:"",company_email:"",company_contact:"",bank_ifsc:"",bank_branch:"",bank_name:"",bank_account_no:"",declaration:"",gst_detail:"",deactivation_options:null,payment_method:"",payment_key:""}),v=(0,l.Z)(x,2),_=v[0],Z=v[1],k=(0,s.useState)({general_logo:null,secondary_logo:null,signature:null}),j=(0,l.Z)(k,2),S=j[0],w=j[1],C=(0,s.useState)({general_logo:null,secondary_logo:null,signature:null}),q=(0,l.Z)(C,2),P=q[0],E=q[1],B=(0,s.useRef)({}),R=$.Ry().shape({company_address:$.Z_().required("Address is required"),company_email:$.Z_().email("Invalid email").required("Email is required"),company_contact:$.Z_().matches(/^[0-9]{10}$/,"Phone number must be 10 digits").required("Phone number is required"),bank_ifsc:$.Z_().required("IFSC code is required"),bank_branch:$.Z_().required("Branch name is required"),bank_name:$.Z_().required("Bank name is required"),bank_account_no:$.Z_().required("Account number is required"),declaration:$.Z_().required("Declaration is required"),gst_detail:$.Z_().required("GST detail is required"),deactivation_options:$.Z_().required("Deactivation options is required"),attendance_options:$.Z_().required("Attendance options is required"),payment_method:$.Z_().required("Payment options is required")});(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,Q.Z.get("".concat(J.t6,"api/settings"));case 4:n=e.sent,Z(n.data.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching settings:",e.t0);case 11:return e.prev=11,setTimeout((function(){return b(!1)}),100),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var T=(0,Y.TA)({initialValues:_,validationSchema:R,enableReinitialize:!0,onSubmit:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var t,r,o,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a){e.next=3;break}return e.abrupt("return");case 3:return p(!0),t=new FormData,P.general_logo&&t.append("general_logo",P.general_logo),P.secondary_logo&&t.append("secondary_logo",P.secondary_logo),P.signature&&t.append("signature",P.signature),["company_name","company_address","company_email","company_contact","bank_ifsc","bank_branch","bank_name","bank_account_no","declaration","gst_detail","deactivation_options","attendance_options","payment_method","payment_key"].forEach((function(e){t.append(e,n[e])})),r=n.id?"".concat(J.t6,"api/settings/").concat(n.id):"".concat(J.t6,"api/settings"),o=n.id?"patch":"post",e.next=14,Q.Z[o](r,t,{headers:{"Content-Type":"multipart/form-data"}});case 14:if(!1!==(l=e.sent).data.success){e.next=18;break}return ne().fire({title:"Error!",text:l.data.message,icon:"error",confirmButtonText:"OK"}),e.abrupt("return");case 18:ne().fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonText:"OK"}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Error saving settings:",e.t0),ne().fire({title:"Error!",text:"Failed to save settings",icon:"error",confirmButtonText:"OK"});case 25:return e.prev=25,p(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,21,25,28]])})));return function(n){return e.apply(this,arguments)}}()}),I=function(e){var n=e.src,a=e.alt,t=e.hasImage,r=e.fieldName,i={width:100,height:100,border:"1px dashed #ccc",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.50",overflow:"hidden",position:"relative",flexShrink:0};return n?(0,F.jsx)(c.Z,{sx:i,ref:function(e){e&&!B.current[r]&&(B.current[r]=e.getBoundingClientRect())},children:(0,F.jsx)("img",{src:n,alt:a,style:{width:"100%",height:"100%",objectFit:"contain",display:"block"},loading:"lazy",decoding:"async",onLoad:function(e){e.target.style.opacity="1";var n=e.target.parentElement;n&&(n.style.width="100px",n.style.height="100px")},onError:function(e){e.target.onerror=null,e.target.src=ae}})}):(0,F.jsx)(c.Z,{sx:i,ref:function(e){e&&!B.current[r]&&(B.current[r]=e.getBoundingClientRect())},children:(0,F.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:t?"Loading...":"No Image"})})},z=function(e){return(0,s.createElement)(u.ZP,(0,r.Z)((0,r.Z)({item:!0},e.gridSize),{},{key:"skeleton-".concat(e.name)}),(0,F.jsx)(m.Z,{fullWidth:!0,children:(0,F.jsxs)(h.Z,{spacing:1,children:[(0,F.jsx)(D,{variant:"text",width:"40%",height:24}),(0,F.jsx)(D,{variant:"rounded",height:e.multiline?80:56})]})}))};return(0,F.jsxs)("form",{onSubmit:T.handleSubmit,encType:"multipart/form-data",children:[(0,F.jsxs)(h.Z,{spacing:2,children:[(0,F.jsx)(V.Z,{title:"Logo & Signature",children:(0,F.jsx)(u.ZP,{container:!0,spacing:3,children:(0,F.jsx)(u.ZP,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[{name:"general_logo",label:"General Logo",uploadId:"general-logo-upload",alt:"General Logo Preview"},{name:"secondary_logo",label:"Favicon Logo",uploadId:"secondary-logo-upload",alt:"Secondary Logo Preview"},{name:"signature",label:"Signature",uploadId:"signature-upload",alt:"Signature Preview"}].map((function(e){return(0,F.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,F.jsx)(m.Z,{fullWidth:!0,children:(0,F.jsxs)(h.Z,{spacing:2,children:[(0,F.jsx)(M.Z,{children:e.label}),(0,F.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexDirection:"column",minHeight:140},children:y?(0,F.jsx)(c.Z,{sx:{width:100,height:100,border:"1px dashed #ccc",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.50"},children:(0,F.jsx)(D,{variant:"rounded",width:80,height:80})}):(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(I,{src:(n=e.name,S[n]?S[n]:"string"===typeof T.values[n]&&T.values[n]?T.values[n]:ae),alt:e.alt,hasImage:!!T.values[e.name],fieldName:e.name}),(0,F.jsx)("input",{accept:"image/*",style:{display:"none"},id:e.uploadId,type:"file",onChange:function(n){return function(e,n){var a,i=null===(a=e.target.files)||void 0===a?void 0:a[0];if(i){E((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,t.Z)({},n,i))}));var o=URL.createObjectURL(i);w((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,t.Z)({},n,o))}))}}(n,e.name)}}),(0,F.jsx)("label",{htmlFor:e.uploadId,children:(0,F.jsxs)(W.Z,{variant:"outlined",component:"span",size:"small",children:["Choose ",e.label.includes("Logo")?"Logo":"Signature"]})})]})})]})})},e.name);var n}))})})}),[{title:"General Details",fields:[{name:"company_name",label:"Company Name *",placeholder:"Enter company name",gridSize:{xs:12,sm:6},required:!0},{name:"company_email",label:"Email *",placeholder:"Enter company email",type:"email",gridSize:{xs:12,sm:6},required:!0},{name:"company_contact",label:"Phone Number *",placeholder:"Enter phone number",gridSize:{xs:12,sm:6},required:!0},{name:"company_address",label:"Address *",placeholder:"Enter company address",gridSize:{xs:12},multiline:!0,rows:3,required:!0}]},{title:"Bank Details",fields:[{name:"bank_name",label:"Bank Name *",placeholder:"Enter bank name",gridSize:{xs:12,sm:6},required:!0},{name:"bank_branch",label:"Branch Name *",placeholder:"Enter branch name",gridSize:{xs:12,sm:6},required:!0},{name:"bank_ifsc",label:"IFSC Code *",placeholder:"Enter IFSC code",gridSize:{xs:12,sm:6},required:!0},{name:"bank_account_no",label:"Account Number *",placeholder:"Enter account number",gridSize:{xs:12,sm:6},required:!0},{name:"declaration",label:"Declaration *",placeholder:"Enter declaration",gridSize:{xs:12,sm:6},required:!0},{name:"gst_detail",label:"GST Number *",placeholder:"Enter GST number",gridSize:{xs:12,sm:6},required:!0}]}].map((function(e){return(0,F.jsx)(V.Z,{title:e.title,children:(0,F.jsx)(u.ZP,{container:!0,spacing:3,children:y?e.fields.map(z):e.fields.map((function(e){return(0,s.createElement)(u.ZP,(0,r.Z)((0,r.Z)({item:!0},e.gridSize),{},{key:e.name}),(0,F.jsx)(m.Z,{fullWidth:!0,children:(0,F.jsxs)(h.Z,{spacing:1,children:[(0,F.jsx)(M.Z,{children:e.label}),(0,F.jsx)(G.Z,{name:e.name,type:e.type||"text",value:T.values[e.name],onChange:T.handleChange,onBlur:T.handleBlur,error:T.touched[e.name]&&Boolean(T.errors[e.name]),helperText:T.touched[e.name]&&T.errors[e.name],placeholder:e.placeholder,multiline:e.multiline,rows:e.rows,fullWidth:!0,InputProps:{style:{minHeight:e.multiline?"80px":"auto"}}})]})}))}))})},e.title)})),Object.entries({deactivationOptions:{title:"Portal Access Permissions",name:"deactivation_options",options:[{value:"after_course_completion",label:"Course Completion Based - Portal access granted only after completing all course requirements"},{value:"after_batch_completion",label:"Batch Completion Based - Portal access granted only after completing all course requirements in a batch"},{value:"1_year_deactivation",label:"1 Year - Portal access available for 1 year"},{value:"no_deactivation",label:"No Deactivation - Portal access available indefinitely"}],helperText:"Select only one access type for student portal permissions"},attendanceOptions:{title:"Attendance Type",name:"attendance_options",options:[{value:"automatic_attendance",label:"Automatic - link clicked by student automatically attendance marked"},{value:"manual_attendance",label:"Manual - student marks attendance manually"}],helperText:"Select based on student attendance type"},paymentMethodOptions:{title:"Payment Method",name:"payment_method",options:[{value:"stripe_enabled",label:"Stripe based payment"},{value:"paypal_enabled",label:"PayPal based payment"}],helperText:"Select based on payment method type"}}).map((function(e){var n=(0,l.Z)(e,2),a=n[0],t=n[1];return(0,F.jsx)(V.Z,{title:t.title,children:(0,F.jsx)(u.ZP,{container:!0,spacing:3,children:(0,F.jsx)(u.ZP,{item:!0,xs:12,children:(0,F.jsx)(m.Z,{fullWidth:!0,error:T.touched[t.name]&&Boolean(T.errors[t.name]),children:(0,F.jsxs)(h.Z,{spacing:2,children:[(0,F.jsx)(K.Z,{children:y?Array.from({length:t.options.length}).map((function(e,n){return(0,F.jsx)(H.Z,{control:(0,F.jsx)(D,{variant:"rounded",width:20,height:20}),label:(0,F.jsx)(D,{variant:"text",width:"80%"})},"skeleton-".concat(n))})):t.options.map((function(e){return(0,F.jsx)(H.Z,{control:(0,F.jsx)(X.Z,{checked:T.values[t.name]===e.value,onChange:function(){return function(e,n){var a=T.values[e]===n?"":n;T.setFieldValue(e,a)}(t.name,e.value)},name:t.name}),label:e.label},e.value)}))}),"payment_method"===t.name&&T.values.payment_method&&(0,F.jsxs)(c.Z,{sx:{mt:2},children:[(0,F.jsx)(M.Z,{children:"stripe_enabled"===T.values.payment_method?"Stripe Key":"PayPal Key"}),(0,F.jsx)(G.Z,{fullWidth:!0,type:"password",name:"payment_key",placeholder:"Enter payment key",value:T.values.payment_key,onChange:T.handleChange,onBlur:T.handleBlur,error:T.touched.payment_key&&Boolean(T.errors.payment_key),helperText:T.touched.payment_key&&T.errors.payment_key,sx:{mt:1},autoComplete:"new-password"})]}),T.touched[t.name]&&T.errors[t.name]&&(0,F.jsx)(U.Z,{error:!0,children:T.errors[t.name]}),(0,F.jsx)(U.Z,{children:t.helperText})]})})})})},a)}))]}),(0,F.jsx)(u.ZP,{item:!0,xs:12,children:(0,F.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2,minHeight:15},children:y?(0,F.jsx)(D,{variant:"rounded",width:120,height:40}):(0,F.jsx)(W.Z,{type:"submit",variant:"contained",size:"large",disabled:a,sx:{minWidth:120,minHeight:40,flexShrink:0},children:a?"Saving...":"Save"})})})]})}}}]);
//# sourceMappingURL=5854.87ee4a42.chunk.js.map