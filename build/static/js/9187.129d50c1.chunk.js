"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[9187],{39187:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(93433),o=t(61819),a=t(15861),i=t(29439),l=t(24034),u=t(72791),s=t(91164),c=t(95305),d=t(89731),v=t(23197),h=t(20890),x=t(697),f=t(39281),p=t(35527),Z=t(79836),m=t(56890),j=t(35855),b=t(53994),_=t(53382),g=t(80184);function C(){var e,n,t,C,w=(0,u.useState)({}),S=(0,i.Z)(w,2),N=S[0],L=S[1],k=(0,u.useState)(!1),y=(0,i.Z)(k,2),M=y[0],R=y[1],T=(0,u.useState)(""),B=(0,i.Z)(T,2),D=B[0],F=B[1],I=(0,u.useState)(""),A=(0,i.Z)(I,2),P=A[0],W=A[1],E=(0,u.useState)(""),J=(0,i.Z)(E,2),O=J[0],X=J[1],q=JSON.parse(localStorage.getItem("auth")),z=(null===q||void 0===q||null===(e=q.user)||void 0===e?void 0:e.employee_id)||(null===q||void 0===q||null===(n=q.user)||void 0===n?void 0:n.user_id),G=(null===q||void 0===q||null===(t=q.user)||void 0===t?void 0:t.student_id)||(null===q||void 0===q||null===(C=q.user)||void 0===C?void 0:C.employer_id),H=null===q||void 0===q?void 0:q.loginType,K=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,R(!1),"tutor"!==H){e.next=8;break}return e.next=5,d.Z.get("".concat(v.t6,"api/trainers/").concat(z));case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,d.Z.get("".concat(v.t6,"api/student_profile/").concat(G));case 10:n=e.sent;case 11:t=n.data,L(t.data),R(!0),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),R(!0),(0,s.WI)((0,c.ss)({open:!0,message:"Failed to load data",variant:"alert",alert:{color:"error"}}));case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),[z,G,H]);(0,u.useEffect)((function(){K()}),[K]);var Q=(0,u.useMemo)((function(){if(null===N||void 0===N||!N.batch)return[];var e=N.batch.map((function(e){return e.course_name}));return(0,r.Z)(new Set(e)).filter(Boolean)}),[N]),U=(0,u.useMemo)((function(){if(null===N||void 0===N||!N.batch)return[];var e=N.batch.flatMap((function(e){var n;return(null===(n=e.students)||void 0===n?void 0:n.map((function(e){return e.student_name})))||[]}));return(0,r.Z)(new Set(e)).filter(Boolean)}),[N]),V=(0,u.useMemo)((function(){if(null===N||void 0===N||!N.batch)return[];var e=D.toLowerCase();return N.batch.filter((function(n){var t,r,o;return(null===(t=n.title)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(r=n.course_name)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(o=n.trainer_name)||void 0===o?void 0:o.toLowerCase().includes(e))}))}),[D,N]),Y=(0,u.useMemo)((function(){if(null===N||void 0===N||!N.batch)return[];var e=D.toLowerCase();return N.batch.filter((function(n){var t,r,o,a,i=null===(t=n.students)||void 0===t?void 0:t.some((function(n){var t;return null===(t=n.student_name)||void 0===t?void 0:t.toLowerCase().includes(e)})),l=(null===(r=n.title)||void 0===r?void 0:r.toLowerCase().includes(e))||(null===(o=n.course_name)||void 0===o?void 0:o.toLowerCase().includes(e))||i,u=""===P||n.course_name===P,s=""===O||(null===(a=n.students)||void 0===a?void 0:a.some((function(e){return e.student_name===O})));return l&&u&&s}))}),[D,P,O,N]),$=function(e){var n=e.load,t=e.batchData;return n?t&&0!==t.length?(0,g.jsx)(f.Z,{component:p.Z,children:(0,g.jsxs)(Z.Z,{children:[(0,g.jsx)(m.Z,{children:(0,g.jsxs)(j.Z,{children:[(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Batch Name"})}),(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Course Name"})}),(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Tutor Name"})})]})}),(0,g.jsx)(_.Z,{children:t.map((function(e){return(0,g.jsxs)(j.Z,{hover:!0,children:[(0,g.jsx)(b.Z,{children:e.title}),(0,g.jsx)(b.Z,{children:e.course_name}),(0,g.jsx)(b.Z,{children:e.trainer_name})]},e.batch_id)}))})]})}):(0,g.jsx)(h.Z,{children:"No Batch Found"}):(0,g.jsx)(h.Z,{children:"Loading..."})},ee=function(e){var n=e.load,t=e.batchData;return n?t&&0!==t.length?(0,g.jsx)(f.Z,{component:p.Z,children:(0,g.jsxs)(Z.Z,{children:[(0,g.jsx)(m.Z,{children:(0,g.jsxs)(j.Z,{children:[(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Batch Name"})}),(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Course Name"})}),(0,g.jsx)(b.Z,{children:(0,g.jsx)("b",{children:"Student Name"})})]})}),(0,g.jsx)(_.Z,{children:t.map((function(e){var n;return null===(n=e.students)||void 0===n?void 0:n.map((function(n){return(0,g.jsxs)(j.Z,{hover:!0,children:[(0,g.jsx)(b.Z,{children:e.title}),(0,g.jsx)(b.Z,{children:e.course_name}),(0,g.jsx)(b.Z,{children:n.student_name})]},"".concat(e.batch_id,"-").concat(n.student_id))}))}))})]})}):(0,g.jsx)(h.Z,{children:"No Records Found"}):(0,g.jsx)(h.Z,{children:"Loading..."})};return(0,g.jsxs)(l.Z,{content:!1,title:"Logs",children:[(0,g.jsxs)(x.Z,{sx:{display:"flex",gap:2,justifyContent:"center",alignItems:"center",flexWrap:"wrap",mb:2},children:[(0,g.jsx)("input",{type:"text",placeholder:"Search...",value:D,onChange:function(e){return F(e.target.value)},style:{padding:"8px",borderRadius:"6px",border:"1px solid #ccc",width:"220px"}}),"tutor"===H&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("select",{value:P,onChange:function(e){return W(e.target.value)},style:{padding:"8px",borderRadius:"6px"},children:[(0,g.jsx)("option",{value:"",children:"All Courses"}),Q.map((function(e,n){return(0,g.jsx)("option",{value:e,children:e},n)}))]}),(0,g.jsxs)("select",{value:O,onChange:function(e){return X(e.target.value)},style:{padding:"8px",borderRadius:"6px"},children:[(0,g.jsx)("option",{value:"",children:"All Students"}),U.map((function(e,n){return(0,g.jsx)("option",{value:e,children:e},n)}))]})]})]}),"student"===H&&(0,g.jsx)($,{load:M,batchData:V}),"tutor"===H&&(0,g.jsx)(ee,{load:M,batchData:Y})]})}},39281:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(87462),o=t(63366),a=t(72791),i=t(59278),l=t(94419),u=t(31402),s=t(66934),c=t(75878),d=t(21217);function v(e){return(0,d.ZP)("MuiTableContainer",e)}(0,c.Z)("MuiTableContainer",["root"]);var h=t(80184),x=["className","component"],f=(0,s.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,n){return n.root}})({width:"100%",overflowX:"auto"}),p=a.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiTableContainer"}),a=t.className,s=t.component,c=void 0===s?"div":s,d=(0,o.Z)(t,x),p=(0,r.Z)({},t,{component:c}),Z=function(e){var n=e.classes;return(0,l.Z)({root:["root"]},v,n)}(p);return(0,h.jsx)(f,(0,r.Z)({ref:n,as:c,className:(0,i.Z)(Z.root,a),ownerState:p},d))}))}}]);
//# sourceMappingURL=9187.129d50c1.chunk.js.map