{"version":3,"file":"static/js/2133.03dd1850.chunk.js","mappings":"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","sources":["hooks/usePermission.js","pages/course/SyllablesTab.js","pages/course/CourseReactDraft.js","pages/course/TopicsTab.js","pages/course/ExercisesTab.js","pages/course/StudentAssessmentTab.js","pages/course/coursedetail.js","utils/dateUtils.js"],"sourcesContent":["// hooks/usePermission.js\nimport { useCallback } from 'react';\n\nexport const usePermission = () => {\n  const checkPermission = useCallback((module, action) => {\n    try {\n      const data = JSON.parse(localStorage.getItem('auth') || '[]');\n      const userType = data?.loginType;\n      const permissions = data?.user?.permissions || [];\n\n      if (userType === 'super_admin') return true;\n\n      if (userType === 'admin') {\n        return permissions.some((permission) => permission.module_name === module && permission.allowed_actions.includes(action));\n      }\n\n      return false;\n    } catch (error) {\n      console.error('Error checking permission:', error);\n      return false;\n    }\n  }, []);\n\n  return { checkPermission };\n};\n","import { Grid, Box, Typography, Button, Card, CardContent, CardActions, CircularProgress, IconButton, Tooltip } from '@mui/material';\nimport { DocumentUpload, Document, CloseCircle, Gallery, DocumentText, Eye } from 'iconsax-react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { Modal } from '@mui/material';\nimport { openSnackbar } from 'store/reducers/snackbar';\nimport { dispatch } from 'store';\nimport PropTypes from 'prop-types';\nimport { usePermission } from 'hooks/usePermission';\n\nconst SyllablesTab = ({ data, onAddItem, onUpdateItem }) => {\n  const { checkPermission } = usePermission();\n  const canUpdate = checkPermission('Course', 'update');\n\n  const [syllables, setSyllables] = useState(data || []);\n  const [openModal, setOpenModal] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentItemId, setCurrentItemId] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [error, setError] = useState(null);\n  const [itemData, setItemData] = useState({\n    date: new Date(),\n    file: null\n  });\n\n  const auth = JSON.parse(localStorage.getItem('auth'));\n  const userType = auth?.loginType;\n\n  useEffect(() => {\n    if (error) {\n      dispatch(\n        openSnackbar({\n          open: true,\n          message: error,\n          variant: 'alert',\n          alert: {\n            color: 'error'\n          },\n          close: false\n        })\n      );\n    }\n  }, [error]);\n\n  // Update local state when props change\n  useEffect(() => {\n    if (data) {\n      setSyllables(data.filter((item) => item !== undefined));\n      setIsLoading(false);\n    } else {\n      setIsLoading(true);\n    }\n  }, [data]);\n\n  // Add or update syllabus item\n  const saveSyllabusItem = async () => {\n    setIsProcessing(true);\n    setError(null);\n\n    try {\n      if (isEditing) {\n        const updatedItem = await onUpdateItem(currentItemId, itemData);\n        setSyllables(syllables.map((item) => (item.id === currentItemId ? updatedItem : item)));\n      } else {\n        const newItem = await onAddItem(itemData);\n        setSyllables([...syllables.filter((item) => item !== undefined), newItem]);\n      }\n      handleCloseModal();\n    } catch (err) {\n      setError(err.message || 'An error occurred');\n      console.error(`Error ${isEditing ? 'updating' : 'adding'} syllabus item:`, err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleOpenModal = () => {\n    setIsEditing(false);\n    setCurrentItemId(null);\n    setItemData({\n      date: new Date(),\n      file: null\n    });\n    setOpenModal(true);\n  };\n\n  const handleCloseModal = () => {\n    setOpenModal(false);\n    setIsEditing(false);\n    setCurrentItemId(null);\n    setItemData({\n      date: new Date(),\n      file: null\n    });\n  };\n\n  const handleFileChange = (e) => {\n    if (e.target.files.length > 0) {\n      const file = e.target.files[0];\n      setItemData((prev) => ({ ...prev, file }));\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setItemData((prev) => ({ ...prev, file: null }));\n  };\n\n  const getFileIcon = (fileType) => {\n    if (fileType.includes('image')) {\n      return <Gallery size=\"48\" color=\"#666\" />;\n    } else if (fileType.includes('pdf')) {\n      return <DocumentText size=\"48\" color=\"#ff5252\" />;\n    } else if (fileType.includes('word') || fileType.includes('document')) {\n      return <DocumentText size=\"48\" color=\"#2b579a\" />;\n    } else if (fileType.includes('excel') || fileType.includes('sheet')) {\n      return <DocumentText size=\"48\" color=\"#217346\" />;\n    } else if (fileType.includes('powerpoint') || fileType.includes('presentation')) {\n      return <DocumentText size=\"48\" color=\"#d24726\" />;\n    } else {\n      return <Document size=\"48\" color=\"#666\" />;\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const [previewModal, setPreviewModal] = useState(false);\n  const [currentFile, setCurrentFile] = useState(null);\n\n  const handleViewFileSimple = useCallback((item) => {\n    setCurrentFile(item);\n    setPreviewModal(true);\n  }, []);\n\n  // Enhanced file type detection\n  const getFileCategory = (fileName, fileType) => {\n    const extension = fileName?.split('.').pop()?.toLowerCase() || '';\n    const type = fileType?.toLowerCase() || '';\n\n    // Image files\n    const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg', 'bmp', 'tiff'];\n    if (imageExtensions.includes(extension) || type.includes('image')) {\n      return 'image';\n    }\n\n    // PDF files\n    if (extension === 'pdf' || type.includes('pdf')) {\n      return 'pdf';\n    }\n\n    // Text files\n    const textExtensions = ['txt', 'csv', 'json', 'xml', 'md'];\n    if (textExtensions.includes(extension) || type.includes('text')) {\n      return 'text';\n    }\n\n    // Office files\n    const wordExtensions = ['doc', 'docx'];\n    const excelExtensions = ['xls', 'xlsx', 'csv'];\n    const powerpointExtensions = ['ppt', 'pptx'];\n\n    if (wordExtensions.includes(extension) || type.includes('word') || type.includes('document')) {\n      return 'word';\n    }\n    if (excelExtensions.includes(extension) || type.includes('excel') || type.includes('sheet')) {\n      return 'excel';\n    }\n    if (powerpointExtensions.includes(extension) || type.includes('powerpoint') || type.includes('presentation')) {\n      return 'powerpoint';\n    }\n\n    // Video files\n    const videoExtensions = ['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm'];\n    if (videoExtensions.includes(extension) || type.includes('video')) {\n      return 'video';\n    }\n\n    // Audio files\n    const audioExtensions = ['mp3', 'wav', 'ogg', 'aac'];\n    if (audioExtensions.includes(extension) || type.includes('audio')) {\n      return 'audio';\n    }\n\n    return 'unknown';\n  };\n\n  const renderFilePreview = () => {\n    if (!currentFile) return null;\n\n    const fileUrl = currentFile.file.url;\n    const fileName = currentFile.file.name;\n    const fileType = currentFile.file.type;\n    const fileCategory = getFileCategory(fileName, fileType);\n\n    switch (fileCategory) {\n      case 'image':\n      case 'text':\n      case 'pdf':\n      case 'word':\n      case 'excel':\n      case 'powerpoint': {\n        // Use Google Docs Viewer for Office files\n        const googleViewerUrl = `https://docs.google.com/gview?url=${encodeURIComponent(fileUrl)}&embedded=true`;\n        return (\n          <iframe\n            src={googleViewerUrl}\n            width=\"100%\"\n            height=\"100%\"\n            title={fileName}\n            style={{ border: 'none' }}\n            onError={(e) => {\n              console.error('Google Docs Viewer failed:', e);\n              // Fallback to download option\n              e.target.style.display = 'none';\n              const fallbackElement = document.getElementById('fallback-preview');\n              if (fallbackElement) fallbackElement.style.display = 'flex';\n            }}\n          />\n        );\n      }\n\n      default:\n        return (\n          <Box\n            id=\"fallback-preview\"\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n              height: '100%',\n              p: 3\n            }}\n          >\n            <DocumentText size=\"64\" color=\"#666\" />\n            <Typography variant=\"h6\" sx={{ mt: 2, mb: 1 }}>\n              Preview Not Available\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3, textAlign: 'center' }}>\n              This file type cannot be previewed in the browser. Please download the file to view it.\n            </Typography>\n            <Button variant=\"contained\" onClick={() => window.open(fileUrl, '_blank')} startIcon={<Eye />} sx={{ mb: 1 }}>\n              Open in New Tab\n            </Button>\n            <Button\n              variant=\"outlined\"\n              onClick={() => {\n                const link = document.createElement('a');\n                link.href = fileUrl;\n                link.download = fileName;\n                link.click();\n              }}\n              startIcon={<DocumentUpload />}\n            >\n              Download File\n            </Button>\n          </Box>\n        );\n    }\n  };\n\n  // Render syllabus items\n  const renderItems = () => {\n    return syllables\n      .filter((item) => item !== undefined)\n      .map((item) => (\n        <Grid item xs={12} sm={6} md={4} key={item.id}>\n          <Card\n            sx={{\n              mb: 2,\n              cursor: 'pointer',\n              border: '1px solid',\n              borderColor: 'divider',\n              '&:hover': {\n                backgroundColor: '#f5f5f5',\n                transform: 'translateY(-4px)',\n                borderColor: 'secondary.light'\n              },\n              borderRadius: 2,\n              transition: 'all 0.2s ease',\n              position: 'relative',\n              minHeight: 120\n            }}\n          >\n            <CardContent sx={{ flexGrow: 1 }}>\n              <Box sx={{ display: 'flex', justifyContent: 'center', my: 2 }}>{getFileIcon(item.file.type)}</Box>\n              <Typography variant=\"h4\" fontWeight={600} gutterBottom sx={{ textAlign: 'center' }}>\n                Course Syllabus\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" fontWeight={600} sx={{ textAlign: 'center' }}>\n                View the complete syllabus for this course to see all learning objectives, topics covered, and assessment criteria.\n              </Typography>\n            </CardContent>\n            <CardActions sx={{ justifyContent: 'space-between', p: 2 }}>\n              <Box>\n                <Tooltip title=\"View\">\n                  <IconButton color=\"secondary\" sx={{ mr: 1 }} onClick={() => handleViewFileSimple(item)}>\n                    <Eye />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n            </CardActions>\n          </Card>\n        </Grid>\n      ));\n  };\n\n  // Render loading state\n  if (isLoading) {\n    return (\n      <Box sx={{ p: 3, display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '300px' }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\n      <Box sx={{ p: 3 }}>\n        {/* Syllabus List */}\n        {syllables.length > 0 ? (\n          <Grid container spacing={3}>\n            <Grid item container spacing={3}>\n              {renderItems()}\n            </Grid>\n            <Grid item xs={12} container justifyContent=\"center\">\n              {canUpdate && (\n                <Button\n                  variant=\"contained\"\n                  onClick={handleOpenModal}\n                  startIcon={<DocumentUpload />}\n                  disabled={isLoading}\n                  sx={{ width: 'auto' }}\n                >\n                  Update Syllabus\n                </Button>\n              )}\n            </Grid>\n          </Grid>\n        ) : (\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              justifyContent: 'center',\n              minHeight: '300px',\n              textAlign: 'center',\n              bgcolor: 'background.paper',\n              borderRadius: 2,\n              p: 4\n            }}\n          >\n            {isLoading ? (\n              <Typography>Processing...</Typography>\n            ) : (\n              <>\n                <Document size=\"64\" color=\"#ddd\" />\n                <Typography variant=\"h6\" color=\"textSecondary\" sx={{ mt: 2 }}>\n                  No Syllabus Uploaded Yet\n                </Typography>\n                {userType === 'admin' && (\n                  <>\n                    <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mt: 1 }}>\n                      Click the Upload Syllabus button to add your first syllabus file\n                    </Typography>\n                    <Box mt={2}>\n                      <Button variant=\"contained\" disabled={isProcessing} onClick={handleOpenModal} startIcon={<DocumentUpload />}>\n                        Upload Syllabus\n                      </Button>\n                    </Box>\n                  </>\n                )}\n              </>\n            )}\n          </Box>\n        )}\n\n        {/* Upload/Edit Syllabus Modal */}\n        <Modal open={openModal} onClose={handleCloseModal}>\n          <Box\n            sx={{\n              position: 'absolute',\n              top: '50%',\n              left: '50%',\n              transform: 'translate(-50%, -50%)',\n              width: 500,\n              bgcolor: 'background.paper',\n              boxShadow: 24,\n              p: 4,\n              borderRadius: 2\n            }}\n          >\n            <Typography variant=\"h5\" gutterBottom>\n              {isEditing ? 'Edit Syllabus' : 'Upload Syllabus'}\n            </Typography>\n\n            {/* File upload area */}\n            <Box\n              sx={{\n                border: '2px dashed #ddd',\n                borderRadius: 2,\n                p: 4,\n                textAlign: 'center',\n                mb: 2,\n                bgcolor: itemData.file ? 'action.hover' : 'background.paper'\n              }}\n              onDragOver={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n              }}\n              onDrop={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n                  handleFileChange({ target: { files: e.dataTransfer.files } });\n                }\n              }}\n            >\n              {itemData.file ? (\n                <Box>\n                  <Box sx={{ display: 'flex', justifyContent: 'center', mb: 1 }}>{getFileIcon(itemData.file.type)}</Box>\n                  <Typography variant=\"body1\">{itemData.file.name}</Typography>\n                  <Typography variant=\"caption\" color=\"text.secondary\">\n                    {formatFileSize(itemData.file.size)}\n                  </Typography>\n                  <Box sx={{ mt: 2 }}>\n                    <Button variant=\"outlined\" color=\"error\" onClick={handleRemoveFile} startIcon={<CloseCircle />}>\n                      Remove File\n                    </Button>\n                  </Box>\n                </Box>\n              ) : (\n                <>\n                  <DocumentUpload size=\"48\" color=\"#666\" />\n                  <Typography variant=\"body1\" sx={{ mt: 1 }}>\n                    Drag & drop syllabus file here or\n                  </Typography>\n                  <input\n                    type=\"file\"\n                    id=\"syllabus-upload\"\n                    onChange={handleFileChange}\n                    style={{ display: 'none' }}\n                    accept=\".pdf,.doc,.docx,.ppt,.pptx,.jpg,.png,.jpeg,.txt,.xls,.xlsx,.mp4,.mp3\"\n                  />\n                  <label htmlFor=\"syllabus-upload\">\n                    <Button variant=\"contained\" component=\"span\" sx={{ mt: 1 }}>\n                      Browse Files\n                    </Button>\n                  </label>\n                </>\n              )}\n            </Box>\n\n            {/* Error message */}\n            {error && (\n              <Typography color=\"error\" sx={{ mb: 2 }}>\n                {error}\n              </Typography>\n            )}\n\n            {/* Modal actions */}\n            <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 2 }}>\n              <Button onClick={handleCloseModal} sx={{ mr: 2 }} disabled={isLoading}>\n                Cancel\n              </Button>\n              <Button variant=\"contained\" onClick={saveSyllabusItem} disabled={!itemData.file || isLoading}>\n                {isLoading ? 'Processing...' : isEditing ? 'Update Syllabus' : 'Upload Syllabus'}\n              </Button>\n            </Box>\n          </Box>\n        </Modal>\n\n        {/* Enhanced File Preview Modal */}\n        <Modal\n          open={previewModal}\n          onClose={() => setPreviewModal(false)}\n          sx={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            backdropFilter: 'blur(4px)'\n          }}\n        >\n          <Box\n            sx={{\n              width: '90vw',\n              height: '90vh',\n              bgcolor: 'background.paper',\n              boxShadow: 24,\n              borderRadius: 2,\n              display: 'flex',\n              flexDirection: 'column',\n              overflow: 'hidden'\n            }}\n          >\n            {/* Modal Header */}\n            <Box\n              sx={{\n                p: 2,\n                borderBottom: 1,\n                borderColor: 'divider',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                bgcolor: 'grey.50'\n              }}\n            >\n              <Typography variant=\"h6\" noWrap sx={{ maxWidth: '70%' }}>\n                {currentFile?.file.name}\n              </Typography>\n              <Box>\n                <Tooltip title=\"Close\">\n                  <IconButton onClick={() => setPreviewModal(false)}>\n                    <CloseCircle />\n                  </IconButton>\n                </Tooltip>\n              </Box>\n            </Box>\n\n            {/* Modal Content - File Preview */}\n            <Box\n              sx={{\n                flexGrow: 1,\n                overflow: 'hidden',\n                position: 'relative'\n              }}\n            >\n              {renderFilePreview()}\n            </Box>\n\n            {/* Modal Footer */}\n            <Box\n              sx={{\n                p: 2,\n                borderTop: 1,\n                borderColor: 'divider',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                bgcolor: 'grey.50'\n              }}\n            >\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                File type: {currentFile?.file.type || 'Unknown'}\n              </Typography>\n              {(userType === 'admin' || userType === 'super_admin') && (\n                <Button\n                  variant=\"contained\"\n                  onClick={() => {\n                    const link = document.createElement('a');\n                    link.href = currentFile?.file.url;\n                    link.download = currentFile?.file.name;\n                    link.click();\n                  }}\n                  startIcon={<DocumentUpload />}\n                >\n                  Download\n                </Button>\n              )}\n            </Box>\n          </Box>\n        </Modal>\n      </Box>\n    </LocalizationProvider>\n  );\n};\n\nexport default SyllablesTab;\n\nSyllablesTab.propTypes = {\n  data: PropTypes.array.isRequired,\n  onAddItem: PropTypes.func.isRequired,\n  onUpdateItem: PropTypes.func.isRequired\n};\n","import { Editor } from 'react-draft-wysiwyg';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport PropTypes from 'prop-types';\n\nconst ReactDraft = ({ editorState, onEditorStateChange }) => {\n  return (\n    <Editor\n      editorState={editorState}\n      toolbarClassName=\"toolbarClassName\"\n      wrapperClassName=\"wrapperClassName\"\n      editorClassName=\"editorClassName\"\n      onEditorStateChange={onEditorStateChange}\n      toolbar={{\n        options: [\n          'inline',\n          'blockType',\n          'fontSize',\n          'fontFamily',\n          'list',\n          'textAlign',\n          'colorPicker',\n          'link',\n          'embedded',\n          'emoji',\n          'image',\n          'remove',\n          'history'\n        ],\n        colorPicker: {\n          colors: [\n            'rgb(97,189,109)', // green\n            'rgb(26,188,156)', // teal\n            'rgb(84,172,210)', // blue\n            'rgb(44,130,201)', // dark blue\n            'rgb(147,101,184)', // purple\n            'rgb(71,85,119)', // dark gray\n            'rgb(204,204,204)', // light gray\n            'rgb(0,0,0)', // black\n            'rgb(255,255,255)', // white\n            'rgb(244,67,54)', // red\n            'rgb(233,30,99)', // pink\n            'rgb(156,39,176)', // purple\n            'rgb(103,58,183)', // deep purple\n            'rgb(63,81,181)', // indigo\n            'rgb(33,150,243)', // blue\n            'rgb(0,188,212)', // cyan\n            'rgb(0,150,136)', // teal\n            'rgb(76,175,80)', // green\n            'rgb(139,195,74)', // light green\n            'rgb(205,220,57)', // lime\n            'rgb(255,235,59)', // yellow\n            'rgb(255,193,7)', // amber\n            'rgb(255,152,0)', // orange\n            'rgb(255,87,34)', // deep orange\n            'rgb(121,85,72)' // brown\n          ]\n        },\n        inline: {\n          options: ['bold', 'italic', 'underline', 'strikethrough', 'monospace'],\n          // Add color to inline styles\n          className: undefined,\n          component: undefined,\n          dropdownClassName: undefined\n        }\n      }}\n    />\n  );\n};\n\nReactDraft.propTypes = {\n  editorState: PropTypes.object.isRequired,\n  onEditorStateChange: PropTypes.func.isRequired\n};\n\nexport default ReactDraft;\n","import {\n  Grid,\n  Box,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  IconButton,\n  FormLabel,\n  Checkbox,\n  Tooltip,\n  Rating,\n  Collapse\n} from '@mui/material';\nimport { DocumentUpload, Edit, Add, Trash } from 'iconsax-react';\nimport { useState, useEffect, useCallback } from 'react';\nimport { EditorState, ContentState } from 'draft-js';\nimport { stateToHTML } from 'draft-js-export-html';\nimport htmlToDraft from 'html-to-draftjs';\nimport 'draft-js/dist/Draft.css';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport { Modal, Stack, TextField } from '@mui/material';\nimport ReactDraft from './CourseReactDraft';\nimport axiosInstance from 'utils/axios';\nimport { APP_PATH_BASE_URL } from 'config';\nimport Swal from 'sweetalert2';\nimport PropTypes from 'prop-types';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { usePermission } from 'hooks/usePermission';\n\n// Validation schema\nconst topicValidationSchema = Yup.object({\n  title: Yup.string()\n    .required('Title is required')\n    .max(100, 'Title must not exceed 100 characters')\n    .test('no-spaces-only', 'Title cannot be only spaces', (value) => {\n      return value && value.trim().length > 0;\n    }),\n  description: Yup.string()\n    .required('Content is required')\n    .test('valid-content', 'Please add meaningful content', (value) => {\n      if (!value) return false;\n\n      // Remove HTML tags and decode HTML entities\n      const textContent = value\n        .replace(/<[^>]*>/g, '') // Remove HTML tags\n        .replace(/&nbsp;/g, ' ') // Convert non-breaking spaces to regular spaces\n        .replace(/&\\w+;/g, ' ') // Remove other HTML entities\n        .trim();\n\n      return textContent.length > 0;\n    })\n});\n\nconst TopicsTab = ({ courseId }) => {\n  const { checkPermission } = usePermission();\n\n  const canCreate = checkPermission('Course', 'create');\n  const canUpdate = checkPermission('Course', 'update');\n  const canDelete = checkPermission('Course', 'delete');\n\n  const [editorState, setEditorState] = useState(EditorState.createEmpty());\n  const [openModal, setOpenModal] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [topics, setTopics] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [expandedTopicId, setExpandedTopicId] = useState(null);\n  const [completedTopics, setCompletedTopics] = useState(null);\n  const auth = JSON.parse(localStorage.getItem('auth'));\n\n  const userType = auth?.loginType;\n  const userId = auth?.id;\n  const regId = auth?.user?.student_id;\n\n  // Formik initialization\n  const formik = useFormik({\n    initialValues: {\n      id: null,\n      title: '',\n      description: ''\n    },\n    validationSchema: topicValidationSchema,\n    onSubmit: async (values, { setSubmitting, resetForm }) => {\n      try {\n        const topicData = {\n          title: values.title,\n          description: values.description,\n          created_by: userId,\n          status: false\n        };\n\n        if (isEditing && values.id) {\n          await axiosInstance.put(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic/${values.id}`, topicData);\n        } else {\n          await axiosInstance.post(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic`, topicData);\n        }\n\n        await fetchTopics();\n        setOpenModal(false);\n        setIsEditing(false);\n        resetForm();\n        setEditorState(EditorState.createEmpty());\n      } catch (error) {\n        console.error('Error saving topic:', error);\n        setError(error.message);\n        Swal.fire({\n          title: 'Error!',\n          text: error.message || 'Error saving topic',\n          icon: 'error',\n          confirmButtonText: 'OK'\n        });\n      } finally {\n        setSubmitting(false);\n      }\n    }\n  });\n\n  const fetchTopics = useCallback(async () => {\n    try {\n      setLoading(true);\n      if (userType === 'student') {\n        const res = await axiosInstance.get(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic/${regId}/status`);\n        if (res.data.success) {\n          if (Array.isArray(res.data.all_topics)) {\n            setTopics(res.data.all_topics);\n            setCompletedTopics(res.data.completed_topics);\n          } else {\n            throw new Error('Invalid response format - expected array of topics');\n          }\n        }\n      } else {\n        const response = await axiosInstance.get(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic`);\n        if (response.data.success) {\n          if (Array.isArray(response.data.data)) {\n            setTopics(response.data.data);\n          } else {\n            throw new Error('Invalid response format - expected array of topics');\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching topics:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  }, [courseId, regId, userType]);\n\n  useEffect(() => {\n    if (courseId) {\n      fetchTopics();\n    }\n  }, [courseId, fetchTopics]);\n\n  const handleDeleteTopic = async (topicId) => {\n    const result = await Swal.fire({\n      title: 'Are you sure?',\n      text: \"You won't be able to revert this!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    });\n\n    if (result.isConfirmed) {\n      try {\n        const topicData = {\n          is_archived: true\n        };\n\n        const response = await axiosInstance.patch(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic/${topicId}`, topicData);\n\n        if (response.data.success === true) {\n          Swal.fire({\n            title: 'Success!',\n            text: 'Topic deleted successfully!',\n            icon: 'success',\n            confirmButtonText: 'OK'\n          });\n          await fetchTopics();\n        } else {\n          Swal.fire({\n            title: 'Error!',\n            text: response?.data?.message || 'Error deleting Topic.',\n            icon: 'error',\n            confirmButtonText: 'OK'\n          });\n        }\n      } catch (error) {\n        setError(error.message);\n        Swal.fire({\n          title: 'Error!',\n          text: error.message || 'Error Topic.',\n          icon: 'error',\n          confirmButtonText: 'OK'\n        });\n      }\n    }\n  };\n\n  const handleCheckBoxChange = async (topicId) => {\n    const firstConfirmation = await Swal.fire({\n      title: 'Have you completed this topic?',\n      text: \"Please confirm by checking this box only if you've fully understood and completed all the material.\",\n      icon: 'question',\n      showCancelButton: true,\n      confirmButtonColor: '#28a745',\n      cancelButtonColor: '#6c757d',\n      confirmButtonText: 'Yes, I have completed it!',\n      cancelButtonText: 'No, not yet',\n      focusConfirm: true\n    });\n\n    if (firstConfirmation.isConfirmed) {\n      const { value: rating } = await Swal.fire({\n        title: 'Rate this topic',\n        input: 'select',\n        inputOptions: {\n          1: '',\n          2: '',\n          3: '',\n          4: '',\n          5: ''\n        },\n        inputLabel: 'How would you rate this topic? (1-5 stars)',\n        inputPlaceholder: 'Select a rating',\n        showCancelButton: true,\n        confirmButtonText: 'Next',\n        cancelButtonText: 'Cancel',\n        inputValidator: (value) => {\n          if (!value) {\n            return 'You need to select a rating!';\n          }\n          return null;\n        }\n      });\n\n      if (rating === undefined) return;\n\n      const { value: notesText } = await Swal.fire({\n        title: 'Please provide your feedback',\n        input: 'textarea',\n        inputLabel: 'Notes/Feedback (required)',\n        inputPlaceholder: 'Enter your notes or feedback about this topic...',\n        inputAttributes: {\n          'aria-label': 'Type your notes here'\n        },\n        showCancelButton: true,\n        confirmButtonText: 'Submit',\n        cancelButtonText: 'Cancel',\n        inputValidator: (value) => {\n          if (!value || value.trim() === '') {\n            return 'You must enter feedback to submit!';\n          }\n          return null;\n        }\n      });\n\n      if (notesText !== undefined) {\n        try {\n          const topicData = {\n            status: true,\n            student: regId,\n            notes: notesText || '',\n            topic: topicId,\n            ratings: parseInt(rating)\n          };\n\n          const response = await axiosInstance.post(`${APP_PATH_BASE_URL}/api/courses/${courseId}/topic/${regId}/status`, topicData);\n\n          if (response.data.success === true) {\n            await Swal.fire({\n              title: 'Success!',\n              text: 'Thank you for your feedback!',\n              icon: 'success',\n              confirmButtonText: 'OK'\n            });\n            await fetchTopics();\n          } else {\n            Swal.fire({\n              title: 'Error!',\n              text: response?.data?.message || 'Error checking Topic.',\n              icon: 'error',\n              confirmButtonText: 'OK'\n            });\n          }\n        } catch (error) {\n          setError(error.message);\n          Swal.fire({\n            title: 'Error!',\n            text: error.message || 'Error updating Topic.',\n            icon: 'error',\n            confirmButtonText: 'OK'\n          });\n        }\n      }\n    }\n  };\n\n  const handleEdit = (topicToEdit) => {\n    try {\n      let newEditorState;\n      let contentState;\n\n      if (topicToEdit.description) {\n        const cleanedHtml = topicToEdit.description\n          .replace(/<figure[^>]*>/g, '<div>')\n          .replace(/<\\/figure>/g, '</div>')\n          .replace(/<img[^>]*>/g, '');\n\n        const contentBlock = htmlToDraft(cleanedHtml);\n\n        if (contentBlock) {\n          contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n          newEditorState = EditorState.createWithContent(contentState);\n        } else {\n          newEditorState = EditorState.createEmpty();\n        }\n      } else {\n        newEditorState = EditorState.createEmpty();\n      }\n\n      setEditorState(newEditorState);\n      formik.setValues({\n        id: topicToEdit.topic_id,\n        title: topicToEdit.title || '',\n        description: topicToEdit.description || ''\n      });\n      setIsEditing(true);\n      setOpenModal(true);\n    } catch (error) {\n      console.error('Error setting editor content:', error);\n      setEditorState(EditorState.createEmpty());\n      formik.setValues({\n        id: topicToEdit.topic_id,\n        title: topicToEdit.title || '',\n        description: ''\n      });\n      setIsEditing(true);\n      setOpenModal(true);\n    }\n  };\n\n  const handleAddNew = () => {\n    setEditorState(EditorState.createEmpty());\n    formik.resetForm();\n    setIsEditing(false);\n    setOpenModal(true);\n  };\n\n  const handleEditorChange = (newEditorState) => {\n    setEditorState(newEditorState);\n    const contentState = newEditorState.getCurrentContent();\n    const htmlContent = stateToHTML(contentState);\n    formik.setFieldValue('description', htmlContent);\n    formik.setFieldTouched('description', true);\n  };\n\n  const toggleTopicExpansion = (topicId) => {\n    setExpandedTopicId(expandedTopicId === topicId ? null : topicId);\n  };\n\n  const renderTopicCard = (topic, index) => {\n    const topicId = topic.topic_id || topic.course;\n    if (!topicId) return null;\n    const isExpanded = expandedTopicId === topic.topic_id;\n\n    const Topic = completedTopics?.find((ct) => ct.topic === topicId);\n    const ratingValue = Topic ? Topic.ratings : null;\n\n    return (\n      <Card\n        key={topic.topic_id}\n        sx={{\n          cursor: 'pointer',\n          display: 'flex',\n          flexDirection: 'column',\n          transition: 'all 0.3s ease',\n          border: '1px solid',\n          borderColor: 'divider',\n          borderRadius: 2,\n          '&:hover': {\n            transform: 'translateY(-4px)',\n            boxShadow: '0 12px 24px rgba(0,0,0,0.15)',\n            borderColor: 'secondary.light'\n          },\n          ml: 2\n        }}\n      >\n        <CardHeader\n          title={\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n              <Typography variant=\"h5\" fontSize={14}>{`Title ${index + 1}: ${topic.title}`}</Typography>\n              {userType === 'student' && (\n                <Checkbox\n                  size=\"small\"\n                  checked={topic.is_completed === true}\n                  onChange={(e) => {\n                    e.stopPropagation();\n                    if (topic.is_completed !== true) {\n                      handleCheckBoxChange(topic.topic_id);\n                    }\n                  }}\n                  onClick={(e) => e.stopPropagation()}\n                />\n              )}\n            </Box>\n          }\n          onClick={() => toggleTopicExpansion(topic.topic_id)}\n          sx={{ cursor: 'pointer' }}\n          action={\n            userType === 'admin' || userType === 'super_admin' ? (\n              <>\n                {canUpdate && (\n                  <Tooltip title=\"Edit\">\n                    <IconButton\n                      aria-label=\"edit\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEdit(topic);\n                      }}\n                    >\n                      <Edit size={20} />\n                    </IconButton>\n                  </Tooltip>\n                )}\n                {canDelete && (\n                  <Tooltip title=\"Delete\">\n                    <IconButton\n                      color=\"error\"\n                      aria-label=\"delete\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteTopic(topic.topic_id);\n                      }}\n                    >\n                      <Trash size={20} />\n                    </IconButton>\n                  </Tooltip>\n                )}\n              </>\n            ) : (\n              userType === 'student' && (\n                <>\n                  <Box sx={{ mt: 1.5 }}>\n                    <Rating name=\"read-only\" value={ratingValue || 0} readOnly />\n                  </Box>\n                </>\n              )\n            )\n          }\n        />\n        <Collapse in={isExpanded} timeout=\"auto\" unmountOnExit>\n          <CardContent>\n            <Box\n              sx={{\n                '& h1, & h2, & h3': { margin: '1em 0' },\n                '& p': { margin: '0 0 1em 0' },\n                '& ul, & ol': { margin: '0 0 1em 1em', paddingLeft: '2em' }\n              }}\n              dangerouslySetInnerHTML={{ __html: topic.description }}\n            />\n          </CardContent>\n        </Collapse>\n      </Card>\n    );\n  };\n\n  if (loading) {\n    return (\n      <Grid container justifyContent=\"center\" alignItems=\"center\" sx={{ minHeight: '50vh' }}>\n        <Grid item>\n          <Typography>Loading topics...</Typography>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  if (error) {\n    return (\n      <Grid container justifyContent=\"center\" alignItems=\"center\">\n        <Grid item>\n          <Typography color=\"error\">Error: {error}</Typography>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  return (\n    <Grid container sx={{ minHeight: '50vh' }}>\n      <Grid item xs={12} padding={3}>\n        {topics.length > 0 ? (\n          <Grid container spacing={3}>\n            {(userType === 'admin' || userType === 'super_admin') && canCreate && (\n              <Grid item xs={12} sx={{ display: 'flex', justifyContent: 'flex-end' }}>\n                <Button variant=\"contained\" onClick={handleAddNew} startIcon={<Add size={20} />} sx={{ mt: 2 }}>\n                  Add New Topic\n                </Button>\n              </Grid>\n            )}\n            {topics.map((topicItem, index) => (\n              <Grid item xs={6} key={topicItem.topic_id}>\n                {renderTopicCard(topicItem, index)}\n              </Grid>\n            ))}\n          </Grid>\n        ) : (\n          <Box\n            sx={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              alignItems: 'center',\n              minHeight: '300px',\n              border: '1px dashed #ddd',\n              borderRadius: 2,\n              p: 4,\n              textAlign: 'center'\n            }}\n          >\n            <Typography variant=\"body1\" color=\"textSecondary\" sx={{ mb: 2 }}>\n              No topics available\n            </Typography>\n            {userType === 'admin' && (\n              <Button variant=\"contained\" onClick={handleAddNew} startIcon={<DocumentUpload size={20} />}>\n                Add First Topic\n              </Button>\n            )}\n          </Box>\n        )}\n      </Grid>\n\n      <Modal open={openModal} onClose={() => setOpenModal(false)}>\n        <Box\n          sx={{\n            position: 'absolute',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: '80%',\n            maxWidth: '800px',\n            bgcolor: 'background.paper',\n            boxShadow: 24,\n            p: 4,\n            borderRadius: 2,\n            maxHeight: '90vh',\n            display: 'flex',\n            flexDirection: 'column'\n          }}\n          component=\"form\"\n          onSubmit={formik.handleSubmit}\n        >\n          <Typography variant=\"h5\" gutterBottom>\n            {isEditing ? 'Edit Topic' : 'Add New Topic'}\n          </Typography>\n\n          <FormLabel>Title</FormLabel>\n          <TextField\n            name=\"title\"\n            value={formik.values.title}\n            onChange={formik.handleChange}\n            onBlur={formik.handleBlur}\n            error={formik.touched.title && Boolean(formik.errors.title)}\n            helperText={formik.touched.title && formik.errors.title}\n            fullWidth\n            sx={{ mb: 3, mt: 1 }}\n            placeholder=\"Enter topic title\"\n          />\n\n          <Box\n            sx={{\n              flexGrow: 1,\n              mb: 3,\n              minHeight: '300px',\n              overflow: 'auto'\n            }}\n          >\n            <ReactDraft\n              editorState={editorState}\n              onEditorStateChange={handleEditorChange}\n              toolbar={{\n                options: ['inline', 'blockType', 'list', 'textAlign', 'link', 'emoji', 'image', 'history'],\n                inline: {\n                  options: ['bold', 'italic', 'underline', 'strikethrough']\n                },\n                blockType: {\n                  options: ['Normal', 'H1', 'H2', 'H3', 'Blockquote']\n                }\n              }}\n              editorStyle={{\n                padding: '10px',\n                border: '1px solid #eee',\n                borderRadius: '4px',\n                borderColor: formik.touched.description && formik.errors.description ? 'error.main' : '#eee'\n              }}\n            />\n            {formik.touched.description && formik.errors.description && (\n              <Typography variant=\"caption\" color=\"error\" sx={{ mt: 1, display: 'block' }}>\n                {formik.errors.description}\n              </Typography>\n            )}\n          </Box>\n\n          <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\">\n            <Button\n              onClick={() => {\n                setOpenModal(false);\n                formik.resetForm();\n              }}\n              sx={{ minWidth: '100px' }}\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" variant=\"contained\" disabled={formik.isSubmitting || !formik.isValid} sx={{ minWidth: '100px' }}>\n              {formik.isSubmitting ? 'Saving...' : isEditing ? 'Update' : 'Save'}\n            </Button>\n          </Stack>\n        </Box>\n      </Modal>\n    </Grid>\n  );\n};\n\nTopicsTab.propTypes = {\n  courseId: PropTypes.number.isRequired\n};\n\nexport default TopicsTab;\n","import {\n  Grid,\n  Button,\n  Box,\n  Typography,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  IconButton,\n  Avatar,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Divider,\n  Paper,\n  Chip,\n  FormLabel,\n  CircularProgress\n} from '@mui/material';\nimport { Send, Edit, Add, CloseCircle, AttachCircle, Trash, CloseSquare } from 'iconsax-react';\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport axiosInstance from 'utils/axios';\nimport { APP_PATH_BASE_URL } from 'config';\nimport PropTypes from 'prop-types';\nimport Swal from 'sweetalert2';\nimport { Capitalise } from 'utils/capitalise';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport 'assets/css/commonStyle.css';\nimport { formatDateTime } from 'utils/dateUtils';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { usePermission } from 'hooks/usePermission';\n\nconst ExercisesTab = ({ courseId }) => {\n  const { checkPermission } = usePermission();\n\n  const canCreate = checkPermission('Exercise', 'create');\n  const canUpdate = checkPermission('Exercise', 'update');\n  const canDelete = checkPermission('Exercise', 'delete');\n\n  const [exercises, setExercises] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [editMode, setEditMode] = useState(false);\n  const [currentComment, setCurrentComment] = useState('');\n  const [currentFile, setCurrentFile] = useState(null);\n  const [selectedExerciseId, setSelectedExerciseId] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [replyTexts, setReplyTexts] = useState({});\n  const [error, setError] = useState({ comment: '', general: '' });\n  const quillRef = useRef(null);\n\n  const auth = JSON.parse(localStorage.getItem('auth'));\n  const userRole = auth?.loginType;\n  const userId = auth?.user?.employee_id || auth?.user?.user_id;\n  const regId = auth?.user?.registration_id;\n\n  // Validation Schema\n  const exerciseValidationSchema = Yup.object({\n    title: Yup.string()\n      .required('Title is required')\n      .test('is-not-empty', 'Title is required', (value) => value && value.replace(/<(.|\\n)*?>/g, '').trim().length > 0),\n    description: Yup.string()\n      .required('Description is required')\n      .test('is-not-empty', 'Description is required', (value) => value && value.replace(/<(.|\\n)*?>/g, '').trim().length > 0)\n  });\n\n  // Formik initialization\n  const formik = useFormik({\n    initialValues: {\n      title: '',\n      description: '',\n      status: 'pending',\n      duedate: null,\n      priority: 'medium'\n    },\n    validationSchema: exerciseValidationSchema,\n    onSubmit: async (values, { setSubmitting, resetForm }) => {\n      try {\n        const description = quillRef.current?.getEditor().root.innerHTML || '';\n\n        if (!values.title || !description) {\n          Swal.fire('Error', 'Title and description are required', 'error');\n          return;\n        }\n\n        const exerciseData = {\n          title: values.title,\n          description: description,\n          course: courseId,\n          assigned_by: userId\n        };\n        let res;\n        if (editMode) {\n          res = await axiosInstance.patch(`${APP_PATH_BASE_URL}api/assignments/${values.id}`, exerciseData);\n        } else {\n          res = await axiosInstance.post(`${APP_PATH_BASE_URL}api/assignments`, exerciseData);\n        }\n        if (res.data.success === false) {\n          await Swal.fire('Error', res.data.message, 'error');\n          return;\n        }\n        await fetchExercises();\n        setOpenModal(false);\n        resetForm();\n        Swal.fire('Success', `Exercise ${editMode ? 'updated' : 'created'} successfully!`, 'success');\n      } catch (error) {\n        console.error('Error saving exercise:', error);\n        Swal.fire('Error', 'Failed to save exercise', 'error');\n      } finally {\n        setSubmitting(false);\n      }\n    }\n  });\n\n  // ReactQuill modules configuration\n  const modules = {\n    toolbar: [\n      [{ header: [1, 2, 3, 4, 5, 6, false] }],\n      [{ font: [] }],\n      [{ size: ['small', false, 'large', 'huge'] }],\n      ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n      [{ color: [] }, { background: [] }],\n      [{ script: 'sub' }, { script: 'super' }],\n      [{ align: [] }],\n      [{ list: 'ordered' }, { list: 'bullet' }, { indent: '-1' }, { indent: '+1' }],\n      ['link', 'image', 'video'],\n      ['code-block'],\n      ['clean']\n    ],\n    clipboard: {\n      matchVisual: false\n    }\n  };\n\n  const formats = [\n    'header',\n    'font',\n    'size',\n    'bold',\n    'italic',\n    'underline',\n    'strike',\n    'blockquote',\n    'color',\n    'background',\n    'script',\n    'align',\n    'list',\n    'bullet',\n    'indent',\n    'link',\n    'image',\n    'video',\n    'code-block'\n  ];\n\n  const fetchExercises = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      const response = await axiosInstance.get(`${APP_PATH_BASE_URL}api/courses/${courseId}/assignments`);\n      const exercisesData = Array.isArray(response.data.data) ? response.data.data : [];\n      setExercises(exercisesData);\n    } catch (err) {\n      console.error('Error fetching exercises:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [courseId]);\n\n  useEffect(() => {\n    fetchExercises();\n  }, [fetchExercises]);\n\n  const selectedExercise = Array.isArray(exercises) ? exercises.find((ex) => ex.id === selectedExerciseId) : null;\n\n  const handleAddExercise = () => {\n    setOpenModal(true);\n    setEditMode(false);\n    formik.resetForm();\n    formik.setValues({\n      title: '',\n      description: '',\n      status: 'pending',\n      duedate: null,\n      priority: 'medium'\n    });\n  };\n\n  const handleEditExercise = (exercise) => {\n    setOpenModal(true);\n    setEditMode(true);\n    formik.setValues({\n      id: exercise.id,\n      title: exercise.title,\n      description: exercise.description,\n      status: exercise.status,\n      duedate: exercise.duedate ? new Date(exercise.duedate) : null,\n      priority: exercise.priority\n    });\n  };\n\n  const handleDeleteExercise = useCallback(\n    async (exerciseId) => {\n      try {\n        const result = await Swal.fire({\n          title: 'Are you sure?',\n          text: \"You won't be able to revert this!\",\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Yes, delete it!'\n        });\n\n        if (result.isConfirmed) {\n          const res = await axiosInstance.patch(`${APP_PATH_BASE_URL}api/assignments/${exerciseId}/archive`);\n          if (res.data.success === true) {\n            await fetchExercises();\n            Swal.fire('Success!', 'Exercise deleted successfully!', 'success');\n          } else {\n            Swal.fire('Error!', res.data.message, 'error');\n          }\n\n          if (selectedExerciseId === exerciseId) {\n            setSelectedExerciseId(exercises.length > 1 ? exercises[0].id : null);\n          }\n        }\n      } catch (error) {\n        console.error('Error deleting exercise:', error);\n        Swal.fire('Error!', 'Failed to delete exercise', 'error');\n      }\n    },\n    [exercises, selectedExerciseId, fetchExercises]\n  );\n\n  const handleCommentChange = (event) => {\n    setError({ comment: '', general: '' });\n    setCurrentComment(event.target.value);\n  };\n\n  const handleAddSubmission = useCallback(async () => {\n    setError({ comment: '', general: '' });\n    if (isSubmitting || !selectedExerciseId || !currentComment?.trim()) {\n      // Return early if no exercise selected or comment is empty or only spaces\n      if (!selectedExerciseId) {\n        setError({ general: 'Please select an exercise first' });\n        return;\n      }\n\n      if (!currentComment?.trim()) {\n        setError({ comment: 'Comment is required' });\n        return;\n      }\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const formData = new FormData();\n      formData.append('assignment', selectedExerciseId);\n      formData.append('registration_id', regId);\n      formData.append('text', currentComment.trim()); // optionally send trimmed comment\n\n      if (currentFile) {\n        formData.append('file', currentFile);\n      }\n\n      await axiosInstance.post(`${APP_PATH_BASE_URL}api/submissions`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${localStorage.getItem('serviceToken')}`\n        }\n      });\n      await fetchExercises();\n      setCurrentComment('');\n      setCurrentFile(null);\n    } catch (error) {\n      console.error('Error adding submission:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [selectedExerciseId, regId, currentComment, currentFile, isSubmitting, fetchExercises]);\n\n  const handleAddReply = useCallback(\n    async (submissionId, replyText) => {\n      if (!selectedExerciseId || !replyText) return;\n\n      try {\n        const replyData = {\n          text: replyText,\n          employee_id: userId\n        };\n\n        await axiosInstance.post(`${APP_PATH_BASE_URL}api/replies/${submissionId}`, replyData);\n        await fetchExercises();\n        setReplyTexts((prev) => ({ ...prev, [submissionId]: '' }));\n      } catch (error) {\n        console.error('Error adding reply:', error);\n      }\n    },\n    [selectedExerciseId, userId, fetchExercises]\n  );\n\n  const handleReplyTextChange = (submissionId, text) => {\n    setReplyTexts((prev) => ({ ...prev, [submissionId]: text }));\n  };\n\n  const handleFileChange = (e) => {\n    setCurrentFile(e.target.files[0]);\n  };\n\n  const handleDescriptionChange = (value) => {\n    formik.setFieldValue('description', value);\n  };\n\n  if (isLoading) {\n    return (\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '100vh',\n          flexDirection: 'column',\n          zIndex: 1,\n          gap: 2\n        }}\n      >\n        <CircularProgress size={60} thickness={4} />\n        <Typography variant=\"h6\">Loading exercises...</Typography>\n      </Box>\n    );\n  }\n\n  const sortedSubmissions =\n    selectedExercise?.submissions?.sort((a, b) => {\n      const dateA = new Date(a.date);\n      const dateB = new Date(b.date);\n      return dateB - dateA;\n    }) || [];\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\n      <Grid container spacing={3} sx={{ p: 3 }}>\n        {/* Exercises List */}\n        <Grid item xs={12} md={4}>\n          <Paper elevation={2} sx={{ p: 2, height: '100%' }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\n              <Typography variant=\"h6\">Exercises</Typography>\n              {(userRole === 'admin' || userRole === 'super_admin') && canCreate && (\n                <Button variant=\"contained\" onClick={handleAddExercise} startIcon={<Add />} size=\"small\">\n                  New\n                </Button>\n              )}\n            </Box>\n\n            <List\n              dense\n              sx={{\n                maxHeight: '500px',\n                overflowY: 'hidden',\n                '&:hover': {\n                  overflowY: 'auto'\n                },\n                '&::-webkit-scrollbar': {\n                  width: '5px'\n                },\n                '&::-webkit-scrollbar-track': {\n                  background: 'transparent'\n                },\n                '&:hover::-webkit-scrollbar-track': {\n                  background: '#f1f1f1'\n                },\n                '&::-webkit-scrollbar-thumb': {\n                  background: 'transparent',\n                  borderRadius: '4px'\n                },\n                '&:hover::-webkit-scrollbar-thumb': {\n                  background: '#888'\n                },\n                '&::-webkit-scrollbar-thumb:hover': {\n                  background: '#555'\n                },\n                pr: 1,\n                transition: 'overflow 0.2s ease'\n              }}\n            >\n              {exercises.map((exercise) => (\n                <Paper\n                  key={exercise.id}\n                  elevation={exercise.id === selectedExerciseId ? 3 : 1}\n                  sx={{\n                    mb: 2,\n                    cursor: 'pointer',\n                    backgroundColor: exercise.id === selectedExerciseId ? '#e3f2fd' : 'inherit',\n                    '&:hover': { backgroundColor: '#f5f5f5' },\n                    borderRadius: 2,\n                    transition: 'all 0.2s ease',\n                    position: 'relative',\n                    minHeight: 120\n                  }}\n                  onClick={() => setSelectedExerciseId(exercise.id)}\n                >\n                  {(userRole === 'admin' || userRole === 'super_admin') && canUpdate && (\n                    <IconButton\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleEditExercise(exercise);\n                      }}\n                      size=\"small\"\n                      sx={{\n                        position: 'absolute',\n                        top: 8,\n                        right: 8,\n                        '&:hover': { color: 'primary.main' },\n                        zIndex: 1\n                      }}\n                    >\n                      <Edit fontSize=\"small\" />\n                    </IconButton>\n                  )}\n\n                  {(userRole === 'admin' || userRole === 'super_admin') && canDelete && (\n                    <IconButton\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteExercise(exercise.id);\n                      }}\n                      size=\"small\"\n                      sx={{\n                        position: 'absolute',\n                        bottom: 8,\n                        right: 8,\n                        '&:hover': { color: 'error.main' },\n                        zIndex: 1\n                      }}\n                    >\n                      <Trash fontSize=\"small\" color=\"red\" />\n                    </IconButton>\n                  )}\n\n                  <ListItem sx={{ py: 1.5, pr: 6 }}>\n                    <ListItemText\n                      primary={\n                        <Box sx={{ display: 'flex', alignItems: 'center', mb: 0.5 }}>\n                          <Typography variant=\"subtitle1\" fontWeight=\"medium\">\n                            {exercise.title}\n                          </Typography>\n                        </Box>\n                      }\n                      secondary={\n                        <>\n                          {exercise.description && (\n                            <Typography\n                              variant=\"body2\"\n                              color=\"text.secondary\"\n                              sx={{\n                                mb: 1.5,\n                                display: '-webkit-box',\n                                WebkitLineClamp: 2,\n                                WebkitBoxOrient: 'vertical',\n                                overflow: 'hidden'\n                              }}\n                            >\n                              <div dangerouslySetInnerHTML={{ __html: exercise.description }} />\n                            </Typography>\n                          )}\n\n                          <Box sx={{ display: 'flex', alignItems: 'center', mt: 1.5 }}>\n                            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mr: 1.5 }}>\n                              <Box component=\"span\" sx={{ fontWeight: 500 }}>\n                                <Chip\n                                  label={`${exercise.submissions?.length} submission`}\n                                  size=\"small\"\n                                  color=\"success\"\n                                  variant=\"contained\"\n                                  sx={{ height: 20, fontSize: '0.7rem' }}\n                                />\n                              </Box>{' '}\n                            </Typography>\n                          </Box>\n                        </>\n                      }\n                    />\n                  </ListItem>\n                </Paper>\n              ))}\n            </List>\n          </Paper>\n        </Grid>\n\n        {/* Exercise Details */}\n        <Grid item xs={12} md={8}>\n          {selectedExercise ? (\n            <Paper elevation={2} sx={{ p: 3, height: '100%' }}>\n              <Box\n                sx={{\n                  display: 'flex',\n                  gap: 3,\n                  maxWidth: '1200px',\n                  margin: '0 auto',\n                  alignItems: 'flex-start'\n                }}\n              >\n                <Box\n                  sx={{\n                    flex: 1,\n                    minWidth: 0,\n                    maxWidth: '100%'\n                  }}\n                >\n                  <Typography variant=\"h5\" gutterBottom>\n                    {selectedExercise.title}\n                  </Typography>\n                  <Box\n                    dangerouslySetInnerHTML={{ __html: selectedExercise.description }}\n                    sx={{\n                      '& p': { marginBottom: '1em' },\n                      '& h1, & h2, & h3': { marginTop: '1em', marginBottom: '0.5em' },\n                      maxHeight: '400px',\n                      overflowY: 'auto',\n                      pr: 2\n                    }}\n                  />\n                </Box>\n              </Box>\n              <Divider sx={{ my: 3 }} />\n              <Typography variant=\"h6\" gutterBottom>\n                Submissions\n              </Typography>\n\n              {selectedExercise.submissions?.length > 0 ? (\n                <List\n                  dense\n                  sx={{\n                    maxHeight: '400px',\n                    overflowY: 'hidden',\n                    '&:hover': {\n                      overflowY: 'auto'\n                    },\n                    '&::-webkit-scrollbar': {\n                      width: '5px'\n                    },\n                    '&::-webkit-scrollbar-track': {\n                      background: 'transparent'\n                    },\n                    '&:hover::-webkit-scrollbar-track': {\n                      background: '#f1f1f1'\n                    },\n                    '&::-webkit-scrollbar-thumb': {\n                      background: 'transparent',\n                      borderRadius: '4px'\n                    },\n                    '&:hover::-webkit-scrollbar-thumb': {\n                      background: '#888'\n                    },\n                    '&::-webkit-scrollbar-thumb:hover': {\n                      background: '#555'\n                    },\n                    pr: 1,\n                    transition: 'overflow 0.2s ease'\n                  }}\n                >\n                  {sortedSubmissions.map((submission) => (\n                    <Box key={submission.id} sx={{ mb: 3 }}>\n                      <ListItem alignItems=\"flex-start\">\n                        <ListItemAvatar>\n                          <Avatar>\n                            {submission.student ? (\n                              submission.student.profile_pic ? (\n                                <img src={`${submission.student.profile_pic}`} alt=\"Profile\" className=\"profile-pic\" />\n                              ) : (\n                                <span style={{ fontSize: '1rem' }}>{submission.student.first_name?.charAt(0) || '?'}</span>\n                              )\n                            ) : (\n                              <span>?</span>\n                            )}\n                          </Avatar>\n                        </ListItemAvatar>\n                        <ListItemText\n                          primary={Capitalise(submission.student?.first_name || 'Unknown')}\n                          secondary={\n                            <>\n                              <Typography variant=\"body2\" color=\"text.primary\">\n                                {submission.text}\n                              </Typography>\n                              {submission.file_url && (\n                                <Box sx={{ mt: 1 }}>\n                                  <Chip\n                                    icon={<AttachCircle fontSize=\"small\" />}\n                                    label={submission.file_url.split('/').pop()}\n                                    variant=\"outlined\"\n                                    sx={{ mr: 1, cursor: 'pointer' }}\n                                    onClick={() => {\n                                      window.open(submission.file_url, '_blank');\n                                      const filename = submission.file_url.split('/').pop();\n                                      const downloadLink = document.createElement('a');\n                                      downloadLink.href = submission.file_url;\n                                      downloadLink.download = filename;\n                                      document.body.appendChild(downloadLink);\n                                      downloadLink.click();\n                                      document.body.removeChild(downloadLink);\n                                    }}\n                                  />\n                                </Box>\n                              )}\n                              <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                                {formatDateTime(submission.date)}\n                              </Typography>\n                            </>\n                          }\n                        />\n                      </ListItem>\n\n                      {/* Replies */}\n                      {submission.replies?.length > 0 && (\n                        <List sx={{ pl: 6 }}>\n                          {submission.replies.map((reply) => (\n                            <ListItem key={reply.id} alignItems=\"flex-start\">\n                              <ListItemAvatar>\n                                <Avatar>\n                                  {reply.trainer ? (\n                                    reply.trainer.profile_pic ? (\n                                      <img src={`${reply.trainer.profile_pic}`} alt=\"Profile\" className=\"profile-pic\" />\n                                    ) : (\n                                      <span style={{ fontSize: '1rem' }}>{reply.trainer.full_name?.charAt(0) || '?'}</span>\n                                    )\n                                  ) : (\n                                    <span>?</span>\n                                  )}\n                                </Avatar>\n                              </ListItemAvatar>\n                              <ListItemText\n                                primary={reply.trainer?.full_name || 'Unknown'}\n                                secondary={\n                                  <>\n                                    <Typography variant=\"body2\" color=\"text.primary\">\n                                      {reply.text}\n                                    </Typography>\n                                    <Typography variant=\"caption\" display=\"block\" sx={{ mt: 1 }}>\n                                      {formatDateTime(reply.date)}\n                                    </Typography>\n                                  </>\n                                }\n                              />\n                            </ListItem>\n                          ))}\n                        </List>\n                      )}\n\n                      {/* Reply input field for tutors below each submission */}\n                      {userRole === 'tutor' && (\n                        <Box sx={{ pl: 6, mt: 2 }}>\n                          <TextField\n                            fullWidth\n                            multiline\n                            rows={2}\n                            variant=\"outlined\"\n                            placeholder=\"Write your feedback...\"\n                            value={replyTexts[submission.id] || ''}\n                            onChange={(e) => handleReplyTextChange(submission.id, e.target.value)}\n                            sx={{ mb: 1 }}\n                          />\n                          <Button\n                            variant=\"contained\"\n                            size=\"small\"\n                            startIcon={<Send />}\n                            onClick={() => handleAddReply(submission.id, replyTexts[submission.id] || '')}\n                            disabled={!replyTexts[submission.id]}\n                          >\n                            Send Feedback\n                          </Button>\n                        </Box>\n                      )}\n                    </Box>\n                  ))}\n                </List>\n              ) : (\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  No submissions yet.\n                </Typography>\n              )}\n\n              {/* Submission input field for students */}\n              {userRole === 'student' && (\n                <Box sx={{ mt: 4 }}>\n                  <TextField\n                    fullWidth\n                    multiline\n                    rows={3}\n                    variant=\"outlined\"\n                    placeholder=\"Write your submission comments...\"\n                    value={currentComment}\n                    error={Boolean(error.comment)}\n                    helperText={error.comment}\n                    onChange={(e) => handleCommentChange(e)}\n                    sx={{ mb: 2 }}\n                  />\n                  <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                    <input id=\"file-upload\" type=\"file\" onChange={handleFileChange} style={{ display: 'none' }} />\n                    <label htmlFor=\"file-upload\">\n                      <Button variant=\"outlined\" component=\"span\" startIcon={<AttachCircle />} size=\"small\">\n                        Attach File\n                      </Button>\n                    </label>\n                    {currentFile && (\n                      <Typography variant=\"body2\" sx={{ ml: 2 }}>\n                        {currentFile.name}\n                        <IconButton onClick={() => setCurrentFile(null)} size=\"small\" sx={{ ml: 1 }}>\n                          <CloseCircle fontSize=\"small\" />\n                        </IconButton>\n                      </Typography>\n                    )}\n                  </Box>\n                  <Button\n                    variant=\"contained\"\n                    startIcon={<Send />}\n                    onClick={handleAddSubmission}\n                    disabled={isSubmitting || (!currentComment?.trim() && !currentFile)}\n                  >\n                    Submit\n                  </Button>\n                </Box>\n              )}\n            </Paper>\n          ) : (\n            <Paper elevation={2} sx={{ p: 3, height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n              <Typography variant=\"body1\" color=\"text.secondary\">\n                {exercises.length === 0 ? 'No exercises available' : 'Select an exercise to view details'}\n              </Typography>\n            </Paper>\n          )}\n        </Grid>\n\n        {/* Exercise Modal - only for admin */}\n        <Dialog open={openModal} onClose={() => setOpenModal(false)} maxWidth=\"md\" fullWidth>\n          <form onSubmit={formik.handleSubmit}>\n            <DialogTitle>\n              {editMode ? 'Edit Exercise' : 'Create New Exercise'}\n              <IconButton onClick={() => setOpenModal(false)} sx={{ position: 'absolute', right: 8, top: 8 }}>\n                <CloseSquare />\n              </IconButton>\n            </DialogTitle>\n\n            <DialogContent dividers>\n              <FormLabel>Title *</FormLabel>\n              <TextField\n                fullWidth\n                placeholder=\"Title\"\n                name=\"title\"\n                value={formik.values.title}\n                onChange={formik.handleChange}\n                onBlur={formik.handleBlur}\n                error={formik.touched.title && Boolean(formik.errors.title)}\n                helperText={formik.touched.title && formik.errors.title}\n                sx={{ mb: 3 }}\n              />\n              <FormLabel>Description *</FormLabel>\n              <Box sx={{ height: 300, mb: 2 }}>\n                <ReactQuill\n                  ref={quillRef}\n                  theme=\"snow\"\n                  value={formik.values.description}\n                  onChange={handleDescriptionChange}\n                  modules={modules}\n                  formats={formats}\n                  style={{ height: '250px' }}\n                />\n                {formik.touched.description && formik.errors.description && (\n                  <Typography variant=\"caption\" color=\"error\" sx={{ mt: 1, display: 'block' }}>\n                    {formik.errors.description}\n                  </Typography>\n                )}\n              </Box>\n            </DialogContent>\n\n            <DialogActions>\n              <Button onClick={() => setOpenModal(false)}>Cancel</Button>\n              <Button type=\"submit\" variant=\"contained\" disabled={formik.isSubmitting || !formik.isValid}>\n                {formik.isSubmitting ? <CircularProgress size={24} /> : editMode ? 'Update' : 'Create'}\n              </Button>\n            </DialogActions>\n          </form>\n        </Dialog>\n      </Grid>\n    </LocalizationProvider>\n  );\n};\n\nExercisesTab.propTypes = {\n  courseId: PropTypes.number.isRequired\n};\n\nexport default ExercisesTab;\n","import React, { useState, useCallback, useEffect } from 'react';\nimport {\n  Box,\n  Paper,\n  Typography,\n  TextField,\n  Button,\n  Radio,\n  RadioGroup,\n  FormControlLabel,\n  Stepper,\n  Step,\n  StepLabel,\n  Alert,\n  Divider,\n  Card,\n  CardContent,\n  Grid,\n  CardActions,\n  CircularProgress,\n  Chip,\n  Accordion,\n  AccordionSummary,\n  AccordionDetails,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  LinearProgress,\n  Tabs,\n  Tab\n} from '@mui/material';\nimport {\n  CheckCircleOutlineTwoTone,\n  ErrorOutline,\n  ArrowBack,\n  CheckCircle,\n  Warning,\n  ArrowBackIos,\n  ArrowForwardIos,\n  AccessTime,\n  ExpandMore,\n  Check,\n  Close,\n  EmojiEvents,\n  Score,\n  Analytics\n} from '@mui/icons-material';\nimport axiosInstance from 'utils/axios';\nimport { APP_PATH_BASE_URL } from 'config';\nimport PropTypes from 'prop-types';\nimport Swal from 'sweetalert2';\nimport { ArrowForward, Send } from 'iconsax-react';\n\nconst StudentAssessmentTab = ({ courseId }) => {\n  const [testCards, setTestCards] = useState([]);\n  const [resultData, setResultData] = useState([]);\n  const [selectedTest, setSelectedTest] = useState(null);\n  const [assessment, setAssessment] = useState(null);\n  const [currentQuestion, setCurrentQuestion] = useState(0);\n  const [answers, setAnswers] = useState({});\n  const [completed, setCompleted] = useState(false);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [startTime, setStartTime] = useState(null);\n  const [viewMode, setViewMode] = useState('testList');\n  const [tabValue, setTabValue] = useState(0);\n  console.log('resultData is', resultData);\n  const auth = JSON.parse(localStorage.getItem('auth'));\n  const RegId = auth?.user?.student_id;\n\n  const fetchTests = useCallback(async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(`${APP_PATH_BASE_URL}api/test/course/${courseId}`);\n      setTestCards(response.data.tests || []);\n      setError(null);\n    } catch (err) {\n      console.error('Error fetching assessment data:', err);\n      setError('Failed to load tests. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  }, [courseId]);\n\n  const fetchResults = useCallback(\n    async (testId) => {\n      try {\n        setLoading(true);\n        const response = await axiosInstance.get(`${APP_PATH_BASE_URL}api/test/${testId}/student/${RegId}/result`);\n        setResultData(response.data.questions || []);\n        setError(null);\n        setViewMode('results');\n      } catch (err) {\n        console.error('Error fetching results:', err);\n        setError('Failed to load results. Please try again later.');\n      } finally {\n        setLoading(false);\n      }\n    },\n    [RegId]\n  );\n\n  const fetchTestDetails = useCallback(async (test) => {\n    try {\n      setLoading(true);\n      const testData = test;\n\n      if (!testData.questions || testData.questions.length === 0) {\n        setError('This test has no questions available.');\n        setAssessment(null);\n        return;\n      }\n\n      const transformedAssessment = {\n        id: testData.test_id,\n        title: testData.test_name,\n        instructions: testData.description,\n        questions: testData.questions.map((q) => ({\n          id: q.question_id,\n          text: q.question,\n          type: q.type,\n          options: q.options || [],\n          marks: q.marks\n        }))\n      };\n\n      setAssessment(transformedAssessment);\n      setStartTime(new Date());\n      setError(null);\n      setViewMode('testTaking');\n    } catch (err) {\n      console.error('Error fetching test details:', err);\n      setError('Failed to load test details. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchTests();\n  }, [fetchTests]);\n\n  const handleTestSelect = (test) => {\n    setSelectedTest(test);\n    setError(null);\n    fetchTestDetails(test);\n  };\n\n  const handleAnswerChange = (questionId, value) => {\n    // console.log('Answer changed for question', questionId, 'to', value);\n    setAnswers((prev) => ({\n      ...prev,\n      [questionId]: value\n    }));\n  };\n\n  const handleNext = () => {\n    if (currentQuestion < assessment.questions.length - 1) {\n      setCurrentQuestion(currentQuestion + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentQuestion > 0) {\n      setCurrentQuestion(currentQuestion - 1);\n    }\n  };\n\n  const isQuestionAnswered = (questionId) => {\n    const answer = answers[questionId];\n\n    // Check if answer is undefined, null, or empty string\n    if (answer === undefined || answer === null || answer === '') {\n      return false;\n    }\n\n    // Check if answer is a string with only whitespace\n    if (typeof answer === 'string' && answer.trim().length === 0) {\n      return false;\n    }\n\n    // For array answers (checkboxes, multi-select)\n    if (Array.isArray(answer) && answer.length === 0) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const allQuestionsAnswered = () => {\n    if (!assessment) return false;\n    return assessment.questions.every((question) => isQuestionAnswered(question.id));\n  };\n\n  const handleSubmit = useCallback(async () => {\n    try {\n      const result = await Swal.fire({\n        title: 'Are you sure?',\n        text: 'You are about to submit the assessment.',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes, submit',\n        cancelButtonText: 'Cancel'\n      });\n\n      if (!result.isConfirmed) {\n        return;\n      }\n\n      const totalTimeTaken = Math.floor((new Date() - startTime) / 1000);\n      const answersData = assessment.questions.map((question) => {\n        const answer = answers[question.id];\n        const result = {\n          student_id: RegId,\n          question_id: question.id,\n          test_id: assessment.id,\n          marks: question.marks,\n          time_taken: totalTimeTaken\n        };\n\n        // Only add written_answer if it's not null and question type is 'written'\n        if (question.type === 'written' && answer !== null) {\n          result.written_answer = answer;\n        }\n\n        // Only add selected_option if it's not null and question type is 'mcq'\n        if (question.type === 'mcq' && answer !== null) {\n          result.selected_option = answer;\n        }\n\n        return result;\n      });\n\n      const response = await axiosInstance.post(`${APP_PATH_BASE_URL}api/answers`, answersData);\n\n      if (response.data.success) {\n        setCompleted(true);\n        setViewMode('testList');\n      } else {\n        setError('Failed to submit answers. Please try again.');\n      }\n    } catch (err) {\n      console.error('Error submitting assessment:', err);\n      setError('An error occurred while submitting your answers. Please try again.');\n    }\n  }, [answers, assessment, RegId, startTime]);\n\n  const handleReturnToTests = () => {\n    setSelectedTest(null);\n    setAssessment(null);\n    setCompleted(false);\n    setCurrentQuestion(0);\n    setAnswers({});\n    setError(null);\n    setViewMode('testList');\n    fetchTests();\n  };\n\n  const handleViewResult = (test) => {\n    setSelectedTest(test);\n    fetchResults(test.test_id);\n  };\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue);\n  };\n\n  // Calculate results statistics\n  const calculateResults = () => {\n    if (!resultData || resultData.length === 0) return null;\n\n    const totalQuestions = resultData.length;\n    const correctAnswers = resultData.filter((q) => q.is_correct).length;\n    const totalMarks = resultData.reduce((sum, q) => sum + (q.marks || 0), 0);\n    const earnedMarks = resultData.reduce((sum, q) => sum + (q.is_correct ? q.marks || 0 : 0), 0);\n    const percentage = (earnedMarks / totalMarks) * 100;\n\n    return {\n      totalQuestions,\n      correctAnswers,\n      totalMarks,\n      earnedMarks,\n      percentage: percentage.toFixed(1)\n    };\n  };\n\n  const results = calculateResults();\n\n  if (viewMode === 'results' && resultData.length > 0) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Button startIcon={<ArrowBack />} onClick={() => setViewMode('testList')} sx={{ mb: 3 }}>\n          Back to Tests\n        </Button>\n\n        <Box sx={{ textAlign: 'center', mb: 4 }}>\n          <Typography variant=\"h3\" gutterBottom>\n            {selectedTest.test_name} - Results\n          </Typography>\n          <Typography variant=\"subtitle1\" color=\"text.secondary\">\n            Your performance summary\n          </Typography>\n        </Box>\n\n        {/* Results Summary Cards */}\n        <Grid container spacing={3} sx={{ mb: 4 }}>\n          <Grid item xs={12} sm={6} md={3}>\n            <Paper sx={{ p: 3, textAlign: 'center' }}>\n              <Score color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                {results.earnedMarks}/{results.totalMarks}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Total Score\n              </Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} sm={6} md={3}>\n            <Paper sx={{ p: 3, textAlign: 'center' }}>\n              <EmojiEvents color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                {results.percentage}%\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Percentage\n              </Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} sm={6} md={3}>\n            <Paper sx={{ p: 3, textAlign: 'center' }}>\n              <CheckCircle color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                {results.correctAnswers}/{results.totalQuestions}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Correct Answers\n              </Typography>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12} sm={6} md={3}>\n            <Paper sx={{ p: 3, textAlign: 'center' }}>\n              <Analytics color=\"primary\" sx={{ fontSize: 40, mb: 1 }} />\n              <Typography variant=\"h4\" gutterBottom>\n                {results.totalQuestions}\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\">\n                Total Questions\n              </Typography>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        {/* Performance Progress */}\n        <Paper sx={{ p: 3, mb: 4 }}>\n          <Typography variant=\"h6\" gutterBottom>\n            Performance Breakdown\n          </Typography>\n          <Box sx={{ mb: 2 }}>\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n              <Typography variant=\"body2\">Overall Score</Typography>\n              <Typography variant=\"body2\">{results.percentage}%</Typography>\n            </Box>\n            <LinearProgress\n              variant=\"determinate\"\n              value={Number(results.percentage)}\n              sx={{ height: 10, borderRadius: 5 }}\n              color={results.percentage >= 80 ? 'success' : results.percentage >= 60 ? 'primary' : 'error'}\n            />\n          </Box>\n        </Paper>\n\n        {/* Tabs for different views */}\n        <Paper sx={{ width: '100%', mb: 2 }}>\n          <Tabs value={tabValue} onChange={handleTabChange} centered>\n            <Tab label=\"Question Review\" />\n            {/* <Tab label=\"Score Summary\" /> */}\n          </Tabs>\n        </Paper>\n\n        {tabValue === 0 && (\n          <Box>\n            <Typography variant=\"h5\" gutterBottom sx={{ mb: 3 }}>\n              Question-by-Question Review\n            </Typography>\n            <Grid container spacing={2}>\n              {resultData.map((question, index) => (\n                <Grid item xs={12} sm={6} md={4} key={question.question_id}>\n                  <Accordion key={question.question_id} sx={{ mb: 2 }}>\n                    <AccordionSummary expandIcon={<ExpandMore />}>\n                      <Box sx={{ display: 'flex', alignItems: 'center', width: '100%' }}>\n                        <Typography sx={{ width: '33%', flexShrink: 0 }}>Question {index + 1}</Typography>\n                        <Chip\n                          icon={question.is_correct ? <Check /> : <Close />}\n                          label={question.is_correct ? 'Correct' : 'Incorrect'}\n                          color={question.is_correct ? 'success' : 'error'}\n                          size=\"small\"\n                          sx={{ mr: 2 }}\n                        />\n                        <Typography sx={{ color: 'text.secondary' }}>\n                          {question.marks} mark{question.marks > 1 ? 's' : ''}\n                        </Typography>\n                      </Box>\n                    </AccordionSummary>\n                    <AccordionDetails>\n                      <Typography variant=\"h6\" gutterBottom>\n                        {question.question}\n                      </Typography>\n\n                      {question.type === 'mcq' ? (\n                        <Box>\n                          <Typography variant=\"body2\" gutterBottom sx={{ mt: 2, fontWeight: 'bold' }}>\n                            Options:\n                          </Typography>\n                          <List>\n                            {question.options.map((option, optIndex) => (\n                              <ListItem key={optIndex}>\n                                <ListItemIcon>\n                                  {option === question.student_answer ? (\n                                    question.is_correct ? (\n                                      <Check color=\"success\" />\n                                    ) : (\n                                      <Close color=\"error\" />\n                                    )\n                                  ) : option === question.correct_answer ? (\n                                    <Check color=\"success\" />\n                                  ) : null}\n                                </ListItemIcon>\n                                <ListItemText\n                                  primary={option}\n                                  sx={{\n                                    backgroundColor:\n                                      option === question.correct_answer\n                                        ? 'success.light'\n                                        : option === question.student_answer && !question.is_correct\n                                        ? 'error.light'\n                                        : 'transparent',\n                                    p: 1,\n                                    borderRadius: 1\n                                  }}\n                                />\n                              </ListItem>\n                            ))}\n                          </List>\n\n                          {question.is_correct === false && question.correct_answer && (\n                            <>\n                              <Typography variant=\"body2\" gutterBottom sx={{ mt: 2, fontWeight: 'bold' }}>\n                                Correct answer:\n                              </Typography>\n                              <Paper variant=\"outlined\" sx={{ p: 2, backgroundColor: 'success.light' }}>\n                                <Typography>{question.correct_answer}</Typography>\n                              </Paper>\n                            </>\n                          )}\n                        </Box>\n                      ) : (\n                        <Box>\n                          <Typography variant=\"body2\" gutterBottom sx={{ mt: 2, fontWeight: 'bold' }}>\n                            Your answer:\n                          </Typography>\n                          <Paper variant=\"outlined\" sx={{ p: 2, backgroundColor: 'grey.50' }}>\n                            <Typography>{question.student_answer || 'No answer provided'}</Typography>\n                          </Paper>\n\n                          {question.is_correct === false && question.correct_answer && (\n                            <>\n                              <Typography variant=\"body2\" gutterBottom sx={{ mt: 2, fontWeight: 'bold' }}>\n                                Correct answer:\n                              </Typography>\n                              <Paper variant=\"outlined\" sx={{ p: 2, backgroundColor: 'success.light' }}>\n                                <Typography>{question.correct_answer}</Typography>\n                              </Paper>\n                            </>\n                          )}\n                        </Box>\n                      )}\n\n                      <Box sx={{ mt: 2, display: 'flex', justifyContent: 'flex-end' }}>\n                        <Chip\n                          label={`Score: ${question.is_correct ? question.marks : 0}/${question.marks}`}\n                          color={question.is_correct ? 'success' : 'error'}\n                          variant=\"outlined\"\n                        />\n                      </Box>\n                    </AccordionDetails>\n                  </Accordion>\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n        )}\n\n        {/* {tabValue === 1 && (\n          <Box>\n            <Typography variant=\"h5\" gutterBottom sx={{ mb: 3 }}>\n              Score Summary\n            </Typography>\n\n            <Grid container spacing={2}>\n              {resultData.map((question, index) => (\n                <Grid item xs={12} sm={6} md={4} key={question.question_id}>\n                  <Card\n                    variant=\"outlined\"\n                    sx={{\n                      height: '100%',\n                      borderColor: question.is_correct ? 'success.main' : 'error.main',\n                      backgroundColor: question.is_correct ? 'success.lighter' : 'error.lighter'\n                    }}\n                  >\n                    <CardContent>\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 1 }}>\n                        <Typography variant=\"h6\">Q{index + 1}</Typography>\n                        <Chip\n                          icon={question.is_correct ? <Check /> : <Close />}\n                          label={question.is_correct ? 'Correct' : 'Incorrect'}\n                          color={question.is_correct ? 'success' : 'error'}\n                          size=\"small\"\n                        />\n                      </Box>\n\n                      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n                        {question.type.toUpperCase()}\n                      </Typography>\n\n                      <Box sx={{ mb: 1 }}>\n                        <Typography variant=\"body2\">\n                          <strong>Your Answer:</strong>{' '}\n                          {question.type === 'mcq'\n                            ? question.student_answer || 'Not answered'\n                            : question.student_answer\n                            ? question.student_answer.length > 20\n                              ? `${question.student_answer.substring(0, 20)}...`\n                              : question.student_answer\n                            : 'Not answered'}\n                        </Typography>\n                      </Box>\n\n                      {!question.is_correct && question.correct_answer && (\n                        <Box sx={{ mb: 1 }}>\n                          <Typography variant=\"body2\">\n                            <strong>Correct Answer:</strong> {question.correct_answer}\n                          </Typography>\n                        </Box>\n                      )}\n\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                        <Typography variant=\"body2\">\n                          <strong>Marks:</strong>\n                        </Typography>\n                        <Chip\n                          label={`${question.is_correct ? question.marks : 0}/${question.marks}`}\n                          color={question.is_correct ? 'success' : 'error'}\n                          size=\"small\"\n                        />\n                      </Box>\n                    </CardContent>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n        )} */}\n      </Box>\n    );\n  }\n\n  if (completed) {\n    return (\n      <Box\n        sx={{\n          p: 4,\n          maxWidth: 900,\n          margin: '0 auto',\n          textAlign: 'center',\n          minHeight: '60vh',\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center'\n        }}\n      >\n        <Box\n          sx={{\n            position: 'relative',\n            mb: 3,\n            animation: 'pulse 1.5s ease-in-out infinite',\n            '@keyframes pulse': {\n              '0%': { transform: 'scale(1)' },\n              '50%': { transform: 'scale(1.05)' },\n              '100%': { transform: 'scale(1)' }\n            }\n          }}\n        >\n          <CheckCircleOutlineTwoTone\n            sx={{\n              fontSize: 100,\n              color: 'success.main',\n              filter: 'drop-shadow(0px 4px 8px rgba(0,0,0,0.1))'\n            }}\n          />\n        </Box>\n\n        <Typography\n          variant=\"h3\"\n          gutterBottom\n          sx={{\n            fontWeight: 700,\n            mb: 2,\n            background: 'linear-gradient(45deg, #2e7d32 30%, #66bb6a 90%)',\n            backgroundClip: 'text',\n            WebkitBackgroundClip: 'text',\n            color: 'transparent'\n          }}\n        >\n          Assessment Submitted Successfully!\n        </Typography>\n\n        <Typography\n          variant=\"h6\"\n          sx={{\n            mb: 4,\n            color: 'text.secondary',\n            maxWidth: '80%',\n            mx: 'auto',\n            lineHeight: 1.6\n          }}\n        >\n          Thank you for completing the assessment. Your answers have been recorded and will be reviewed shortly.\n        </Typography>\n\n        <Paper\n          elevation={2}\n          sx={{\n            p: 3,\n            mb: 4,\n            borderRadius: 2,\n            backgroundColor: 'grey.50',\n            width: '100%',\n            maxWidth: 500\n          }}\n        >\n          <Box sx={{ display: 'flex', justifyContent: 'center', mb: 2 }}>\n            <AccessTime sx={{ mr: 1, color: 'primary.main' }} />\n            <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n              Results will be available within 24-48 hours\n            </Typography>\n          </Box>\n          <Typography variant=\"body2\" sx={{ color: 'text.secondary' }}>\n            You will receive a notification when your results are ready for review.\n          </Typography>\n        </Paper>\n\n        <Box\n          sx={{\n            display: 'flex',\n            gap: 2,\n            flexWrap: 'wrap',\n            justifyContent: 'center'\n          }}\n        >\n          <Button\n            variant=\"contained\"\n            onClick={handleReturnToTests}\n            size=\"large\"\n            sx={{\n              px: 4,\n              py: 1,\n              borderRadius: 2,\n              fontWeight: 600,\n              background: 'linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)'\n            }}\n          >\n            Return to Tests\n          </Button>\n        </Box>\n      </Box>\n    );\n  }\n\n  // Show test selection if no test is selected\n  if (!selectedTest || viewMode === 'testList') {\n    return (\n      <Box sx={{ p: 3 }}>\n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        {loading ? (\n          <Box sx={{ textAlign: 'center', my: 8 }}>\n            <CircularProgress size={60} thickness={4} sx={{ mb: 2 }} />\n            <Typography variant=\"h5\" color=\"primary\" gutterBottom>\n              Loading Assessments\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Preparing your tests...\n            </Typography>\n          </Box>\n        ) : testCards.length === 0 ? (\n          <Box\n            sx={{\n              textAlign: 'center',\n              my: 8,\n              p: 4,\n              backgroundColor: 'grey.50',\n              borderRadius: 2\n            }}\n          >\n            <ErrorOutline sx={{ fontSize: 80, color: 'text.secondary', mb: 2, opacity: 0.7 }} />\n            <Typography variant=\"h5\" gutterBottom color=\"text.secondary\">\n              No Assessments Available\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\" sx={{ maxWidth: 500, mx: 'auto', mb: 2 }}>\n              There are currently no tests available for this course. Please check back later or contact your instructor.\n            </Typography>\n          </Box>\n        ) : (\n          <Box>\n            <Typography\n              variant=\"h4\"\n              gutterBottom\n              sx={{\n                fontWeight: 600,\n                mb: 2,\n                textAlign: 'center'\n              }}\n            >\n              Course Assessments\n            </Typography>\n            <Typography\n              variant=\"subtitle1\"\n              sx={{\n                textAlign: 'center',\n                mb: 5,\n                color: 'text.secondary',\n                maxWidth: 600,\n                mx: 'auto'\n              }}\n            >\n              Select an assessment below to begin testing your knowledge.\n            </Typography>\n\n            <Grid container spacing={4}>\n              {testCards.map((test) => (\n                <Grid item xs={12} md={6} lg={4} key={test.test_id}>\n                  <Card\n                    sx={{\n                      cursor: 'pointer',\n                      height: '100%',\n                      display: 'flex',\n                      flexDirection: 'column',\n                      transition: 'all 0.3s ease',\n                      border: '1px solid',\n                      borderColor: 'divider',\n                      borderRadius: 3,\n                      '&:hover': {\n                        transform: 'translateY(-4px)',\n                        boxShadow: '0 12px 24px rgba(0,0,0,0.15)',\n                        borderColor: 'secondary.light'\n                      }\n                    }}\n                  >\n                    <CardContent sx={{ p: 3, flexGrow: 1 }}>\n                      <Box\n                        sx={{\n                          display: 'flex',\n                          alignItems: 'flex-start',\n                          justifyContent: 'space-between',\n                          flexWrap: 'wrap',\n                          mb: 1\n                        }}\n                      >\n                        <Typography\n                          variant=\"h6\"\n                          sx={{\n                            flex: 1,\n                            fontWeight: 600,\n                            lineHeight: 1.3,\n                            wordBreak: 'break-word', // Ensures text wraps\n                            whiteSpace: 'pre-line' // Preserves newlines\n                          }}\n                        >\n                          {test.test_name}\n                        </Typography>\n                        <Chip\n                          label={test.course_name}\n                          color=\"secondary\"\n                          // variant=\"outlined\"\n                          size=\"small\"\n                          sx={{\n                            ml: 2,\n                            backgroundColor: 'secondary.light',\n                            color: 'secondary.dark',\n                            fontWeight: 600,\n                            alignSelf: 'flex-end', // Fixes chip at flex-end\n                            flexShrink: 0, // Prevents Chip from shrinking/wrapping\n                            whiteSpace: 'nowrap'\n                          }}\n                        />\n                      </Box>\n\n                      <Typography\n                        variant=\"body2\"\n                        color=\"text.secondary\"\n                        sx={{\n                          mb: 3,\n                          lineHeight: 1.6,\n                          display: '-webkit-box',\n                          WebkitLineClamp: 3,\n                          WebkitBoxOrient: 'vertical',\n                          overflow: 'hidden'\n                        }}\n                      >\n                        {test.description || 'Attend all the questions.'}\n                      </Typography>\n\n                      <Box\n                        sx={{\n                          backgroundColor: 'grey.50',\n                          p: 2,\n                          borderRadius: 2,\n                          border: '1px solid',\n                          borderColor: 'divider'\n                        }}\n                      >\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                            Questions:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {test.question_count}\n                          </Typography>\n                        </Box>\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between' }}>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 500 }}>\n                            Total Marks:\n                          </Typography>\n                          <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\n                            {test.total_marks}\n                          </Typography>\n                        </Box>\n                      </Box>\n                    </CardContent>\n\n                    <CardActions sx={{ p: 3, pt: 0 }}>\n                      {test.correction_done ? (\n                        <>\n                          <Box\n                            sx={{\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'space-between',\n                              width: '100%'\n                            }}\n                          >\n                            <Chip variant=\"outlined\" label=\"Submitted\" color=\"success\" size=\"small\" sx={{ fontWeight: 600 }} />\n                            <Button\n                              size=\"small\"\n                              color=\"primary\"\n                              endIcon={<ArrowForward />}\n                              onClick={() => handleViewResult(test)}\n                              sx={{ fontWeight: 600 }}\n                            >\n                              View Results\n                            </Button>\n                          </Box>\n                        </>\n                      ) : test.test_completion ? (\n                        <Chip variant=\"outlined\" label=\"Submitted\" color=\"success\" size=\"small\" sx={{ fontWeight: 600 }} />\n                      ) : (\n                        <Button\n                          size=\"small\"\n                          color=\"primary\"\n                          endIcon={<ArrowForward />}\n                          onClick={() => handleTestSelect(test)}\n                          sx={{ fontWeight: 600 }}\n                        >\n                          Start Assessment\n                        </Button>\n                      )}\n                    </CardActions>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  // Show error if no questions available\n  if (error && !assessment) {\n    return (\n      <Box sx={{ p: 3, maxWidth: 800, margin: '0 auto', textAlign: 'center' }}>\n        <ErrorOutline sx={{ fontSize: 60, color: 'error.main', mb: 2 }} />\n        <Typography variant=\"h5\" gutterBottom>\n          {error}\n        </Typography>\n        <Button variant=\"contained\" onClick={handleReturnToTests} sx={{ mt: 2 }}>\n          Return to Tests\n        </Button>\n      </Box>\n    );\n  }\n\n  // Show loading if assessment data is being fetched\n  if (loading || !assessment) {\n    return (\n      <Box sx={{ p: 3, textAlign: 'center' }}>\n        <Typography variant=\"h6\">Loading assessment...</Typography>\n      </Box>\n    );\n  }\n\n  const question = assessment.questions[currentQuestion];\n  const isAllAnswered = allQuestionsAnswered();\n\n  // console.log('question', question);\n\n  return (\n    <Box sx={{ p: { xs: 2, md: 3 }, maxWidth: 900, margin: '0 auto' }}>\n      {/* Error Alert */}\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2, borderRadius: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      {/* Back Button */}\n      <Button\n        startIcon={<ArrowBack />}\n        onClick={handleReturnToTests}\n        sx={{\n          mb: 3,\n          color: 'text.secondary',\n          '&:hover': {\n            backgroundColor: 'action.hover'\n          }\n        }}\n      >\n        Return to Test List\n      </Button>\n\n      {/* Header */}\n      <Box sx={{ mb: 4, textAlign: 'center' }}>\n        <Typography variant=\"h3\" gutterBottom sx={{ fontWeight: 600 }}>\n          {assessment.title}\n        </Typography>\n        <Typography variant=\"h6\" color=\"text.secondary\" sx={{ fontSize: '1rem' }}>\n          {assessment.instructions}\n        </Typography>\n      </Box>\n\n      <Alert severity=\"info\" sx={{ mb: 3, borderRadius: 2 }}>\n        {question.type === 'mcq'\n          ? 'Choose the single correct option from the choices below.'\n          : 'Provide your written response in the text area below.'}\n      </Alert>\n\n      {/* Progress Stepper */}\n      <Paper variant=\"outlined\" sx={{ p: 2, mb: 2, borderRadius: 3 }}>\n        <Stepper activeStep={currentQuestion} alternativeLabel>\n          {assessment.questions.map((q, index) => {\n            const isAnswered = isQuestionAnswered(q.id);\n            return (\n              <Step key={q.id} completed={isAnswered}>\n                <StepLabel\n                  StepIconProps={{\n                    sx: {\n                      '&.Mui-completed': { color: isAnswered ? 'success.main' : 'grey.400' },\n                      '&.Mui-active': { color: 'primary.main' }\n                    }\n                  }}\n                >\n                  {`Q${index + 1}`}\n                </StepLabel>\n              </Step>\n            );\n          })}\n        </Stepper>\n      </Paper>\n\n      {/* Question */}\n      <Paper elevation={2} sx={{ p: 3, mb: 4, borderRadius: 3, border: '1px solid', borderColor: 'divider' }}>\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\n          <Typography variant=\"h5\" sx={{ color: 'primary.main', fontWeight: 500 }}>\n            Question {currentQuestion + 1} of {assessment.questions.length}\n          </Typography>\n          {question.marks && <Chip label={`${question.marks} mark${question.marks > 1 ? 's' : ''}`} color=\"success\" variant=\"outlined\" />}\n        </Box>\n\n        <Typography variant=\"body1\" sx={{ mb: 2, fontSize: '1.2rem', lineHeight: 1.6 }}>\n          {question.text}\n        </Typography>\n\n        {/* Answer Area */}\n        {question.type === 'mcq' ? (\n          <RadioGroup value={answers[question.id] || ''} onChange={(e) => handleAnswerChange(question.id, e.target.value)}>\n            {question.options.map((option, index) => (\n              <Paper\n                key={index}\n                elevation={0}\n                sx={{\n                  mb: 1.5,\n                  p: 1.5,\n                  borderRadius: 2,\n                  border: '1px solid',\n                  borderColor: answers[question.id] === option ? 'success.main' : 'divider',\n                  backgroundColor: answers[question.id] === option ? 'success.lighter' : 'background.paper',\n                  transition: 'all 0.2s ease',\n                  '&:hover': {\n                    borderColor: 'primary.light',\n                    backgroundColor: 'action.hover'\n                  }\n                }}\n              >\n                <FormControlLabel\n                  value={option} // Directly using the option as value\n                  control={<Radio />}\n                  label={<Typography variant=\"body1\">{option}</Typography>}\n                  sx={{ width: '100%', m: 0 }}\n                />\n              </Paper>\n            ))}\n          </RadioGroup>\n        ) : (\n          <TextField\n            fullWidth\n            multiline\n            rows={8}\n            placeholder=\"Compose your answer here...\"\n            value={answers[question.id] || ''}\n            onChange={(e) => handleAnswerChange(question.id, e.target.value)}\n            variant=\"outlined\"\n            sx={{\n              '& .MuiOutlinedInput-root': {\n                borderRadius: 2,\n                fontSize: '1rem'\n              }\n            }}\n          />\n        )}\n      </Paper>\n\n      {/* Navigation */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 4 }}>\n        <Button\n          variant=\"outlined\"\n          onClick={handlePrevious}\n          disabled={currentQuestion === 0}\n          startIcon={<ArrowBackIos />}\n          color=\"secondary\"\n          sx={{ borderRadius: 2, px: 3 }}\n        >\n          Previous\n        </Button>\n\n        <Box>\n          {currentQuestion < assessment.questions.length - 1 ? (\n            <Button variant=\"contained\" onClick={handleNext} endIcon={<ArrowForwardIos />} sx={{ borderRadius: 2, px: 4, py: 1 }}>\n              Next Question\n            </Button>\n          ) : (\n            <Button\n              variant=\"contained\"\n              color=\"success\"\n              onClick={handleSubmit}\n              disabled={!isAllAnswered}\n              endIcon={<Send />}\n              sx={{ borderRadius: 2, px: 4, py: 1 }}\n            >\n              Submit Assessment\n            </Button>\n          )}\n        </Box>\n      </Box>\n\n      <Divider sx={{ my: 3 }} />\n\n      <Alert\n        severity={isAllAnswered ? 'success' : 'warning'}\n        sx={{ mb: 3, borderRadius: 2 }}\n        icon={isAllAnswered ? <CheckCircle /> : <Warning />}\n      >\n        {isAllAnswered\n          ? 'All questions have been completed! You may now submit your assessment.'\n          : `Complete all questions before submitting. Currently answered: ${Object.keys(answers).length}/${assessment.questions.length}`}\n      </Alert>\n\n      <Typography variant=\"body2\" color=\"text.secondary\" sx={{ fontStyle: 'italic', textAlign: 'center' }}>\n        Note: All responses will be submitted together when you click Submit Assessment. You can review and modify answers anytime before\n        final submission.\n      </Typography>\n    </Box>\n  );\n};\n\nexport default StudentAssessmentTab;\n\nStudentAssessmentTab.propTypes = {\n  courseId: PropTypes.number\n};\n","import React from 'react';\nimport MainCard from 'components/MainCard';\nimport { Grid, Box, Tabs, Tab, Typography, Stack, IconButton } from '@mui/material';\nimport PropTypes from 'prop-types';\nimport 'assets/css/commonStyle.css';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { Note, Document, Book1 } from 'iconsax-react';\nimport { LocalizationProvider } from '@mui/x-date-pickers';\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\nimport { ArrowBack, QuestionAnswerOutlined } from '@mui/icons-material';\nimport SyllablesTab from './SyllablesTab';\nimport TopicsTab from './TopicsTab';\nimport ExercisesTab from './ExercisesTab';\n// import SchedulesTab from './SchedulesTab';\nimport StudentAssessmentTab from './StudentAssessmentTab';\nimport axiosInstance from 'utils/axios';\nimport { APP_PATH_BASE_URL } from 'config';\nimport { Capitalise } from 'utils/capitalise';\nimport { usePermission } from 'hooks/usePermission';\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div role=\"tabpanel\" hidden={value !== index} id={`simple-tabpanel-${index}`} aria-labelledby={`simple-tab-${index}`} {...other}>\n      {value === index && <Box sx={{ pt: 2 }}>{children}</Box>}\n    </div>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.number,\n  index: PropTypes.number\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`\n  };\n}\n\nconst CourseDetail = () => {\n  const { checkPermission } = usePermission();\n\n  const canRead = checkPermission('Exercise', 'read');\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { title, courseData, notification } = location.state || {};\n  // Get user type from auth\n  const auth = JSON.parse(localStorage.getItem('auth') || '{}');\n  const userType = auth?.loginType || 'student';\n\n  // Define all possible tabs\n  const ALL_TABS = useMemo(\n    () => [\n      { id: 'syllabus', label: 'Syllabus', icon: <Note /> },\n      { id: 'topics', label: 'Topics', icon: <Book1 /> },\n      { id: 'exercise', label: 'Exercise', icon: <Document /> },\n      // { id: 'classSchedule', label: 'Schedule', icon: <Calendar2 /> },\n      { id: 'assessments', label: 'Assessments', icon: <QuestionAnswerOutlined /> }\n    ],\n    []\n  );\n\n  // Filter tabs based on user type\n  const visibleTabs = useMemo(\n    () =>\n      ALL_TABS.filter((tab) => {\n        if (userType === 'student') {\n          return ['syllabus', 'topics', 'exercise', 'assessments'].includes(tab.id);\n        } else {\n          // For non-students, check permission only for 'exercise' tab and only for admin\n          if (tab.id === 'exercise') {\n            // Only check canRead permission for admin, tutor can always see exercise tab\n            return userType === 'admin' ? canRead : true;\n          } else {\n            return ['syllabus', 'topics', 'classSchedule'].includes(tab.id);\n          }\n        }\n      }),\n    [ALL_TABS, userType, canRead]\n  );\n\n  // Create mapping from tab ID to index\n  const tabIdToIndexMap = useMemo(() => {\n    const map = {};\n    visibleTabs.forEach((tab, index) => {\n      map[tab.id] = index;\n    });\n    return map;\n  }, [visibleTabs]);\n\n  // Map notification to tab inde\n  const getTabIndexFromNotification = useCallback(\n    (notification) => {\n      if (!notification) return 0;\n\n      const notificationMap = {\n        syllabus: 'syllabus',\n        topic: 'topics',\n        topics: 'topics',\n        exercise: 'exercise',\n        assessment: 'assessments',\n        assessments: 'assessments',\n        schedule: 'classSchedule',\n        classSchedule: 'classSchedule'\n      };\n\n      const normalizedNotification = notification.toLowerCase();\n      const tabId = notificationMap[normalizedNotification];\n\n      return tabIdToIndexMap[tabId] || 0;\n    },\n    [tabIdToIndexMap]\n  );\n\n  const [value, setValue] = useState(0);\n  const [syllabusData, setSyllabusData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Set initial tab based on notification\n  useEffect(() => {\n    const initialTabIndex = getTabIndexFromNotification(notification);\n    setValue(initialTabIndex);\n  }, [notification, getTabIndexFromNotification]);\n\n  // Transform syllabus data from API response\n  const transformSyllabusData = (data) => {\n    if (!data || !data.syllabus_info) return [];\n\n    return data.syllabus_info.map((item) => ({\n      ...item,\n      file: {\n        name: item.file?.name || 'Untitled',\n        type: item.file?.type || '',\n        size: item.file?.size || 0,\n        url: item.file?.url || ''\n      }\n    }));\n  };\n\n  // Fetch course details\n  const fetchCourseDetails = useCallback(async () => {\n    if (!courseData?.course_id) return;\n\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axiosInstance.get(`${APP_PATH_BASE_URL}api/courses/${courseData.course_id}`);\n      const data = response.data;\n      if (data) {\n        setSyllabusData(transformSyllabusData(data));\n      } else {\n        throw new Error(data.message || 'Failed to fetch course details');\n      }\n    } catch (err) {\n      console.error('Error fetching course details:', err);\n      setError(err.message || 'An error occurred while fetching course details');\n    } finally {\n      setLoading(false);\n    }\n  }, [courseData?.course_id]);\n\n  useEffect(() => {\n    // if (courseData?.syllabus_info) {\n    //   setSyllabusData(transformSyllabusData(courseData));\n    // } else {\n    fetchCourseDetails();\n    // }\n  }, [fetchCourseDetails]);\n\n  const handleAddItem = async (itemData) => {\n    try {\n      const formData = new FormData();\n\n      // Append all relevant data to formData\n      Object.keys(itemData).forEach((key) => {\n        if (key === 'file' && itemData[key]) {\n          formData.append('syllabus', itemData.file);\n        } else if (itemData[key]) {\n          formData.append(key, itemData[key]);\n        }\n      });\n\n      const response = await axiosInstance.patch(`${APP_PATH_BASE_URL}api/courses/${courseData.course_id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      if (response.data.success) {\n        // Refresh the syllabus data\n        await fetchCourseDetails();\n        return response.data.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to add syllabus item');\n      }\n    } catch (error) {\n      console.error('Error adding syllabus item:', error);\n      throw error;\n    }\n  };\n\n  const handleUpdateItem = async (id, itemData) => {\n    try {\n      const formData = new FormData();\n\n      // Append all relevant data to formData\n      Object.keys(itemData).forEach((key) => {\n        if (key === 'file' && itemData[key]) {\n          formData.append('syllabus', itemData.file);\n        } else if (itemData[key]) {\n          formData.append(key, itemData[key]);\n        }\n      });\n\n      const response = await axiosInstance.patch(`${APP_PATH_BASE_URL}api/courses/${courseData.course_id}/syllabus/${id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n\n      if (response.data.success) {\n        // Refresh the syllabus data\n        await fetchCourseDetails();\n        return response.data.data;\n      } else {\n        throw new Error(response.data.message || 'Failed to update syllabus item');\n      }\n    } catch (error) {\n      console.error('Error updating syllabus item:', error);\n      throw error;\n    }\n  };\n\n  const handleDeleteItem = async (id) => {\n    try {\n      const response = await axiosInstance.delete(`${APP_PATH_BASE_URL}api/courses/${courseData.course_id}/syllabus/${id}`);\n\n      if (response.data.success) {\n        // Refresh the syllabus data\n        await fetchCourseDetails();\n      } else {\n        throw new Error(response.data.message || 'Failed to delete syllabus item');\n      }\n    } catch (error) {\n      console.error('Error deleting syllabus item:', error);\n      throw error;\n    }\n  };\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  return (\n    <LocalizationProvider dateAdapter={AdapterDateFns}>\n      <Grid container spacing={3} sx={{ position: 'absolute', top: 18, left: '50%', zIndex: 1, width: '50%' }}>\n        <Grid item xs={12} sx={{ justifyItems: 'flex-end' }}>\n          <Stack sx={{ mb: { xs: -0.5, sm: 0.5 } }} spacing={1}>\n            <IconButton variant=\"contained\" color=\"secondary\" size=\"medium\" onClick={() => navigate(-1)} sx={{ width: 100, gap: 1 }}>\n              <ArrowBack />\n              Back\n            </IconButton>\n          </Stack>\n        </Grid>\n      </Grid>\n      <MainCard>\n        <Grid container spacing={4}>\n          <Grid item xs={12}>\n            <Stack spacing={1}>\n              <Typography variant=\"h4\">Course Name : {Capitalise(title)}</Typography>\n              {error && (\n                <Typography color=\"error\" variant=\"body2\">\n                  {error}\n                </Typography>\n              )}\n            </Stack>\n          </Grid>\n          <Grid item xs={12}>\n            <Box sx={{ width: '100%' }}>\n              <Box sx={{ borderBottom: 1, borderColor: 'divider', py: 2, px: 4, bgcolor: 'background.paper' }}>\n                <Tabs value={value} onChange={handleChange} variant=\"scrollable\" scrollButtons=\"auto\" aria-label=\"course detail tabs\">\n                  {visibleTabs.map((tab, index) => (\n                    <Tab key={tab.id} className=\"tabs\" label={tab.label} icon={tab.icon} iconPosition=\"start\" {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </Box>\n\n              {/* Syllabus Tab */}\n              <TabPanel value={value} index={tabIdToIndexMap['syllabus']}>\n                {loading ? (\n                  <Typography>Loading syllabus...</Typography>\n                ) : (\n                  <SyllablesTab\n                    data={syllabusData}\n                    onAddItem={handleAddItem}\n                    onUpdateItem={handleUpdateItem}\n                    onDeleteItem={handleDeleteItem}\n                  />\n                )}\n              </TabPanel>\n\n              {/* Topics Tab */}\n              <TabPanel value={value} index={tabIdToIndexMap['topics']}>\n                <TopicsTab courseId={courseData?.course_id} />\n              </TabPanel>\n\n              {/* Exercise Tab */}\n              <TabPanel value={value} index={tabIdToIndexMap['exercise']}>\n                <ExercisesTab courseId={courseData?.course_id} />\n              </TabPanel>\n\n              {/* Schedule Tab (for tutors) */}\n              {/* {tabIdToIndexMap['classSchedule'] !== undefined && (\n              <TabPanel value={value} index={tabIdToIndexMap['classSchedule']}>\n                <SchedulesTab courseId={courseData} />\n              </TabPanel>\n            )} */}\n\n              {/* Assessments Tab (for students) */}\n              {tabIdToIndexMap['assessments'] !== undefined && (\n                <TabPanel value={value} index={tabIdToIndexMap['assessments']}>\n                  <StudentAssessmentTab courseId={courseData?.course_id} />\n                </TabPanel>\n              )}\n            </Box>\n          </Grid>\n        </Grid>\n      </MainCard>\n    </LocalizationProvider>\n  );\n};\n\nexport default CourseDetail;\n","/**\n * Formats a date into a readable date & time string.\n * @param {Date|string} date - The date to format. If not provided, returns empty string or current date based on options.\n * @param {Object} [options] - Optional formatting options.\n * @param {boolean} [options.includeTime=true] - Whether to include time in the output.\n * @param {boolean} [options.includeSeconds=false] - Whether to include seconds in the time.\n * @param {boolean} [options.timeOnly=false] - Whether to output only time.\n * @param {boolean} [options.useCurrentIfEmpty=false] - Whether to use current date/time if no date is provided.\n * @param {string} [options.fallback=''] - Fallback value to return if date is invalid/empty.\n * @returns {string} Formatted date-time string or fallback value.\n */\n\nimport format from '../config';\n\nexport const formatDateTime = (\n  date,\n  { includeTime = true, includeSeconds = false, timeOnly = false, useCurrentIfEmpty = false, fallback = '' } = {}\n) => {\n  let dateObj;\n\n  // Handle undefined/null/empty date\n  if (!date) {\n    if (useCurrentIfEmpty) {\n      dateObj = new Date();\n    } else {\n      return fallback;\n    }\n  }\n  // Handle string time formats like \"10:39:20\"\n  else if (typeof date === 'string' && /^\\d{1,2}:\\d{2}(:\\d{2})?$/.test(date)) {\n    const [hours, minutes, seconds] = date.split(':').map(Number);\n    dateObj = new Date();\n    dateObj.setHours(hours, minutes, seconds || 0, 0);\n  }\n  // Handle Date objects\n  else if (date instanceof Date) {\n    dateObj = date;\n  }\n  // Handle other date strings or timestamps\n  else {\n    dateObj = new Date(date);\n  }\n\n  // Check if the date is invalid\n  if (isNaN(dateObj.getTime())) {\n    return fallback;\n  }\n\n  // Parse format patterns from config\n  const formatPattern = (pattern, date) => {\n    const hours = date.getHours();\n    const isPM = hours >= 12;\n\n    const replacements = {\n      yyyy: date.getFullYear(),\n      yy: String(date.getFullYear()).slice(-2),\n      MM: String(date.getMonth() + 1).padStart(2, '0'),\n      M: date.getMonth() + 1,\n      dd: String(date.getDate()).padStart(2, '0'),\n      d: date.getDate(),\n      HH: String(hours).padStart(2, '0'), // 24-hour, leading zero\n      H: hours, // 24-hour, no leading zero\n      hh: String(hours % 12 || 12).padStart(2, '0'), // 12-hour, leading zero\n      h: hours % 12 || 12, // 12-hour, no leading zero\n      mm: String(date.getMinutes()).padStart(2, '0'),\n      m: date.getMinutes(),\n      ss: String(date.getSeconds()).padStart(2, '0'),\n      s: date.getSeconds(),\n      a: isPM ? 'PM' : 'AM'\n    };\n\n    return pattern.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g, (match) => replacements[match] || match);\n  };\n\n  // Time only output\n  if (timeOnly) {\n    let timePattern = format.timeFormat;\n    if (!includeSeconds) {\n      timePattern = timePattern.replace(/:ss?/g, '');\n      timePattern = timePattern.replace(/(^|\\s)ss?(\\s|$)/g, '$1$2');\n      timePattern = timePattern.replace(/::/g, ':').replace(/(\\s|^):|:(\\s|$)/g, '$1$2');\n    }\n    return formatPattern(timePattern, dateObj);\n  }\n\n  if (includeTime) {\n    const dateStr = formatPattern(format.dateFormat, dateObj);\n\n    let timePattern = format.timeFormat;\n    if (!includeSeconds) {\n      timePattern = timePattern.replace(/[:\\\\/]?ss?/g, '');\n      timePattern = timePattern.replace(/::/g, ':').replace(/:$/, '');\n    }\n\n    const timeStr = formatPattern(timePattern, dateObj);\n    return `${dateStr} ${timeStr}`;\n  } else {\n    return formatPattern(format.dateFormat, dateObj);\n  }\n};\n"],"names":["usePermission","checkPermission","useCallback","module","action","_data$user","data","JSON","parse","localStorage","getItem","userType","loginType","permissions","user","some","permission","module_name","allowed_actions","includes","error","console","_ref","onAddItem","onUpdateItem","canUpdate","_useState","useState","_useState2","_slicedToArray","syllables","setSyllables","_useState3","_useState4","openModal","setOpenModal","_useState5","_useState6","isEditing","setIsEditing","_useState7","_useState8","currentItemId","setCurrentItemId","_useState9","_useState10","isLoading","setIsLoading","_useState11","_useState12","isProcessing","setIsProcessing","_useState13","_useState14","setError","_useState15","date","Date","file","_useState16","itemData","setItemData","auth","useEffect","dispatch","openSnackbar","open","message","variant","alert","color","close","filter","item","undefined","saveSyllabusItem","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","updatedItem","newItem","wrap","_context","prev","next","sent","map","id","concat","_toConsumableArray","handleCloseModal","t0","finish","stop","apply","arguments","handleOpenModal","handleFileChange","e","target","files","length","_objectSpread","getFileIcon","fileType","_jsx","Gallery","size","DocumentText","Document","_useState17","_useState18","previewModal","setPreviewModal","_useState19","_useState20","currentFile","setCurrentFile","handleViewFileSimple","Box","sx","p","display","justifyContent","alignItems","minHeight","children","CircularProgress","LocalizationProvider","dateAdapter","AdapterDateFns","_jsxs","Grid","container","spacing","xs","sm","md","Card","mb","cursor","border","borderColor","backgroundColor","transform","borderRadius","transition","position","CardContent","flexGrow","my","type","Typography","fontWeight","gutterBottom","textAlign","CardActions","Tooltip","title","IconButton","mr","onClick","Eye","Button","startIcon","DocumentUpload","disabled","width","flexDirection","bgcolor","_Fragment","mt","Modal","onClose","top","left","boxShadow","onDragOver","preventDefault","stopPropagation","onDrop","dataTransfer","name","bytes","i","Math","floor","log","parseFloat","pow","toFixed","formatFileSize","CloseCircle","onChange","style","accept","htmlFor","component","backdropFilter","height","overflow","borderBottom","noWrap","maxWidth","fileUrl","url","fileName","fileCategory","_fileName$split$pop","extension","split","pop","toLowerCase","getFileCategory","googleViewerUrl","encodeURIComponent","src","onError","fallbackElement","document","getElementById","window","link","createElement","href","download","click","renderFilePreview","borderTop","editorState","onEditorStateChange","Editor","toolbarClassName","wrapperClassName","editorClassName","toolbar","options","colorPicker","colors","inline","className","dropdownClassName","topicValidationSchema","Yup","required","max","test","value","trim","description","replace","_auth$user","courseId","canCreate","canDelete","EditorState","createEmpty","setEditorState","topics","setTopics","loading","setLoading","expandedTopicId","setExpandedTopicId","completedTopics","setCompletedTopics","userId","regId","student_id","formik","useFormik","initialValues","validationSchema","onSubmit","_onSubmit","values","setSubmitting","resetForm","topicData","created_by","status","axiosInstance","put","APP_PATH_BASE_URL","post","fetchTopics","Swal","text","icon","confirmButtonText","_x","_x2","_callee2","res","response","_context2","get","success","Array","isArray","all_topics","completed_topics","Error","handleDeleteTopic","_ref4","_callee3","topicId","_response$data","_context3","showCancelButton","confirmButtonColor","cancelButtonColor","isConfirmed","is_archived","patch","_x3","handleCheckBoxChange","_ref5","_callee4","_yield$Swal$fire","rating","_yield$Swal$fire2","notesText","_response$data2","_context4","cancelButtonText","focusConfirm","input","inputOptions","inputLabel","inputPlaceholder","inputValidator","abrupt","inputAttributes","student","notes","topic","ratings","parseInt","_x4","handleAddNew","renderTopicCard","index","topic_id","course","isExpanded","Topic","find","ct","ratingValue","ml","CardHeader","gap","fontSize","Checkbox","checked","is_completed","toggleTopicExpansion","topicToEdit","newEditorState","contentState","cleanedHtml","contentBlock","htmlToDraft","ContentState","createFromBlockArray","contentBlocks","createWithContent","setValues","handleEdit","Edit","Trash","Rating","readOnly","Collapse","in","timeout","unmountOnExit","margin","paddingLeft","dangerouslySetInnerHTML","__html","padding","Add","topicItem","maxHeight","handleSubmit","FormLabel","TextField","handleChange","onBlur","handleBlur","touched","Boolean","errors","helperText","fullWidth","placeholder","ReactDraft","getCurrentContent","htmlContent","stateToHTML","setFieldValue","setFieldTouched","blockType","editorStyle","Stack","direction","minWidth","isSubmitting","isValid","_auth$user2","_auth$user3","_selectedExercise$sub","_selectedExercise$sub2","exercises","setExercises","editMode","setEditMode","currentComment","setCurrentComment","selectedExerciseId","setSelectedExerciseId","setIsSubmitting","replyTexts","setReplyTexts","comment","general","quillRef","useRef","userRole","employee_id","user_id","registration_id","exerciseValidationSchema","duedate","priority","_quillRef$current","exerciseData","current","getEditor","root","innerHTML","assigned_by","fetchExercises","exercisesData","selectedExercise","ex","handleDeleteExercise","exerciseId","handleAddSubmission","formData","FormData","append","headers","Authorization","handleAddReply","_ref6","_callee5","submissionId","replyText","replyData","_context5","_defineProperty","_x5","zIndex","thickness","sortedSubmissions","submissions","sort","a","b","dateA","Paper","elevation","List","dense","overflowY","background","pr","exercise","_exercise$submissions","handleEditExercise","right","bottom","ListItem","py","ListItemText","primary","secondary","WebkitLineClamp","WebkitBoxOrient","Chip","label","flex","marginBottom","marginTop","Divider","submission","_submission$student$f","_submission$student","_submission$replies","ListItemAvatar","Avatar","profile_pic","alt","first_name","charAt","Capitalise","file_url","AttachCircle","filename","downloadLink","body","appendChild","removeChild","formatDateTime","replies","pl","reply","_reply$trainer$full_n","_reply$trainer","trainer","full_name","multiline","rows","Send","event","Dialog","DialogTitle","CloseSquare","DialogContent","dividers","ReactQuill","ref","theme","modules","header","font","script","align","list","indent","clipboard","matchVisual","formats","DialogActions","testCards","setTestCards","resultData","setResultData","selectedTest","setSelectedTest","assessment","setAssessment","currentQuestion","setCurrentQuestion","answers","setAnswers","completed","setCompleted","startTime","setStartTime","_useState21","_useState22","viewMode","setViewMode","_useState23","_useState24","tabValue","setTabValue","RegId","fetchTests","tests","fetchResults","_ref3","testId","questions","fetchTestDetails","testData","transformedAssessment","test_id","test_name","instructions","q","question_id","question","marks","handleAnswerChange","questionId","isQuestionAnswered","answer","totalTimeTaken","answersData","result","time_taken","written_answer","selected_option","handleReturnToTests","results","totalQuestions","correctAnswers","is_correct","totalMarks","reduce","sum","earnedMarks","percentage","calculateResults","ArrowBack","Score","EmojiEvents","CheckCircle","Analytics","LinearProgress","Number","Tabs","newValue","centered","Tab","Accordion","AccordionSummary","expandIcon","ExpandMore","flexShrink","Check","Close","AccordionDetails","option","optIndex","ListItemIcon","student_answer","correct_answer","animation","CheckCircleOutlineTwoTone","backgroundClip","WebkitBackgroundClip","mx","lineHeight","AccessTime","flexWrap","px","Alert","severity","ErrorOutline","opacity","lg","wordBreak","whiteSpace","course_name","alignSelf","question_count","total_marks","pt","correction_done","endIcon","ArrowForward","handleViewResult","test_completion","handleTestSelect","isAllAnswered","every","Stepper","activeStep","alternativeLabel","isAnswered","Step","StepLabel","StepIconProps","RadioGroup","FormControlLabel","control","Radio","m","ArrowBackIos","ArrowForwardIos","Warning","Object","keys","fontStyle","TabPanel","props","other","_objectWithoutProperties","_excluded","role","hidden","canRead","navigate","useNavigate","useLocation","state","courseData","notification","ALL_TABS","useMemo","Note","Book1","QuestionAnswerOutlined","visibleTabs","tab","tabIdToIndexMap","forEach","getTabIndexFromNotification","normalizedNotification","syllabus","assessments","schedule","classSchedule","setValue","syllabusData","setSyllabusData","initialTabIndex","transformSyllabusData","syllabus_info","_item$file","_item$file2","_item$file3","_item$file4","fetchCourseDetails","course_id","handleAddItem","key","handleUpdateItem","handleDeleteItem","delete","justifyItems","MainCard","scrollButtons","iconPosition","a11yProps","SyllablesTab","onDeleteItem","TopicsTab","ExercisesTab","StudentAssessmentTab","dateObj","_ref$includeTime","includeTime","_ref$includeSeconds","includeSeconds","_ref$timeOnly","timeOnly","_ref$useCurrentIfEmpt","useCurrentIfEmpty","_ref$fallback","fallback","_date$split$map","_date$split$map2","hours","minutes","seconds","setHours","isNaN","getTime","formatPattern","pattern","getHours","isPM","replacements","yyyy","getFullYear","yy","String","slice","MM","getMonth","padStart","M","dd","getDate","d","HH","H","hh","h","mm","getMinutes","ss","getSeconds","s","match","timePattern","format","timeFormat","dateStr","dateFormat","timeStr"],"sourceRoot":""}