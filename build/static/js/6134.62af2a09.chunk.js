"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[6134],{42664:function(e,t,r){r.d(t,{g:function(){return a}});var n=r(72791),a=function(){return{checkPermission:(0,n.useCallback)((function(e,t){try{var r,n=JSON.parse(localStorage.getItem("auth")||"[]"),a=null===n||void 0===n?void 0:n.loginType,o=(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.permissions)||[];return"super_admin"===a||"admin"===a&&o.some((function(r){return r.module_name===e&&r.allowed_actions.includes(t)}))}catch(c){return console.error("Error checking permission:",c),!1}}),[])}}},16134:function(e,t,r){r.r(t);var n=r(93433),a=r(1413),o=r(61819),c=r(15861),i=r(29439),s=r(72791),l=r(43513),u=r(61889),d=r(48550),m=r(63466),h=r(13400),p=r(94294),g=r(697),f=r(20068),v=r(9955),Z=r(5574),x=r(65661),k=r(39157),y=r(36314),w=r(17133),b=r(97123),C=r(89731),S=r(58536),j=r(10163),_=r(60592),B=r(62634),E=r(17139),z=r(36277),P=r(8007),T=r(2314),M=r(21830),O=r.n(M),A=(r(91587),r(69977),r(24034)),L=r(23197),R=r(42664),F=r(80184);t.default=function(){var e=(0,R.g)().checkPermission,t=e("Category","create"),r=e("Category","update"),M=e("Category","delete"),N=(0,s.useState)(!1),I=(0,i.Z)(N,2),D=I[0],W=I[1],K=(0,s.useState)(null),q=(0,i.Z)(K,2),Y=q[0],U=q[1],X=(0,s.useState)([]),$=(0,i.Z)(X,2),H=$[0],J=$[1],V=(0,s.useState)(""),G=(0,i.Z)(V,2),Q=G[0],ee=G[1],te=(0,s.useState)(""),re=(0,i.Z)(te,2),ne=re[0],ae=re[1],oe=(0,s.useState)(!1),ce=(0,i.Z)(oe,2),ie=ce[0],se=ce[1],le=(0,s.useState)(!1),ue=(0,i.Z)(le,2),de=ue[0],me=ue[1],he=(0,s.useCallback)((0,c.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,me(!0),e.next=4,C.Z.get("".concat(L.t6,"api/course_categories"));case 4:t=e.sent,r=t.data,J(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),ee(e.t0.message);case 12:return e.prev=12,me(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[]);(0,s.useEffect)((function(){he()}),[he]);var pe=function(){U(null),W(!0)},ge=H.filter((function(e){return e.category_name&&e.category_name.toLowerCase().includes(ne.toLowerCase())})),fe=(0,s.useMemo)((function(){return(0,F.jsxs)(u.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",my:3,children:[(0,F.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,F.jsx)(d.Z,{placeholder:"Search...",variant:"outlined",size:"small",value:ne,onChange:function(e){return ae(e.target.value)},InputProps:{startAdornment:(0,F.jsx)(m.Z,{position:"start",children:(0,F.jsx)(S.Z,{size:20})}),endAdornment:(0,F.jsx)(m.Z,{position:"end",children:ne&&(0,F.jsx)(h.Z,{onClick:function(){ne&&(se(!ie),ae(""))},edge:"end",size:"small",children:(0,F.jsx)(j.Z,{size:20})})})}})}),(0,F.jsx)(u.ZP,{item:!0,xs:12,md:6,textAlign:"right",children:t&&(0,F.jsx)(p.Z,{color:"success",variant:"contained",startIcon:(0,F.jsx)(_.Z,{}),onClick:pe,children:"Add"})})]})}),[ne,ie,t]),ve=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t){var r,n,a,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 2:if(!e.sent.isConfirmed){e.next=14;break}return e.prev=4,e.next=7,C.Z.patch("".concat(L.t6,"api/course_categories/").concat(t,"/archive"));case 7:!0===(r=e.sent).data.success?(O().fire({title:"Success!",text:"Category has been deleted.",icon:"success",confirmButtonText:"OK"}),he()):O().fire({title:"Error!",text:(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Error deleting data.",icon:"error",confirmButtonText:"OK"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),O().fire({title:"Error!",text:(null===(a=e.t0.response)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.message)||"Failed to delete category.",icon:"error",confirmButtonText:"OK"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){W(!1),ke.resetForm()},xe=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t,r){var n,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=(n=r)?"activate":"deactivate",e.next=5,O().fire({title:"".concat(n?"Activate":"Deactivate"," Category"),text:"Are you sure you want to ".concat(c," this category?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 5:if(e.sent.isConfirmed){e.next=8;break}return e.abrupt("return");case 8:return me(!0),e.next=11,C.Z.patch("".concat(L.t6,"api/course_categories/").concat(t.category_id),{status:r});case 11:J(H.map((function(e){return e.category_id===t.category_id?(0,a.Z)((0,a.Z)({},e),{},{status:n}):e}))),O().fire({title:"Success",text:"Category has been ".concat(c,"d successfully!"),icon:"success",showConfirmButton:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),ee(e.t0.message);case 18:return e.prev=18,me(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(t,r){return e.apply(this,arguments)}}(),ke=(0,z.TA)({enableReinitialize:!0,initialValues:{category_name:(null===Y||void 0===Y?void 0:Y.category_name)||""},validationSchema:P.Ry().shape({category_name:P.Z_().required("Category name is required").matches(/^[A-Za-z_]+(?: [A-Za-z_]+)*$/,"Category name can only contain letters, spaces between words").trim()}),onSubmit:function(){var e=(0,c.Z)((0,o.Z)().mark((function e(t,r){var n,a,c,i,s,l,u,d,m,h,p;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,a=r.setSubmitting,e.prev=1,c={category_name:t.category_name.trim()},i=Y?"PUT":"POST",s=Y?"".concat(L.t6,"api/course_categories/").concat(Y.category_id):"".concat(L.t6,"api/course_categories"),e.next=7,(0,C.Z)({method:i,url:s,data:c});case 7:l=e.sent,!0===(u=l.data).success?(O().fire({title:"Success!",text:Y?"Category updated successfully!":"Category added successfully!",icon:"success",confirmButtonText:"OK"}),n(),he(),Ze()):(d=u.message,O().fire({title:"Error!",text:d,icon:"error",confirmButtonText:"OK"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),p=(null===(m=e.t0.response)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.message)||e.t0.message,O().fire({title:"Error!",text:p,icon:"error",confirmButtonText:"OK"});case 16:return e.prev=16,a(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()}),ye=[{name:"Sno",selector:function(e,t){return t+1},sortable:!0,width:"80px"},{name:"Name",selector:function(e){return e.category_name},sortable:!0}].concat((0,n.Z)(r||M?[{name:"Actions",cell:function(e){return(0,F.jsxs)(g.Z,{sx:{display:"flex",gap:1},children:[r&&(0,F.jsx)(f.Z,{title:"Status",children:(0,F.jsx)(h.Z,{onClick:function(t){t.stopPropagation(),xe(e,!e.status)},sx:{mr:1},children:(0,F.jsx)(v.Z,{size:"medium",checked:!0===(null===e||void 0===e?void 0:e.status),color:null!==e&&void 0!==e&&e.status?"success":"error"})})}),r&&(0,F.jsx)(f.Z,{title:"Edit",children:(0,F.jsx)(h.Z,{color:"info",variant:"contained",onClick:function(){return U(e),void W(!0)},children:(0,F.jsx)(B.Z,{})})}),M&&(0,F.jsx)(f.Z,{title:"Delete",children:(0,F.jsx)(h.Z,{variant:"contained",color:"error",onClick:function(){return ve(e.category_id)},children:(0,F.jsx)(E.Z,{})})})]})}}]:[]));return Q?(0,F.jsx)(A.Z,{sx:{borderRadius:2},children:(0,F.jsxs)(g.Z,{p:3,color:"error.main",children:["Error: ",Q]})}):(0,F.jsxs)(A.Z,{children:[fe,(0,F.jsx)(l.ZP,{columns:ye,data:ge,pagination:!0,paginationPerPage:10,paginationRowsPerPageOptions:[5,10,20,30],highlightOnHover:!0,progressPending:de,responsive:!0}),(0,F.jsxs)(Z.Z,{maxWidth:"xs",TransitionComponent:T.S,keepMounted:!0,fullWidth:!0,open:D,onClose:function(e,t){"backdropClick"!==t&&Ze()},BackdropProps:{onClick:function(e){return e.stopPropagation()}},sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description",children:[(0,F.jsxs)(x.Z,{className:"dialogTitle",children:[Y?"Edit Category":"Add Category",(0,F.jsx)(h.Z,{color:"dark",onClick:Ze,edge:"end",size:"big","aria-label":"close",children:(0,F.jsx)(j.Z,{})})]}),(0,F.jsx)(k.Z,{children:(0,F.jsxs)("form",{onSubmit:ke.handleSubmit,children:[(0,F.jsx)(u.ZP,{container:!0,spacing:2,sx:{mt:1},children:(0,F.jsx)(u.ZP,{item:!0,xs:12,children:(0,F.jsxs)(y.Z,{spacing:1,children:[(0,F.jsx)(w.Z,{children:"Category Name*"}),(0,F.jsx)(d.Z,{fullWidth:!0,id:"category_name",name:"category_name",placeholder:"e.g., CMS, Full Stack Development",value:ke.values.category_name,onChange:ke.handleChange,onBlur:ke.handleBlur,error:ke.touched.category_name&&Boolean(ke.errors.category_name),helperText:ke.touched.category_name&&ke.errors.category_name})]})})}),(0,F.jsxs)(b.Z,{sx:{mt:3},children:[(0,F.jsx)(p.Z,{onClick:Ze,children:"Cancel"}),(0,F.jsx)(p.Z,{type:"submit",variant:"contained",children:Y?"Update":"Submit"})]})]})})]})]})}},9955:function(e,t,r){r.d(t,{Z:function(){return C}});var n=r(4942),a=r(63366),o=r(87462),c=r(72791),i=r(59278),s=r(94419),l=r(44402),u=r(14036),d=r(97278),m=r(31402),h=r(66934),p=r(75878),g=r(21217);function f(e){return(0,g.ZP)("MuiSwitch",e)}var v=(0,p.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Z=r(80184),x=["className","color","edge","size","sx"],k=(0,h.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,r.edge&&t["edge".concat((0,u.Z)(r.edge))],t["size".concat((0,u.Z)(r.size))]]}})((function(e){var t,r=e.ownerState;return(0,o.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===r.edge&&{marginLeft:-8},"end"===r.edge&&{marginRight:-8},"small"===r.size&&(t={width:40,height:24,padding:7},(0,n.Z)(t,"& .".concat(v.thumb),{width:16,height:16}),(0,n.Z)(t,"& .".concat(v.switchBase),(0,n.Z)({padding:4},"&.".concat(v.checked),{transform:"translateX(16px)"})),t))})),y=(0,h.ZP)(d.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:function(e,t){var r=e.ownerState;return[t.switchBase,(0,n.Z)({},"& .".concat(v.input),t.input),"default"!==r.color&&t["color".concat((0,u.Z)(r.color))]]}})((function(e){var t,r=e.theme;return t={position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:"".concat("light"===r.palette.mode?r.palette.common.white:r.palette.grey[300]),transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest})},(0,n.Z)(t,"&.".concat(v.checked),{transform:"translateX(20px)"}),(0,n.Z)(t,"&.".concat(v.disabled),{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:"".concat("light"===r.palette.mode?r.palette.grey[100]:r.palette.grey[600])}),(0,n.Z)(t,"&.".concat(v.checked," + .").concat(v.track),{opacity:.5}),(0,n.Z)(t,"&.".concat(v.disabled," + .").concat(v.track),{opacity:r.vars?r.vars.opacity.switchTrackDisabled:"".concat("light"===r.palette.mode?.12:.2)}),(0,n.Z)(t,"& .".concat(v.input),{left:"-100%",width:"300%"}),t}),(function(e){var t,r=e.theme,a=e.ownerState;return(0,o.Z)({"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.action.activeChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&(t={},(0,n.Z)(t,"&.".concat(v.checked),(0,n.Z)({color:(r.vars||r).palette[a.color].main,"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette[a.color].mainChannel," / ").concat(r.vars.palette.action.hoverOpacity,")"):(0,l.Fq)(r.palette[a.color].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(v.disabled),{color:r.vars?r.vars.palette.Switch["".concat(a.color,"DisabledColor")]:"".concat("light"===r.palette.mode?(0,l.$n)(r.palette[a.color].main,.62):(0,l._j)(r.palette[a.color].main,.55))})),(0,n.Z)(t,"&.".concat(v.checked," + .").concat(v.track),{backgroundColor:(r.vars||r).palette[a.color].main}),t))})),w=(0,h.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:function(e,t){return t.track}})((function(e){var t=e.theme;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),b=(0,h.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:function(e,t){return t.thumb}})((function(e){var t=e.theme;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),C=c.forwardRef((function(e,t){var r=(0,m.Z)({props:e,name:"MuiSwitch"}),n=r.className,c=r.color,l=void 0===c?"primary":c,d=r.edge,h=void 0!==d&&d,p=r.size,g=void 0===p?"medium":p,v=r.sx,C=(0,a.Z)(r,x),S=(0,o.Z)({},r,{color:l,edge:h,size:g}),j=function(e){var t=e.classes,r=e.edge,n=e.size,a=e.color,c=e.checked,i=e.disabled,l={root:["root",r&&"edge".concat((0,u.Z)(r)),"size".concat((0,u.Z)(n))],switchBase:["switchBase","color".concat((0,u.Z)(a)),c&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=(0,s.Z)(l,f,t);return(0,o.Z)({},t,d)}(S),_=(0,Z.jsx)(b,{className:j.thumb,ownerState:S});return(0,Z.jsxs)(k,{className:(0,i.Z)(j.root,n),sx:v,ownerState:S,children:[(0,Z.jsx)(y,(0,o.Z)({type:"checkbox",icon:_,checkedIcon:_,ref:t,ownerState:S},C,{classes:(0,o.Z)({},j,{root:j.switchBase})})),(0,Z.jsx)(w,{className:j.track,ownerState:S})]})}))},58536:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(97573),a=r(72791),o=r(52007),c=r.n(o),i=["variant","color","size"],s=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19ZM21.3 21.999c-.18 0-.36-.07-.49-.2l-1.86-1.86a.706.706 0 0 1 0-.99c.27-.27.71-.27.99 0l1.86 1.86c.27.27.27.71 0 .99-.14.13-.32.2-.5.2Z",fill:t}))},l=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.5 2c5.25 0 9.5 4.25 9.5 9.5S16.75 21 11.5 21 2 16.75 2 11.5c0-3.7 2.11-6.9 5.2-8.47M22 22l-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},u=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{opacity:".4",d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",fill:t}),a.createElement("path",{d:"M21.3 21.999c-.18 0-.36-.07-.49-.2l-1.86-1.86a.706.706 0 0 1 0-.99c.27-.27.71-.27.99 0l1.86 1.86c.27.27.27.71 0 .99-.14.13-.32.2-.5.2Z",fill:t}))},d=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19ZM22 22l-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},m=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.5 21.75c-5.65 0-10.25-4.6-10.25-10.25S5.85 1.25 11.5 1.25s10.25 4.6 10.25 10.25-4.6 10.25-10.25 10.25Zm0-19c-4.83 0-8.75 3.93-8.75 8.75s3.92 8.75 8.75 8.75 8.75-3.93 8.75-8.75-3.92-8.75-8.75-8.75ZM22 22.751c-.19 0-.38-.07-.53-.22l-2-2a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l2 2c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22Z",fill:t}))},h=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{opacity:".4",d:"m22 22-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},p=(0,a.forwardRef)((function(e,t){var r=e.variant,o=e.color,c=e.size,p=(0,n._)(e,i);return a.createElement("svg",(0,n.a)({},p,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:c,height:c,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return a.createElement(s,{color:t});case"Broken":return a.createElement(l,{color:t});case"Bulk":return a.createElement(u,{color:t});case"Linear":default:return a.createElement(d,{color:t});case"Outline":return a.createElement(m,{color:t});case"TwoTone":return a.createElement(h,{color:t})}}(r,o))}));p.propTypes={variant:c().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:c().string,size:c().oneOfType([c().string,c().number])},p.defaultProps={variant:"Linear",color:"currentColor",size:"24"},p.displayName="SearchNormal1"},69977:function(){}}]);
//# sourceMappingURL=6134.62af2a09.chunk.js.map