"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[6134],{42664:function(e,t,r){r.d(t,{g:function(){return o}});var n=r(72791),o=function(){return{checkPermission:(0,n.useCallback)((function(e,t){try{var r,n=JSON.parse(localStorage.getItem("auth")||"[]"),o=null===n||void 0===n?void 0:n.loginType,a=(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.permissions)||[];return"super_admin"===o||"admin"===o&&a.some((function(r){return r.module_name===e&&r.allowed_actions.includes(t)}))}catch(c){return console.error("Error checking permission:",c),!1}}),[])}}},16134:function(e,t,r){r.r(t);var n=r(93433),o=r(1413),a=r(61819),c=r(15861),i=r(29439),l=r(72791),s=r(43513),u=r(61889),d=r(48550),m=r(63466),p=r(13400),f=r(94294),h=r(697),g=r(20068),v=r(9955),x=r(5574),Z=r(65661),k=r(39157),y=r(36314),C=r(17133),E=r(97123),j=r(89731),w=r(58536),_=r(10163),b=r(60592),B=r(62634),S=r(17139),T=r(36277),M=r(8007),L=r(2314),P=r(21830),O=r.n(P),z=(r(91587),r(69977),r(24034)),F=r(23197),A=r(42664),W=r(80184);t.default=function(){var e=(0,A.g)().checkPermission,t=e("Category","create"),r=e("Category","update"),P=e("Category","delete"),V=(0,l.useState)(!1),H=(0,i.Z)(V,2),N=H[0],K=H[1],R=(0,l.useState)(null),D=(0,i.Z)(R,2),I=D[0],q=D[1],Y=(0,l.useState)([]),U=(0,i.Z)(Y,2),J=U[0],$=U[1],G=(0,l.useState)(""),Q=(0,i.Z)(G,2),X=Q[0],ee=Q[1],te=(0,l.useState)(""),re=(0,i.Z)(te,2),ne=re[0],oe=re[1],ae=(0,l.useState)(!1),ce=(0,i.Z)(ae,2),ie=ce[0],le=ce[1],se=(0,l.useState)(!1),ue=(0,i.Z)(se,2),de=ue[0],me=ue[1],pe=(0,l.useCallback)((0,c.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,me(!0),e.next=4,j.Z.get("".concat(F.t6,"api/course_categories"));case 4:t=e.sent,r=t.data,$(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),ee(e.t0.message);case 12:return e.prev=12,me(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[]);(0,l.useEffect)((function(){pe()}),[pe]);var fe=function(){q(null),K(!0)},he=J.filter((function(e){return e.category_name&&e.category_name.toLowerCase().includes(ne.toLowerCase())})),ge=(0,l.useMemo)((function(){return(0,W.jsxs)(u.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",my:3,children:[(0,W.jsx)(u.ZP,{item:!0,xs:12,md:6,children:(0,W.jsx)(d.Z,{placeholder:"Search...",variant:"outlined",size:"small",value:ne,onChange:function(e){return oe(e.target.value)},InputProps:{startAdornment:(0,W.jsx)(m.Z,{position:"start",children:(0,W.jsx)(w.Z,{size:20})}),endAdornment:(0,W.jsx)(m.Z,{position:"end",children:ne&&(0,W.jsx)(p.Z,{onClick:function(){ne&&(le(!ie),oe(""))},edge:"end",size:"small",children:(0,W.jsx)(_.Z,{size:20})})})}})}),(0,W.jsx)(u.ZP,{item:!0,xs:12,md:6,textAlign:"right",children:t&&(0,W.jsx)(f.Z,{color:"success",variant:"contained",startIcon:(0,W.jsx)(b.Z,{}),onClick:fe,children:"Add"})})]})}),[ne,ie,t]),ve=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r,n,o,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 2:if(!e.sent.isConfirmed){e.next=14;break}return e.prev=4,e.next=7,j.Z.patch("".concat(F.t6,"api/course_categories/").concat(t,"/archive"));case 7:!0===(r=e.sent).data.success?(O().fire({title:"Success!",text:"Category has been deleted.",icon:"success",confirmButtonText:"OK"}),pe()):O().fire({title:"Error!",text:(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Error deleting data.",icon:"error",confirmButtonText:"OK"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),O().fire({title:"Error!",text:(null===(o=e.t0.response)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.message)||"Failed to delete category.",icon:"error",confirmButtonText:"OK"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){K(!1),ke.resetForm()},Ze=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,r){var n,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=(n=r)?"activate":"deactivate",e.next=5,O().fire({title:"".concat(n?"Activate":"Deactivate"," Category"),text:"Are you sure you want to ".concat(c," this category?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 5:if(e.sent.isConfirmed){e.next=8;break}return e.abrupt("return");case 8:return me(!0),e.next=11,j.Z.patch("".concat(F.t6,"api/course_categories/").concat(t.category_id),{status:r});case 11:$(J.map((function(e){return e.category_id===t.category_id?(0,o.Z)((0,o.Z)({},e),{},{status:n}):e}))),O().fire({title:"Success",text:"Category has been ".concat(c,"d successfully!"),icon:"success",showConfirmButton:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),ee(e.t0.message);case 18:return e.prev=18,me(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,15,18,21]])})));return function(t,r){return e.apply(this,arguments)}}(),ke=(0,T.TA)({enableReinitialize:!0,initialValues:{category_name:(null===I||void 0===I?void 0:I.category_name)||""},validationSchema:M.Ry().shape({category_name:M.Z_().required("Category name is required").matches(/^[A-Za-z_]+(?: [A-Za-z_]+)*$/,"Category name can only contain letters, spaces between words").trim()}),onSubmit:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,r){var n,o,c,i,l,s,u,d,m,p,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,o=r.setSubmitting,e.prev=1,c={category_name:t.category_name.trim()},i=I?"PUT":"POST",l=I?"".concat(F.t6,"api/course_categories/").concat(I.category_id):"".concat(F.t6,"api/course_categories"),e.next=7,(0,j.Z)({method:i,url:l,data:c});case 7:s=e.sent,!0===(u=s.data).success?(O().fire({title:"Success!",text:I?"Category updated successfully!":"Category added successfully!",icon:"success",confirmButtonText:"OK"}),n(),pe(),xe()):(d=u.message,O().fire({title:"Error!",text:d,icon:"error",confirmButtonText:"OK"})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),f=(null===(m=e.t0.response)||void 0===m||null===(p=m.data)||void 0===p?void 0:p.message)||e.t0.message,O().fire({title:"Error!",text:f,icon:"error",confirmButtonText:"OK"});case 16:return e.prev=16,o(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(t,r){return e.apply(this,arguments)}}()}),ye=[{name:"Sno",selector:function(e,t){return t+1},sortable:!0,width:"80px"},{name:"Name",selector:function(e){return e.category_name},sortable:!0}].concat((0,n.Z)(r||P?[{name:"Actions",cell:function(e){return(0,W.jsxs)(h.Z,{sx:{display:"flex",gap:1},children:[r&&(0,W.jsx)(g.Z,{title:"Status",children:(0,W.jsx)(p.Z,{onClick:function(t){t.stopPropagation(),Ze(e,!e.status)},sx:{mr:1},children:(0,W.jsx)(v.Z,{size:"medium",checked:!0===(null===e||void 0===e?void 0:e.status),color:null!==e&&void 0!==e&&e.status?"success":"error"})})}),r&&(0,W.jsx)(g.Z,{title:"Edit",children:(0,W.jsx)(p.Z,{color:"info",variant:"contained",onClick:function(){return q(e),void K(!0)},children:(0,W.jsx)(B.Z,{})})}),P&&(0,W.jsx)(g.Z,{title:"Delete",children:(0,W.jsx)(p.Z,{variant:"contained",color:"error",onClick:function(){return ve(e.category_id)},children:(0,W.jsx)(S.Z,{})})})]})}}]:[]));return X?(0,W.jsx)(z.Z,{sx:{borderRadius:2},children:(0,W.jsxs)(h.Z,{p:3,color:"error.main",children:["Error: ",X]})}):(0,W.jsxs)(z.Z,{children:[ge,(0,W.jsx)(s.ZP,{columns:ye,data:he,pagination:!0,paginationPerPage:10,paginationRowsPerPageOptions:[5,10,20,30],highlightOnHover:!0,progressPending:de,responsive:!0}),(0,W.jsxs)(x.Z,{maxWidth:"xs",TransitionComponent:L.S,keepMounted:!0,fullWidth:!0,open:N,onClose:function(e,t){"backdropClick"!==t&&xe()},BackdropProps:{onClick:function(e){return e.stopPropagation()}},sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description",children:[(0,W.jsxs)(Z.Z,{className:"dialogTitle",children:[I?"Edit Category":"Add Category",(0,W.jsx)(p.Z,{color:"dark",onClick:xe,edge:"end",size:"big","aria-label":"close",children:(0,W.jsx)(_.Z,{})})]}),(0,W.jsx)(k.Z,{children:(0,W.jsxs)("form",{onSubmit:ke.handleSubmit,children:[(0,W.jsx)(u.ZP,{container:!0,spacing:2,sx:{mt:1},children:(0,W.jsx)(u.ZP,{item:!0,xs:12,children:(0,W.jsxs)(y.Z,{spacing:1,children:[(0,W.jsx)(C.Z,{children:"Category Name*"}),(0,W.jsx)(d.Z,{fullWidth:!0,id:"category_name",name:"category_name",placeholder:"e.g., CMS, Full Stack Development",value:ke.values.category_name,onChange:ke.handleChange,onBlur:ke.handleBlur,error:ke.touched.category_name&&Boolean(ke.errors.category_name),helperText:ke.touched.category_name&&ke.errors.category_name})]})})}),(0,W.jsxs)(E.Z,{sx:{mt:3},children:[(0,W.jsx)(f.Z,{onClick:xe,children:"Cancel"}),(0,W.jsx)(f.Z,{type:"submit",variant:"contained",children:I?"Update":"Submit"})]})]})})]})]})}},10163:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(97573),o=r(72791),a=r(52007),c=r.n(a),i=["variant","color","size"],l=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2Zm-.83 12.3c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22s-.38-.07-.53-.22l-2.3-2.3-2.3 2.3c-.15.15-.34.22-.53.22s-.38-.07-.53-.22a.754.754 0 0 1 0-1.06l2.3-2.3-2.3-2.3a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l2.3 2.3 2.3-2.3c.29-.29.77-.29 1.06 0 .29.29.29.77 0 1.06l-2.3 2.3 2.3 2.3Z",fill:t}))},s=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"m13.99 10.012.84-.84M9.17 14.828l2.75-2.75M14.83 14.832l-5.66-5.66M2 12.96V15c0 5 2 7 7 7h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},u=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{opacity:".4",d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81v8.37C2 19.83 4.17 22 7.81 22h8.37c3.64 0 5.81-2.17 5.81-5.81V7.81C22 4.17 19.83 2 16.19 2Z",fill:t}),o.createElement("path",{d:"m13.06 12 2.3-2.3c.29-.29.29-.77 0-1.06a.754.754 0 0 0-1.06 0l-2.3 2.3-2.3-2.3a.754.754 0 0 0-1.06 0c-.29.29-.29.77 0 1.06l2.3 2.3-2.3 2.3c-.29.29-.29.77 0 1.06.15.15.34.22.53.22s.38-.07.53-.22l2.3-2.3 2.3 2.3c.15.15.34.22.53.22s.38-.07.53-.22c.29-.29.29-.77 0-1.06l-2.3-2.3Z",fill:t}))},d=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"m9.17 14.83 5.66-5.66M14.83 14.83 9.17 9.17M9 22h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9v6c0 5 2 7 7 7Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},m=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M9.17 15.58c-.19 0-.38-.07-.53-.22a.754.754 0 0 1 0-1.06l5.66-5.66c.29-.29.77-.29 1.06 0 .29.29.29.77 0 1.06L9.7 15.36c-.14.15-.34.22-.53.22Z",fill:t}),o.createElement("path",{d:"M14.83 15.58c-.19 0-.38-.07-.53-.22L8.64 9.7a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l5.66 5.66c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22Z",fill:t}),o.createElement("path",{d:"M15 22.75H9c-5.43 0-7.75-2.32-7.75-7.75V9c0-5.43 2.32-7.75 7.75-7.75h6c5.43 0 7.75 2.32 7.75 7.75v6c0 5.43-2.32 7.75-7.75 7.75Zm-6-20C4.39 2.75 2.75 4.39 2.75 9v6c0 4.61 1.64 6.25 6.25 6.25h6c4.61 0 6.25-1.64 6.25-6.25V9c0-4.61-1.64-6.25-6.25-6.25H9Z",fill:t}))},p=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("g",{opacity:".4",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("path",{d:"m9.17 14.832 5.66-5.66M14.83 14.832l-5.66-5.66"})),o.createElement("path",{d:"M9 22h6c5 0 7-2 7-7V9c0-5-2-7-7-7H9C4 2 2 4 2 9v6c0 5 2 7 7 7Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},f=(0,o.forwardRef)((function(e,t){var r=e.variant,a=e.color,c=e.size,f=(0,n._)(e,i);return o.createElement("svg",(0,n.a)({},f,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:c,height:c,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return o.createElement(l,{color:t});case"Broken":return o.createElement(s,{color:t});case"Bulk":return o.createElement(u,{color:t});case"Linear":default:return o.createElement(d,{color:t});case"Outline":return o.createElement(m,{color:t});case"TwoTone":return o.createElement(p,{color:t})}}(r,a))}));f.propTypes={variant:c().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:c().string,size:c().oneOfType([c().string,c().number])},f.defaultProps={variant:"Linear",color:"currentColor",size:"24"},f.displayName="CloseSquare"},58536:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(97573),o=r(72791),a=r(52007),c=r.n(a),i=["variant","color","size"],l=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19ZM21.3 21.999c-.18 0-.36-.07-.49-.2l-1.86-1.86a.706.706 0 0 1 0-.99c.27-.27.71-.27.99 0l1.86 1.86c.27.27.27.71 0 .99-.14.13-.32.2-.5.2Z",fill:t}))},s=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.5 2c5.25 0 9.5 4.25 9.5 9.5S16.75 21 11.5 21 2 16.75 2 11.5c0-3.7 2.11-6.9 5.2-8.47M22 22l-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},u=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{opacity:".4",d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",fill:t}),o.createElement("path",{d:"M21.3 21.999c-.18 0-.36-.07-.49-.2l-1.86-1.86a.706.706 0 0 1 0-.99c.27-.27.71-.27.99 0l1.86 1.86c.27.27.27.71 0 .99-.14.13-.32.2-.5.2Z",fill:t}))},d=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19ZM22 22l-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},m=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.5 21.75c-5.65 0-10.25-4.6-10.25-10.25S5.85 1.25 11.5 1.25s10.25 4.6 10.25 10.25-4.6 10.25-10.25 10.25Zm0-19c-4.83 0-8.75 3.93-8.75 8.75s3.92 8.75 8.75 8.75 8.75-3.93 8.75-8.75-3.92-8.75-8.75-8.75ZM22 22.751c-.19 0-.38-.07-.53-.22l-2-2a.754.754 0 0 1 0-1.06c.29-.29.77-.29 1.06 0l2 2c.29.29.29.77 0 1.06-.15.15-.34.22-.53.22Z",fill:t}))},p=function(e){var t=e.color;return o.createElement(o.Fragment,null,o.createElement("path",{d:"M11.5 21a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.createElement("path",{opacity:".4",d:"m22 22-2-2",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},f=(0,o.forwardRef)((function(e,t){var r=e.variant,a=e.color,c=e.size,f=(0,n._)(e,i);return o.createElement("svg",(0,n.a)({},f,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:c,height:c,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return o.createElement(l,{color:t});case"Broken":return o.createElement(s,{color:t});case"Bulk":return o.createElement(u,{color:t});case"Linear":default:return o.createElement(d,{color:t});case"Outline":return o.createElement(m,{color:t});case"TwoTone":return o.createElement(p,{color:t})}}(r,a))}));f.propTypes={variant:c().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:c().string,size:c().oneOfType([c().string,c().number])},f.defaultProps={variant:"Linear",color:"currentColor",size:"24"},f.displayName="SearchNormal1"},69977:function(){}}]);
//# sourceMappingURL=6134.00a9ec64.chunk.js.map