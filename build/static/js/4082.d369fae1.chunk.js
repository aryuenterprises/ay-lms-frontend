"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[4082],{24082:function(e,t,r){r.r(t);var n=r(61819),a=r(15861),o=r(29439),c=r(43513),s=r(697),i=r(48550),l=r(63466),u=r(13400),d=r(65117),p=r(23786),h=(r(91587),r(69977),r(24034)),m=r(72791),f=r(23197),g=r(89731),v=r(78045),Z=r(58536),M=r(10163),k=r(16725),x=r(97820),y=r(85680),E=r(34045),j=r(35125),S=r(23038),w=r(80184);t.default=function(){var e=JSON.parse(localStorage.getItem("auth")),t=null===e||void 0===e?void 0:e.loginType,r=(0,m.useState)([]),b=(0,o.Z)(r,2),P=b[0],C=b[1],L=(0,m.useState)(""),_=(0,o.Z)(L,2),H=_[0],D=_[1],F=(0,m.useState)(""),T=(0,o.Z)(F,2),V=T[0],z=T[1],I=(0,m.useState)(""),O=(0,o.Z)(I,2),N=O[0],W=O[1],A=(0,m.useState)(!0),B=(0,o.Z)(A,2),$=B[0],R=B[1],Y=(0,m.useState)(null),J=(0,o.Z)(Y,2),U=J[0],q=J[1],G=(0,m.useState)(!1),K=(0,o.Z)(G,2),Q=K[0],X=K[1],ee=(0,m.useState)(1),te=(0,o.Z)(ee,2),re=te[0],ne=te[1],ae=(0,m.useState)(10),oe=(0,o.Z)(ae,2),ce=oe[0],se=oe[1],ie=(0,m.useState)(null),le=(0,o.Z)(ie,2),ue=le[0],de=le[1],pe=Boolean(ue),he=(0,m.useCallback)((0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,R(!0),e.next=4,g.Z.get("".concat(f.t6,"/api/alllogs"));case 4:t=e.sent,r=Array.isArray(t.data)?t.data:[],C(r),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),q(e.t0.message),console.error("Error fetching data:",e.t0),C([]);case 14:return e.prev=14,R(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,9,14,17]])}))),[]);(0,m.useEffect)((function(){he()}),[he]);var me=P.filter((function(e){var r=e["tutor"===t||"student"===t?"date":"date_time"];if(H){var n=H.toLowerCase();if(!Object.values(e).some((function(e){return"string"===typeof e?e.toLowerCase().includes(n):"number"===typeof e&&e.toString().includes(n)})))return!1}if(r&&(V||N)){var a=new Date(r);if(V){var o=new Date(V);if(o.setHours(0,0,0,0),a<o)return!1}if(N){var c=new Date(N);if(c.setHours(23,59,59,999),a>c)return!1}}return!0})),fe=[{name:"Name",selector:function(e){return(0,y.Z)(e.name)||"-"},sortable:!0},{name:"User Type",selector:function(e){return(0,y.Z)(e.user_type)||"-"},sortable:!0},{name:"Course Name",selector:function(e){return e.course||"-"},sortable:!0},{name:"Topic",selector:function(e){return e.topic||"-"},sortable:!0},{name:"Sub Topics",selector:function(e){return e.sub_topic||"-"},sortable:!0},{name:"Date & Time",selector:function(e){return e.date_time?(0,v.o)(e.date_time):"-"},sortable:!0},{name:"Total Hours",selector:function(e){return e.total_hours?e.total_hours:"-"},sortable:!0},{name:"Status",selector:function(e){return e.status||"-"},sortable:!0,width:"150px"}];if(U)return(0,w.jsx)(h.Z,{sx:{borderRadius:2},children:(0,w.jsxs)(s.Z,{p:3,color:"error.main",children:["Error: ",U]})});var ge=function(){de(null)},ve=function(e){var t=(re-1)*ce,r=t+ce;return e.slice(t,r)},Ze=function(e){return e.map((function(e){var t={};return fe.forEach((function(r){var n=r.selector?r.selector(e):e[r.name.toLowerCase().replace(/ /g,"_")];t[r.name]=void 0!==n?n:""})),t}))};return(0,w.jsxs)(h.Z,{sx:{borderRadius:2},children:[(0,w.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,flexWrap:"wrap",gap:2},children:[(0,w.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[(0,w.jsx)(i.Z,{placeholder:"Search any field...",variant:"outlined",size:"small",value:H,onChange:function(e){return D(e.target.value)},InputProps:{startAdornment:(0,w.jsx)(l.Z,{position:"start",children:(0,w.jsx)(Z.Z,{size:20})}),endAdornment:(0,w.jsx)(l.Z,{position:"end",children:H&&(0,w.jsx)(u.Z,{onClick:function(){H&&(X(!Q),D(""))},edge:"end",size:"small",children:(0,w.jsx)(M.Z,{size:20})})})}}),(0,w.jsxs)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,w.jsx)(i.Z,{label:"From Date",type:"date",size:"small",value:V,onChange:function(e){return z(e.target.value)},InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,w.jsx)(l.Z,{position:"start",children:(0,w.jsx)(k.Z,{size:18})})}}),(0,w.jsx)(i.Z,{label:"To Date",type:"date",size:"small",value:N,onChange:function(e){return W(e.target.value)},InputLabelProps:{shrink:!0},InputProps:{startAdornment:(0,w.jsx)(l.Z,{position:"start",children:(0,w.jsx)(k.Z,{size:18})})}}),(V||N)&&(0,w.jsx)(u.Z,{onClick:function(){z(""),W("")},size:"small",title:"Clear dates",children:(0,w.jsx)(M.Z,{size:20})})]})]}),(0,w.jsxs)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(u.Z,{variant:"contained",color:"secondary",sx:{ml:2,borderRadius:2},onClick:function(e){de(e.currentTarget)},"aria-controls":"download-menu","aria-haspopup":"true","aria-expanded":pe?"true":void 0,children:(0,w.jsx)(x.Z,{})}),(0,w.jsxs)(d.Z,{id:"download-menu",anchorEl:ue,open:pe,onClose:ge,MenuListProps:{"aria-labelledby":"download-button"},children:[(0,w.jsx)(p.Z,{onClick:function(){!function(e){try{var t=ve(e);if(!t||0===t.length)return void alert("No data to export");var r=Ze(t),n=E.P6.json_to_sheet(r),a=fe.map((function(e){return e.name}));E.P6.sheet_add_aoa(n,[a],{origin:"A1"});var o=E.P6.book_new();E.P6.book_append_sheet(o,n,"AttendanceLogs"),E.NC(o,"attendance_logs_".concat((new Date).toISOString().slice(0,10),".xlsx"))}catch(U){console.error("Error exporting to Excel:",U),alert("Failed to export to Excel")}}(me),ge()},children:"Export to Excel"}),(0,w.jsx)(p.Z,{onClick:function(){!function(e){try{var t=ve(e),r=Ze(t),n=fe.map((function(e){return e.name})),a=new j.kH;(0,S.ZP)(a,{head:[n],body:r.map((function(e){return n.map((function(t){return e[t]||""}))})),margin:{top:20},styles:{fontSize:8},headStyles:{fillColor:[41,128,185]}}),a.save("attendance_logs_".concat((new Date).toISOString().slice(0,10),".pdf"))}catch(U){console.error("Error exporting to PDF:",U),alert("Failed to export to PDF")}}(me),ge()},children:"Export to PDF"})]})]})]}),(0,w.jsx)(c.ZP,{columns:fe,data:me,pagination:!0,paginationPerPage:10,paginationRowsPerPageOptions:[5,10,20,30],highlightOnHover:!0,responsive:!0,progressPending:$,noDataComponent:"No attendance records found",onChangePage:function(e){return ne(e)},onChangeRowsPerPage:function(e,t){se(e),ne(t)}})]})}},78045:function(e,t,r){r.d(t,{o:function(){return o}});var n=r(29439),a=r(23197),o=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.includeTime,c=void 0===o||o,s=r.includeSeconds,i=void 0!==s&&s,l=r.timeOnly,u=void 0!==l&&l,d=r.useCurrentIfEmpty,p=void 0!==d&&d,h=r.fallback,m=void 0===h?"":h;if(e)if("string"===typeof e&&/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){var f=e.split(":").map(Number),g=(0,n.Z)(f,3),v=g[0],Z=g[1],M=g[2];(t=new Date).setHours(v,Z,M||0,0)}else t=e instanceof Date?e:new Date(e);else{if(!p)return m;t=new Date}if(isNaN(t.getTime()))return m;var k=function(e,t){var r=t.getHours(),n=r>=12,a={yyyy:t.getFullYear(),yy:String(t.getFullYear()).slice(-2),MM:String(t.getMonth()+1).padStart(2,"0"),M:t.getMonth()+1,dd:String(t.getDate()).padStart(2,"0"),d:t.getDate(),HH:String(r).padStart(2,"0"),H:r,hh:String(r%12||12).padStart(2,"0"),h:r%12||12,mm:String(t.getMinutes()).padStart(2,"0"),m:t.getMinutes(),ss:String(t.getSeconds()).padStart(2,"0"),s:t.getSeconds(),a:n?"PM":"AM"};return e.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g,(function(e){return a[e]||e}))};if(u){var x=a.ZP.timeFormat;return i||(x=(x=(x=x.replace(/:ss?/g,"")).replace(/(^|\s)ss?(\s|$)/g,"$1$2")).replace(/::/g,":").replace(/(\s|^):|:(\s|$)/g,"$1$2")),k(x,t)}if(c){var y=k(a.ZP.dateFormat,t),E=a.ZP.timeFormat;i||(E=(E=E.replace(/[:\\/]?ss?/g,"")).replace(/::/g,":").replace(/:$/,""));var j=k(E,t);return"".concat(y," ").concat(j)}return k(a.ZP.dateFormat,t)}},16725:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(97573),a=r(72791),o=r(52007),c=r.n(o),s=["variant","color","size"],i=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M16.75 3.56V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5h-6.5V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.56c-2.7.25-4.01 1.86-4.21 4.25-.02.29.22.53.5.53h16.92c.29 0 .53-.25.5-.53-.2-2.39-1.51-4-4.21-4.25ZM20 9.84H4c-.55 0-1 .45-1 1V17c0 3 1.5 5 5 5h8c3.5 0 5-2 5-5v-6.16c0-.55-.45-1-1-1ZM9.21 18.21c-.05.04-.1.09-.15.12-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02-.13 0-.26-.03-.38-.08-.13-.05-.23-.12-.33-.21-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71Zm0-3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.28-.28.72-.37 1.09-.21.13.05.24.12.33.21.18.19.29.45.29.71 0 .26-.11.52-.29.71Zm3.5 3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71Zm0-3.5-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.09-.09.2-.16.33-.21.37-.16.81-.07 1.09.21.18.19.29.45.29.71 0 .26-.11.52-.29.71Zm3.5 3.5c-.19.18-.45.29-.71.29-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71Zm0-3.5-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.14.02-.2.02-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71Z",fill:t}))},l=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M8 2v3M16 2v3M3.5 9.09h17M3 13.01V8.5c0-3 1.5-5 5-5h8c3.5 0 5 2 5 5V17c0 3-1.5 5-5 5H8c-3.5 0-5-2-5-5",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.694 13.7h.009M15.694 16.7h.009M11.995 13.7h.009M11.995 16.7h.009M8.295 13.7h.01M8.295 16.7h.01",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},u=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M16.75 3.56V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5h-6.5V2c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.56c-2.7.25-4.01 1.86-4.21 4.25-.02.29.22.53.5.53h16.92c.29 0 .53-.25.5-.53-.2-2.39-1.51-4-4.21-4.25Z",fill:t}),a.createElement("path",{opacity:".4",d:"M20 9.84c.55 0 1 .45 1 1V17c0 3-1.5 5-5 5H8c-3.5 0-5-2-5-5v-6.16c0-.55.45-1 1-1h16Z",fill:t}),a.createElement("path",{d:"M8.5 14.999c-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.28-.28.72-.37 1.09-.21.13.05.24.12.33.21.18.19.29.45.29.71 0 .26-.11.52-.29.71-.19.18-.45.29-.71.29ZM12 14.999c-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.09-.09.2-.16.33-.21.37-.16.81-.07 1.09.21.18.19.29.45.29.71 0 .26-.11.52-.29.71l-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02ZM15.5 15c-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71l-.15.12c-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.14.02-.2.02ZM8.5 18.5c-.13 0-.26-.03-.38-.08-.13-.05-.23-.12-.33-.21-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.1-.09.2-.16.33-.21.18-.08.38-.1.58-.06.06.01.12.03.18.06.06.02.12.05.18.09l.15.12c.18.19.29.45.29.71 0 .26-.11.52-.29.71-.05.04-.1.09-.15.12-.06.04-.12.07-.18.09-.06.03-.12.05-.18.06-.07.01-.13.02-.2.02ZM12 18.5c-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71-.19.18-.45.29-.71.29ZM15.5 18.5c-.26 0-.52-.11-.71-.29-.18-.19-.29-.45-.29-.71 0-.26.11-.52.29-.71.37-.37 1.05-.37 1.42 0 .18.19.29.45.29.71 0 .26-.11.52-.29.71-.19.18-.45.29-.71.29Z",fill:t}))},d=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M8 2v3M16 2v3M3.5 9.09h17M21 8.5V17c0 3-1.5 5-5 5H8c-3.5 0-5-2-5-5V8.5c0-3 1.5-5 5-5h8c3.5 0 5 2 5 5Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M15.695 13.7h.009M15.695 16.7h.009M11.995 13.7h.01M11.995 16.7h.01M8.294 13.7h.01M8.294 16.7h.01",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},p=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M8 5.75c-.41 0-.75-.34-.75-.75V2c0-.41.34-.75.75-.75s.75.34.75.75v3c0 .41-.34.75-.75.75ZM16 5.75c-.41 0-.75-.34-.75-.75V2c0-.41.34-.75.75-.75s.75.34.75.75v3c0 .41-.34.75-.75.75Z",fill:t}),a.createElement("path",{d:"M15 22.75H9c-5.62 0-6.75-2.65-6.75-6.93V9.65c0-4.74 1.6-6.67 5.71-6.9H16.04c4.11.23 5.71 2.16 5.71 6.9v6.17c0 4.28-1.13 6.93-6.75 6.93ZM8 4.25c-2.8.16-4.25 1.04-4.25 5.4v6.17c0 3.83.73 5.43 5.25 5.43h6c4.52 0 5.25-1.6 5.25-5.43V9.65c0-4.35-1.44-5.24-4.27-5.4H8Z",fill:t}),a.createElement("path",{d:"M20.75 18.352H3.25c-.41 0-.75-.34-.75-.75s.34-.75.75-.75h17.5c.41 0 .75.34.75.75s-.34.75-.75.75ZM12 8.25c-1.23 0-2.27.67-2.27 1.97 0 .62.29 1.09.73 1.39-.61.36-.96.94-.96 1.62 0 1.24.95 2.01 2.5 2.01 1.54 0 2.5-.77 2.5-2.01 0-.68-.35-1.27-.97-1.62.45-.31.73-.77.73-1.39 0-1.3-1.03-1.97-2.26-1.97Zm0 2.84c-.52 0-.9-.31-.9-.8 0-.5.38-.79.9-.79s.9.29.9.79c0 .49-.38.8-.9.8ZM12 14c-.66 0-1.14-.33-1.14-.93 0-.6.48-.92 1.14-.92.66 0 1.14.33 1.14.92 0 .6-.48.93-1.14.93Z",fill:t}))},h=function(e){var t=e.color;return a.createElement(a.Fragment,null,a.createElement("path",{d:"M8 2v3M16 2v3",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{opacity:".4",d:"M3.5 9.09h17",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M21 8.5V17c0 3-1.5 5-5 5H8c-3.5 0-5-2-5-5V8.5c0-3 1.5-5 5-5h8c3.5 0 5 2 5 5Z",stroke:t,strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{opacity:".4",d:"M15.694 13.7h.009M15.694 16.7h.009M11.995 13.7h.009M11.995 16.7h.009M8.295 13.7h.01M8.295 16.7h.009",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},m=(0,a.forwardRef)((function(e,t){var r=e.variant,o=e.color,c=e.size,m=(0,n._)(e,s);return a.createElement("svg",(0,n.a)({},m,{xmlns:"http://www.w3.org/2000/svg",ref:t,width:c,height:c,viewBox:"0 0 24 24",fill:"none"}),function(e,t){switch(e){case"Bold":return a.createElement(i,{color:t});case"Broken":return a.createElement(l,{color:t});case"Bulk":return a.createElement(u,{color:t});case"Linear":default:return a.createElement(d,{color:t});case"Outline":return a.createElement(p,{color:t});case"TwoTone":return a.createElement(h,{color:t})}}(r,o))}));m.propTypes={variant:c().oneOf(["Linear","Bold","Broken","Bulk","Outline","TwoTone"]),color:c().string,size:c().oneOfType([c().string,c().number])},m.defaultProps={variant:"Linear",color:"currentColor",size:"24"},m.displayName="Calendar"},69977:function(){}}]);
//# sourceMappingURL=4082.d369fae1.chunk.js.map