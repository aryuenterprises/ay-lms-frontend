"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[2133],{42664:function(e,t,r){r.d(t,{g:function(){return i}});var n=r(72791),i=function(){return{checkPermission:(0,n.useCallback)((function(e,t){try{var r,n=JSON.parse(localStorage.getItem("auth")||"[]"),i=null===n||void 0===n?void 0:n.loginType,s=(null===n||void 0===n||null===(r=n.user)||void 0===r?void 0:r.permissions)||[];return"super_admin"===i||"admin"===i&&s.some((function(r){return r.module_name===e&&r.allowed_actions.includes(t)}))}catch(o){return console.error("Error checking permission:",o),!1}}),[])}}},72133:function(e,t,r){r.r(t),r.d(t,{default:function(){return dt}});var n=r(61819),i=r(15861),s=r(93433),o=r(29439),a=r(1413),l=r(45987),c=r(72791),d=r(24034),u=r(697),x=r(61889),p=r(36314),h=r(20890),m=r(13400),f=r(62114),b=r(43896),Z=r(5574),v=r(65661),g=r(39157),j=r(94294),y=r(97123),k=r(48550),w=(r(91587),r(57689)),C=r(79971),S=r(92329),_=r(88433),E=r(71652),T=r(12649),I=r(16274),B=r(42161),A=r(57621),P=r(39504),W=r(72363),z=r(20068),F=r(13239),q=r(71444),R=r(61880),D=r(49769),H=r(97011),N=r(75374),M=r(48605),Y=r(95305),O=r(91164),L=r(42664),U=r(80184),V=function(e){var t=e.data,r=e.onAddItem,l=e.onUpdateItem,d=(0,(0,L.g)().checkPermission)("Course","update"),p=(0,c.useState)(t||[]),f=(0,o.Z)(p,2),b=f[0],Z=f[1],v=(0,c.useState)(!1),g=(0,o.Z)(v,2),y=g[0],k=g[1],w=(0,c.useState)(!1),C=(0,o.Z)(w,2),S=C[0],I=C[1],B=(0,c.useState)(null),V=(0,o.Z)(B,2),Q=V[0],K=V[1],$=(0,c.useState)(!1),J=(0,o.Z)($,2),G=J[0],X=J[1],ee=(0,c.useState)(!1),te=(0,o.Z)(ee,2),re=te[0],ne=te[1],ie=(0,c.useState)(null),se=(0,o.Z)(ie,2),oe=se[0],ae=se[1],le=(0,c.useState)({date:new Date,file:null}),ce=(0,o.Z)(le,2),de=ce[0],ue=ce[1],xe=JSON.parse(localStorage.getItem("auth")),pe=null===xe||void 0===xe?void 0:xe.loginType;(0,c.useEffect)((function(){oe&&(0,O.WI)((0,Y.ss)({open:!0,message:oe,variant:"alert",alert:{color:"error"},close:!1}))}),[oe]),(0,c.useEffect)((function(){t?(Z(t.filter((function(e){return void 0!==e}))),X(!1)):X(!0)}),[t]);var he=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne(!0),ae(null),e.prev=2,!S){e.next=10;break}return e.next=6,l(Q,de);case 6:t=e.sent,Z(b.map((function(e){return e.id===Q?t:e}))),e.next=14;break;case 10:return e.next=12,r(de);case 12:i=e.sent,Z([].concat((0,s.Z)(b.filter((function(e){return void 0!==e}))),[i]));case 14:fe(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(2),ae(e.t0.message||"An error occurred"),console.error("Error ".concat(S?"updating":"adding"," syllabus item:"),e.t0);case 21:return e.prev=21,ne(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(){return e.apply(this,arguments)}}(),me=function(){I(!1),K(null),ue({date:new Date,file:null}),k(!0)},fe=function(){k(!1),I(!1),K(null),ue({date:new Date,file:null})},be=function(e){if(e.target.files.length>0){var t=e.target.files[0];ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{file:t})}))}},Ze=function(e){return e.includes("image")?(0,U.jsx)(q.Z,{size:"48",color:"#666"}):e.includes("pdf")?(0,U.jsx)(R.Z,{size:"48",color:"#ff5252"}):e.includes("word")||e.includes("document")?(0,U.jsx)(R.Z,{size:"48",color:"#2b579a"}):e.includes("excel")||e.includes("sheet")?(0,U.jsx)(R.Z,{size:"48",color:"#217346"}):e.includes("powerpoint")||e.includes("presentation")?(0,U.jsx)(R.Z,{size:"48",color:"#d24726"}):(0,U.jsx)(_.Z,{size:"48",color:"#666"})},ve=(0,c.useState)(!1),ge=(0,o.Z)(ve,2),je=ge[0],ye=ge[1],ke=(0,c.useState)(null),we=(0,o.Z)(ke,2),Ce=we[0],Se=we[1],_e=(0,c.useCallback)((function(e){console.log(e,"file data "),Se(e),ye(!0)}),[]);return G?(0,U.jsx)(u.Z,{sx:{p:3,display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:(0,U.jsx)(F.Z,{})}):(0,U.jsx)(E._,{dateAdapter:T.H,children:(0,U.jsxs)(u.Z,{sx:{p:3},children:[b.length>0?(0,U.jsxs)(x.ZP,{container:!0,spacing:3,children:[(0,U.jsx)(x.ZP,{item:!0,container:!0,spacing:3,children:b.filter((function(e){return void 0!==e})).map((function(e){return(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,U.jsxs)(A.Z,{sx:{mb:2,cursor:"pointer",border:"1px solid",borderColor:"divider","&:hover":{backgroundColor:"#f5f5f5",transform:"translateY(-4px)",borderColor:"secondary.light"},borderRadius:2,transition:"all 0.2s ease",position:"relative",minHeight:120},children:[(0,U.jsxs)(P.Z,{sx:{flexGrow:1},children:[(0,U.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center",my:2},children:Ze(e.file.type)}),(0,U.jsx)(h.Z,{variant:"h4",fontWeight:600,gutterBottom:!0,sx:{textAlign:"center"},children:"Course Syllabus"}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",fontWeight:600,sx:{textAlign:"center"},children:"View the complete syllabus for this course to see all learning objectives, topics covered, and assessment criteria."})]}),(0,U.jsx)(W.Z,{sx:{justifyContent:"space-between",p:2},children:(0,U.jsx)(u.Z,{children:(0,U.jsx)(z.Z,{title:"View",children:(0,U.jsx)(m.Z,{color:"secondary",sx:{mr:1},onClick:function(){return _e(e)},children:(0,U.jsx)(D.Z,{})})})})})]})},e.id)}))}),(0,U.jsx)(x.ZP,{item:!0,xs:12,container:!0,justifyContent:"center",children:d&&(0,U.jsx)(j.Z,{variant:"contained",onClick:me,startIcon:(0,U.jsx)(H.Z,{}),disabled:G,sx:{width:"auto"},children:"Update Syllabus"})})]}):(0,U.jsx)(u.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"300px",textAlign:"center",bgcolor:"background.paper",borderRadius:2,p:4},children:G?(0,U.jsx)(h.Z,{children:"Processing..."}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.Z,{size:"64",color:"#ddd"}),(0,U.jsx)(h.Z,{variant:"h6",color:"textSecondary",sx:{mt:2},children:"No Syllabus Uploaded Yet"}),"admin"===pe&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{variant:"body2",color:"textSecondary",sx:{mt:1},children:"Click the Upload Syllabus button to add your first syllabus file"}),(0,U.jsx)(u.Z,{mt:2,children:(0,U.jsx)(j.Z,{variant:"contained",disabled:re,onClick:me,startIcon:(0,U.jsx)(H.Z,{}),children:"Upload Syllabus"})})]})]})}),(0,U.jsx)(M.Z,{open:y,onClose:fe,children:(0,U.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,children:S?"Edit Syllabus":"Upload Syllabus"}),(0,U.jsx)(u.Z,{sx:{border:"2px dashed #ddd",borderRadius:2,p:4,textAlign:"center",mb:2,bgcolor:de.file?"action.hover":"background.paper"},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0&&be({target:{files:e.dataTransfer.files}})},children:de.file?(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(u.Z,{sx:{display:"flex",justifyContent:"center",mb:1},children:Ze(de.file.type)}),(0,U.jsx)(h.Z,{variant:"body1",children:de.file.name}),(0,U.jsx)(h.Z,{variant:"caption",color:"text.secondary",children:function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}(de.file.size)}),(0,U.jsx)(u.Z,{sx:{mt:2},children:(0,U.jsx)(j.Z,{variant:"outlined",color:"error",onClick:function(){ue((function(e){return(0,a.Z)((0,a.Z)({},e),{},{file:null})}))},startIcon:(0,U.jsx)(N.Z,{}),children:"Remove File"})})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(H.Z,{size:"48",color:"#666"}),(0,U.jsx)(h.Z,{variant:"body1",sx:{mt:1},children:"Drag & drop syllabus file here or"}),(0,U.jsx)("input",{type:"file",id:"syllabus-upload",onChange:be,style:{display:"none"},accept:".pdf,.doc,.docx,.ppt,.pptx,.jpg,.png,.jpeg,.txt,.xls,.xlsx,.mp4,.mp3"}),(0,U.jsx)("label",{htmlFor:"syllabus-upload",children:(0,U.jsx)(j.Z,{variant:"contained",component:"span",sx:{mt:1},children:"Browse Files"})})]})}),oe&&(0,U.jsx)(h.Z,{color:"error",sx:{mb:2},children:oe}),(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,U.jsx)(j.Z,{onClick:fe,sx:{mr:2},disabled:G,children:"Cancel"}),(0,U.jsx)(j.Z,{variant:"contained",onClick:he,disabled:!de.file||G,children:G?"Processing...":S?"Update Syllabus":"Upload Syllabus"})]})]})}),(0,U.jsx)(M.Z,{open:je,onClose:function(){return ye(!1)},sx:{display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(4px)"},children:(0,U.jsxs)(u.Z,{sx:{width:"90vw",height:"90vh",bgcolor:"background.paper",boxShadow:24,borderRadius:2,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,U.jsxs)(u.Z,{sx:{p:2,borderBottom:1,borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"grey.50"},children:[(0,U.jsx)(h.Z,{variant:"h6",noWrap:!0,sx:{maxWidth:"70%"},children:null===Ce||void 0===Ce?void 0:Ce.file.name}),(0,U.jsx)(u.Z,{children:(0,U.jsx)(z.Z,{title:"Close",children:(0,U.jsx)(m.Z,{onClick:function(){return ye(!1)},children:(0,U.jsx)(N.Z,{})})})})]}),(0,U.jsx)(u.Z,{sx:{flexGrow:1,overflow:"hidden",position:"relative"},children:function(){if(!Ce)return null;var e=Ce.file.url,t=Ce.file.name,r=Ce.file.type,n=function(e,t){var r,n=(null===e||void 0===e||null===(r=e.split(".").pop())||void 0===r?void 0:r.toLowerCase())||"",i=(null===t||void 0===t?void 0:t.toLowerCase())||"";return["jpg","jpeg","png","gif","webp","svg","bmp","tiff"].includes(n)||i.includes("image")?"image":"pdf"===n||i.includes("pdf")?"pdf":["txt","csv","json","xml","md"].includes(n)||i.includes("text")?"text":["doc","docx"].includes(n)||i.includes("word")||i.includes("document")?"word":["xls","xlsx","csv"].includes(n)||i.includes("excel")||i.includes("sheet")?"excel":["ppt","pptx"].includes(n)||i.includes("powerpoint")||i.includes("presentation")?"powerpoint":["mp4","avi","mov","wmv","flv","webm"].includes(n)||i.includes("video")?"video":["mp3","wav","ogg","aac"].includes(n)||i.includes("audio")?"audio":"unknown"}(t,r);switch(n){case"image":case"text":case"pdf":case"word":case"excel":case"powerpoint":var i="https://docs.google.com/gview?url=".concat(encodeURIComponent(e),"&embedded=true");return(0,U.jsx)("iframe",{src:i,width:"100%",height:"100%",title:t,style:{border:"none"},onError:function(e){e.target.style.display="none";var t=document.getElementById("fallback-preview");t&&(t.style.display="flex")}});default:return(0,U.jsxs)(u.Z,{id:"fallback-preview",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:3},children:[(0,U.jsx)(R.Z,{size:"64",color:"#666"}),(0,U.jsx)(h.Z,{variant:"h6",sx:{mt:2,mb:1},children:"Preview Not Available"}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",sx:{mb:3,textAlign:"center"},children:"This file type cannot be previewed in the browser. Please download the file to view it."}),(0,U.jsx)(j.Z,{variant:"contained",onClick:function(){return window.open(e,"_blank")},startIcon:(0,U.jsx)(D.Z,{}),sx:{mb:1},children:"Open in New Tab"}),(0,U.jsx)(j.Z,{variant:"outlined",onClick:function(){var r=document.createElement("a");r.href=e,r.download=t,r.click()},startIcon:(0,U.jsx)(H.Z,{}),children:"Download File"})]})}}()}),(0,U.jsxs)(u.Z,{sx:{p:2,borderTop:1,borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center",bgcolor:"grey.50"},children:[(0,U.jsxs)(h.Z,{variant:"body2",color:"text.secondary",children:["File type: ",(null===Ce||void 0===Ce?void 0:Ce.file.type)||"Unknown"]}),("admin"===pe||"super_admin"===pe)&&(0,U.jsx)(j.Z,{variant:"contained",onClick:function(){var e=document.createElement("a");e.href=null===Ce||void 0===Ce?void 0:Ce.file.url,e.download=null===Ce||void 0===Ce?void 0:Ce.file.name,e.click()},startIcon:(0,U.jsx)(H.Z,{}),children:"Download"})]})]})})]})})},Q=r(9585),K=r(94454),$=r(4729),J=r(56125),G=r(17133),X=r(62634),ee=r(17139),te=r(64370),re=r(72010),ne=r(58411),ie=r(1701),se=r.n(ie),oe=(r(3321),r(25646),r(51802)),ae=function(e){var t=e.editorState,r=e.onEditorStateChange;return(0,U.jsx)(oe.Editor,{editorState:t,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:r,toolbar:{options:["inline","blockType","fontSize","fontFamily","list","textAlign","colorPicker","link","embedded","emoji","image","remove","history"],colorPicker:{colors:["rgb(97,189,109)","rgb(26,188,156)","rgb(84,172,210)","rgb(44,130,201)","rgb(147,101,184)","rgb(71,85,119)","rgb(204,204,204)","rgb(0,0,0)","rgb(255,255,255)","rgb(244,67,54)","rgb(233,30,99)","rgb(156,39,176)","rgb(103,58,183)","rgb(63,81,181)","rgb(33,150,243)","rgb(0,188,212)","rgb(0,150,136)","rgb(76,175,80)","rgb(139,195,74)","rgb(205,220,57)","rgb(255,235,59)","rgb(255,193,7)","rgb(255,152,0)","rgb(255,87,34)","rgb(121,85,72)"]},inline:{options:["bold","italic","underline","strikethrough","monospace"],className:void 0,component:void 0,dropdownClassName:void 0}}})},le=r(89731),ce=r(23197),de=r(21830),ue=r.n(de),xe=r(36277),pe=r(8007),he=pe.Ry({title:pe.Z_().required("Title is required").max(100,"Title must not exceed 100 characters").test("no-spaces-only","Title cannot be only spaces",(function(e){return e&&e.trim().length>0})),description:pe.Z_().required("Content is required").test("valid-content","Please add meaningful content",(function(e){return!!e&&e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&\w+;/g," ").trim().length>0}))}),me=function(e){var t,r=e.courseId,s=(0,L.g)().checkPermission,a=s("Course","create"),l=s("Course","update"),d=s("Course","delete"),f=(0,c.useState)(re.EditorState.createEmpty()),b=(0,o.Z)(f,2),Z=b[0],v=b[1],g=(0,c.useState)(!1),y=(0,o.Z)(g,2),w=y[0],C=y[1],S=(0,c.useState)(!1),_=(0,o.Z)(S,2),E=_[0],T=_[1],I=(0,c.useState)([]),B=(0,o.Z)(I,2),W=B[0],F=B[1],q=(0,c.useState)(!0),R=(0,o.Z)(q,2),D=R[0],N=R[1],Y=(0,c.useState)(null),O=(0,o.Z)(Y,2),V=O[0],ie=O[1],oe=(0,c.useState)(null),de=(0,o.Z)(oe,2),pe=de[0],me=de[1],fe=(0,c.useState)(null),be=(0,o.Z)(fe,2),Ze=be[0],ve=be[1],ge=JSON.parse(localStorage.getItem("auth")),je=null===ge||void 0===ge?void 0:ge.loginType,ye=null===ge||void 0===ge?void 0:ge.id,ke=null===ge||void 0===ge||null===(t=ge.user)||void 0===t?void 0:t.student_id,we=(0,xe.TA)({initialValues:{id:null,title:"",description:""},validationSchema:he,onSubmit:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,i){var s,o,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.setSubmitting,o=i.resetForm,e.prev=1,a={title:t.title,description:t.description,created_by:ye,status:!1},!E||!t.id){e.next=8;break}return e.next=6,le.Z.put("".concat(ce.t6,"/api/courses/").concat(r,"/topic/").concat(t.id),a);case 6:e.next=10;break;case 8:return e.next=10,le.Z.post("".concat(ce.t6,"/api/courses/").concat(r,"/topic"),a);case 10:return e.next=12,Ce();case 12:C(!1),T(!1),o(),v(re.EditorState.createEmpty()),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(1),console.error("Error saving topic:",e.t0),ie(e.t0.message),ue().fire({title:"Error!",text:e.t0.message||"Error saving topic",icon:"error",confirmButtonText:"OK"});case 23:return e.prev=23,s(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[1,18,23,26]])})));return function(t,r){return e.apply(this,arguments)}}()}),Ce=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N(!0),"student"!==je){e.next=15;break}return e.next=5,le.Z.get("".concat(ce.t6,"/api/courses/").concat(r,"/topic/").concat(ke,"/status"));case 5:if(!(t=e.sent).data.success){e.next=13;break}if(!Array.isArray(t.data.all_topics)){e.next=12;break}F(t.data.all_topics),ve(t.data.completed_topics),e.next=13;break;case 12:throw new Error("Invalid response format - expected array of topics");case 13:e.next=24;break;case 15:return e.next=17,le.Z.get("".concat(ce.t6,"/api/courses/").concat(r,"/topic"));case 17:if(!(i=e.sent).data.success){e.next=24;break}if(!Array.isArray(i.data.data)){e.next=23;break}F(i.data.data),e.next=24;break;case 23:throw new Error("Invalid response format - expected array of topics");case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(0),console.error("Error fetching topics:",e.t0),ie(e.t0.message);case 30:return e.prev=30,N(!1),e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[0,26,30,33]])}))),[r,ke,je]);(0,c.useEffect)((function(){r&&Ce()}),[r,Ce]);var Se=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var i,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 2:if(!e.sent.isConfirmed){e.next=22;break}return e.prev=4,i={is_archived:!0},e.next=8,le.Z.patch("".concat(ce.t6,"/api/courses/").concat(r,"/topic/").concat(t),i);case 8:if(!0!==(s=e.sent).data.success){e.next=15;break}return ue().fire({title:"Success!",text:"Topic deleted successfully!",icon:"success",confirmButtonText:"OK"}),e.next=13,Ce();case 13:e.next=16;break;case 15:ue().fire({title:"Error!",text:(null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Error deleting Topic.",icon:"error",confirmButtonText:"OK"});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),ie(e.t0.message),ue().fire({title:"Error!",text:e.t0.message||"Error Topic.",icon:"error",confirmButtonText:"OK"});case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var i,s,o,a,l,c,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue().fire({title:"Have you completed this topic?",text:"Please confirm by checking this box only if you've fully understood and completed all the material.",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, I have completed it!",cancelButtonText:"No, not yet",focusConfirm:!0});case 2:if(!e.sent.isConfirmed){e.next=34;break}return e.next=6,ue().fire({title:"Rate this topic",input:"select",inputOptions:{1:"\u2b50",2:"\u2b50\u2b50",3:"\u2b50\u2b50\u2b50",4:"\u2b50\u2b50\u2b50\u2b50",5:"\u2b50\u2b50\u2b50\u2b50\u2b50"},inputLabel:"How would you rate this topic? (1-5 stars)",inputPlaceholder:"Select a rating",showCancelButton:!0,confirmButtonText:"Next",cancelButtonText:"Cancel",inputValidator:function(e){return e?null:"You need to select a rating!"}});case 6:if(i=e.sent,void 0!==(s=i.value)){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,ue().fire({title:"Please provide your feedback",input:"textarea",inputLabel:"Notes/Feedback (required)",inputPlaceholder:"Enter your notes or feedback about this topic...",inputAttributes:{"aria-label":"Type your notes here"},showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",inputValidator:function(e){return e&&""!==e.trim()?null:"You must enter feedback to submit!"}});case 12:if(o=e.sent,void 0===(a=o.value)){e.next=34;break}return e.prev=15,l={status:!0,student:ke,notes:a||"",topic:t,ratings:parseInt(s)},e.next=19,le.Z.post("".concat(ce.t6,"/api/courses/").concat(r,"/topic/").concat(ke,"/status"),l);case 19:if(!0!==(c=e.sent).data.success){e.next=27;break}return e.next=23,ue().fire({title:"Success!",text:"Thank you for your feedback!",icon:"success",confirmButtonText:"OK"});case 23:return e.next=25,Ce();case 25:e.next=28;break;case 27:ue().fire({title:"Error!",text:(null===c||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||"Error checking Topic.",icon:"error",confirmButtonText:"OK"});case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(15),ie(e.t0.message),ue().fire({title:"Error!",text:e.t0.message||"Error updating Topic.",icon:"error",confirmButtonText:"OK"});case 34:case"end":return e.stop()}}),e,null,[[15,30]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){v(re.EditorState.createEmpty()),we.resetForm(),T(!1),C(!0)},Te=function(e,t){var r=e.topic_id||e.course;if(!r)return null;var n=pe===e.topic_id,i=null===Ze||void 0===Ze?void 0:Ze.find((function(e){return e.topic===r})),s=i?i.ratings:null;return(0,U.jsxs)(A.Z,{sx:{cursor:"pointer",display:"flex",flexDirection:"column",transition:"all 0.3s ease",border:"1px solid",borderColor:"divider",borderRadius:2,"&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",borderColor:"secondary.light"},ml:2},children:[(0,U.jsx)(Q.Z,{title:(0,U.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,U.jsx)(h.Z,{variant:"h5",fontSize:14,children:"Title ".concat(t+1,": ").concat(e.title)}),"student"===je&&(0,U.jsx)(K.Z,{size:"small",checked:!0===e.is_completed,onChange:function(t){t.stopPropagation(),!0!==e.is_completed&&_e(e.topic_id)},onClick:function(e){return e.stopPropagation()}})]}),onClick:function(){return function(e){me(pe===e?null:e)}(e.topic_id)},sx:{cursor:"pointer"},action:"admin"===je||"super_admin"===je?(0,U.jsxs)(U.Fragment,{children:[l&&(0,U.jsx)(z.Z,{title:"Edit",children:(0,U.jsx)(m.Z,{"aria-label":"edit",onClick:function(t){t.stopPropagation(),function(e){try{var t,r;if(e.description){var n=e.description.replace(/<figure[^>]*>/g,"<div>").replace(/<\/figure>/g,"</div>").replace(/<img[^>]*>/g,""),i=se()(n);i?(r=re.ContentState.createFromBlockArray(i.contentBlocks),t=re.EditorState.createWithContent(r)):t=re.EditorState.createEmpty()}else t=re.EditorState.createEmpty();v(t),we.setValues({id:e.topic_id,title:e.title||"",description:e.description||""}),T(!0),C(!0)}catch(V){console.error("Error setting editor content:",V),v(re.EditorState.createEmpty()),we.setValues({id:e.topic_id,title:e.title||"",description:""}),T(!0),C(!0)}}(e)},children:(0,U.jsx)(X.Z,{size:20})})}),d&&(0,U.jsx)(z.Z,{title:"Delete",children:(0,U.jsx)(m.Z,{color:"error","aria-label":"delete",onClick:function(t){t.stopPropagation(),Se(e.topic_id)},children:(0,U.jsx)(ee.Z,{size:20})})})]}):"student"===je&&(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(u.Z,{sx:{mt:1.5},children:(0,U.jsx)($.Z,{name:"read-only",value:s||0,readOnly:!0})})})}),(0,U.jsx)(J.Z,{in:n,timeout:"auto",unmountOnExit:!0,children:(0,U.jsx)(P.Z,{children:(0,U.jsx)(u.Z,{sx:{"& h1, & h2, & h3":{margin:"1em 0"},"& p":{margin:"0 0 1em 0"},"& ul, & ol":{margin:"0 0 1em 1em",paddingLeft:"2em"}},dangerouslySetInnerHTML:{__html:e.description}})})})]},e.topic_id)};return D?(0,U.jsx)(x.ZP,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"50vh"},children:(0,U.jsx)(x.ZP,{item:!0,children:(0,U.jsx)(h.Z,{children:"Loading topics..."})})}):V?(0,U.jsx)(x.ZP,{container:!0,justifyContent:"center",alignItems:"center",children:(0,U.jsx)(x.ZP,{item:!0,children:(0,U.jsxs)(h.Z,{color:"error",children:["Error: ",V]})})}):(0,U.jsxs)(x.ZP,{container:!0,sx:{minHeight:"50vh"},children:[(0,U.jsx)(x.ZP,{item:!0,xs:12,padding:3,children:W.length>0?(0,U.jsxs)(x.ZP,{container:!0,spacing:3,children:[("admin"===je||"super_admin"===je)&&a&&(0,U.jsx)(x.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end"},children:(0,U.jsx)(j.Z,{variant:"contained",onClick:Ee,startIcon:(0,U.jsx)(te.Z,{size:20}),sx:{mt:2},children:"Add New Topic"})}),W.map((function(e,t){return(0,U.jsx)(x.ZP,{item:!0,xs:6,children:Te(e,t)},e.topic_id)}))]}):(0,U.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"300px",border:"1px dashed #ddd",borderRadius:2,p:4,textAlign:"center"},children:[(0,U.jsx)(h.Z,{variant:"h5",sx:{mb:1},children:"Add Topics"}),(0,U.jsx)(h.Z,{variant:"body2",color:"textSecondary",sx:{mb:3},children:"This course does not have any topics yet. Start by adding the first topic."}),("admin"===je||"super_admin"===je)&&a&&(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(te.Z,{size:20}),onClick:Ee,children:"Add First Topic"}),"admin"===je&&(0,U.jsx)(j.Z,{variant:"contained",onClick:Ee,startIcon:(0,U.jsx)(H.Z,{size:20}),children:"Add First Topic"})]})}),(0,U.jsx)(M.Z,{open:w,onClose:function(){return C(!1)},children:(0,U.jsxs)(u.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",maxWidth:"800px",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2,maxHeight:"90vh",display:"flex",flexDirection:"column"},component:"form",onSubmit:we.handleSubmit,children:[(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,children:E?"Edit Topic":"Add New Topic"}),(0,U.jsx)(G.Z,{children:"Title"}),(0,U.jsx)(k.Z,{name:"title",value:we.values.title,onChange:we.handleChange,onBlur:we.handleBlur,error:we.touched.title&&Boolean(we.errors.title),helperText:we.touched.title&&we.errors.title,fullWidth:!0,sx:{mb:3,mt:1},placeholder:"Enter topic title"}),(0,U.jsxs)(u.Z,{sx:{flexGrow:1,mb:3,minHeight:"300px",overflow:"auto"},children:[(0,U.jsx)(ae,{editorState:Z,onEditorStateChange:function(e){v(e);var t=e.getCurrentContent(),r=(0,ne.E)(t);we.setFieldValue("description",r),we.setFieldTouched("description",!0)},toolbar:{options:["inline","blockType","list","textAlign","link","emoji","image","history"],inline:{options:["bold","italic","underline","strikethrough"]},blockType:{options:["Normal","H1","H2","H3","Blockquote"]}},editorStyle:{padding:"10px",border:"1px solid #eee",borderRadius:"4px",borderColor:we.touched.description&&we.errors.description?"error.main":"#eee"}}),we.touched.description&&we.errors.description&&(0,U.jsx)(h.Z,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:we.errors.description})]}),(0,U.jsxs)(p.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,U.jsx)(j.Z,{onClick:function(){C(!1),we.resetForm()},sx:{minWidth:"100px"},children:"Cancel"}),(0,U.jsx)(j.Z,{type:"submit",variant:"contained",disabled:we.isSubmitting||!we.isValid,sx:{minWidth:"100px"},children:we.isSubmitting?"Saving...":E?"Update":"Save"})]})]})})]})},fe=r(4942),be=r(35527),Ze=r(90493),ve=r(15021),ge=r(49900),je=r(81918),ye=r(94721),ke=r(20653),we=r(93044),Ce=r(23311),Se=r(99261),_e=r(10163),Ee=r(85680),Te=r(66770),Ie=r.n(Te),Be=(r(86009),r(78045)),Ae=function(e){var t,r,s,l,d,p=e.courseId,f=(0,L.g)().checkPermission,b=f("Exercise","create"),w=f("Exercise","update"),C=f("Exercise","delete"),S=(0,c.useState)([]),_=(0,o.Z)(S,2),I=_[0],B=_[1],A=(0,c.useState)(!1),P=(0,o.Z)(A,2),W=P[0],z=P[1],q=(0,c.useState)(!1),R=(0,o.Z)(q,2),D=R[0],H=R[1],M=(0,c.useState)(""),Y=(0,o.Z)(M,2),O=Y[0],V=Y[1],Q=(0,c.useState)(null),K=(0,o.Z)(Q,2),$=K[0],J=K[1],re=(0,c.useState)(null),ne=(0,o.Z)(re,2),ie=ne[0],se=ne[1],oe=(0,c.useState)(!0),ae=(0,o.Z)(oe,2),de=ae[0],he=ae[1],me=(0,c.useState)(!1),Te=(0,o.Z)(me,2),Ae=Te[0],Pe=Te[1],We=(0,c.useState)({}),ze=(0,o.Z)(We,2),Fe=ze[0],qe=ze[1],Re=(0,c.useState)({comment:"",general:""}),De=(0,o.Z)(Re,2),He=De[0],Ne=De[1],Me=(0,c.useRef)(null),Ye=JSON.parse(localStorage.getItem("auth")),Oe=null===Ye||void 0===Ye?void 0:Ye.loginType,Le=(null===Ye||void 0===Ye||null===(t=Ye.user)||void 0===t?void 0:t.employee_id)||(null===Ye||void 0===Ye||null===(r=Ye.user)||void 0===r?void 0:r.user_id),Ue=null===Ye||void 0===Ye||null===(s=Ye.user)||void 0===s?void 0:s.registration_id,Ve=pe.Ry({title:pe.Z_().required("Title is required").test("is-not-empty","Title is required",(function(e){return e&&e.replace(/<(.|\n)*?>/g,"").trim().length>0})),description:pe.Z_().required("Description is required").test("is-not-empty","Description is required",(function(e){return e&&e.replace(/<(.|\n)*?>/g,"").trim().length>0}))}),Qe=(0,xe.TA)({initialValues:{title:"",description:"",status:"pending",duedate:null,priority:"medium"},validationSchema:Ve,onSubmit:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i,s,o,a,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.setSubmitting,s=r.resetForm,e.prev=1,a=(null===(o=Me.current)||void 0===o?void 0:o.getEditor().root.innerHTML)||"",t.title&&a){e.next=6;break}return ue().fire("Error","Title and description are required","error"),e.abrupt("return");case 6:if(l={title:t.title,description:a,course:p,assigned_by:Le},!D){e.next=13;break}return e.next=10,le.Z.patch("".concat(ce.t6,"api/assignments/").concat(t.id),l);case 10:c=e.sent,e.next=16;break;case 13:return e.next=15,le.Z.post("".concat(ce.t6,"api/assignments"),l);case 15:c=e.sent;case 16:if(!1!==c.data.success){e.next=20;break}return e.next=19,ue().fire("Error",c.data.message,"error");case 19:return e.abrupt("return");case 20:return e.next=22,Ke();case 22:z(!1),s(),ue().fire("Success","Exercise ".concat(D?"updated":"created"," successfully!"),"success"),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(1),console.error("Error saving exercise:",e.t0),ue().fire("Error","Failed to save exercise","error");case 31:return e.prev=31,i(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[1,27,31,34]])})));return function(t,r){return e.apply(this,arguments)}}()}),Ke=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,he(!0),e.next=4,le.Z.get("".concat(ce.t6,"api/courses/").concat(p,"/assignments"));case 4:t=e.sent,r=Array.isArray(t.data.data)?t.data.data:[],B(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching exercises:",e.t0);case 12:return e.prev=12,he(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[p]);(0,c.useEffect)((function(){Ke()}),[Ke]);var $e=Array.isArray(I)?I.find((function(e){return e.id===ie})):null,Je=(0,c.useCallback)(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 3:if(!e.sent.isConfirmed){e.next=16;break}return e.next=7,le.Z.patch("".concat(ce.t6,"api/assignments/").concat(t,"/archive"));case 7:if(!0!==(r=e.sent).data.success){e.next=14;break}return e.next=11,Ke();case 11:ue().fire("Success!","Exercise deleted successfully!","success"),e.next=15;break;case 14:ue().fire("Error!",r.data.message,"error");case 15:ie===t&&se(I.length>1?I[0].id:null);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Error deleting exercise:",e.t0),ue().fire("Error!","Failed to delete exercise","error");case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),[I,ie,Ke]),Ge=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne({comment:"",general:""}),!Ae&&ie&&null!==O&&void 0!==O&&O.trim()){e.next=9;break}if(ie){e.next=5;break}return Ne({general:"Please select an exercise first"}),e.abrupt("return");case 5:if(null!==O&&void 0!==O&&O.trim()){e.next=8;break}return Ne({comment:"Comment is required"}),e.abrupt("return");case 8:return e.abrupt("return");case 9:return Pe(!0),e.prev=10,(t=new FormData).append("assignment",ie),t.append("registration_id",Ue),t.append("text",O.trim()),$&&t.append("file",$),e.next=18,le.Z.post("".concat(ce.t6,"api/submissions"),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("serviceToken"))}});case 18:return e.next=20,Ke();case 20:V(""),J(null),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(10),console.error("Error adding submission:",e.t0);case 27:return e.prev=27,Pe(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[10,24,27,30]])}))),[ie,Ue,O,$,Ae,Ke]),Xe=(0,c.useCallback)(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie&&r){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,i={text:r,employee_id:Le},e.next=6,le.Z.post("".concat(ce.t6,"api/replies/").concat(t),i);case 6:return e.next=8,Ke();case 8:qe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,fe.Z)({},t,""))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("Error adding reply:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}(),[ie,Le,Ke]);if(de)return(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",zIndex:1,gap:2},children:[(0,U.jsx)(F.Z,{size:60,thickness:4}),(0,U.jsx)(h.Z,{variant:"h6",children:"Loading exercises..."})]});var et=(null===$e||void 0===$e||null===(l=$e.submissions)||void 0===l?void 0:l.sort((function(e,t){var r=new Date(e.date);return new Date(t.date)-r})))||[];return(0,U.jsx)(E._,{dateAdapter:T.H,children:(0,U.jsxs)(x.ZP,{container:!0,spacing:3,sx:{p:3},children:[(0,U.jsx)(x.ZP,{item:!0,xs:12,md:4,children:(0,U.jsxs)(be.Z,{elevation:2,sx:{p:2,height:"100%"},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,U.jsx)(h.Z,{variant:"h6",children:"Exercises"}),("admin"===Oe||"super_admin"===Oe)&&b&&(0,U.jsx)(j.Z,{variant:"contained",onClick:function(){z(!0),H(!1),Qe.resetForm(),Qe.setValues({title:"",description:"",status:"pending",duedate:null,priority:"medium"})},startIcon:(0,U.jsx)(te.Z,{}),size:"small",children:"New"})]}),(0,U.jsx)(Ze.Z,{dense:!0,sx:{maxHeight:"500px",overflowY:"hidden","&:hover":{overflowY:"auto"},"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&:hover::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"transparent",borderRadius:"4px"},"&:hover::-webkit-scrollbar-thumb":{background:"#888"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"},pr:1,transition:"overflow 0.2s ease"},children:I.map((function(e){var t;return(0,U.jsxs)(be.Z,{elevation:e.id===ie?3:1,sx:{mb:2,cursor:"pointer",backgroundColor:e.id===ie?"#e3f2fd":"inherit","&:hover":{backgroundColor:"#f5f5f5"},borderRadius:2,transition:"all 0.2s ease",position:"relative",minHeight:120},onClick:function(){return se(e.id)},children:[("admin"===Oe||"super_admin"===Oe)&&w&&(0,U.jsx)(m.Z,{onClick:function(t){t.stopPropagation(),function(e){z(!0),H(!0),Qe.setValues({id:e.id,title:e.title,description:e.description,status:e.status,duedate:e.duedate?new Date(e.duedate):null,priority:e.priority})}(e)},size:"small",sx:{position:"absolute",top:8,right:8,"&:hover":{color:"primary.main"},zIndex:1},children:(0,U.jsx)(X.Z,{fontSize:"small"})}),("admin"===Oe||"super_admin"===Oe)&&C&&(0,U.jsx)(m.Z,{onClick:function(t){t.stopPropagation(),Je(e.id)},size:"small",sx:{position:"absolute",bottom:8,right:8,"&:hover":{color:"error.main"},zIndex:1},children:(0,U.jsx)(ee.Z,{fontSize:"small",color:"red"})}),(0,U.jsx)(ve.ZP,{sx:{py:1.5,pr:6},children:(0,U.jsx)(ge.Z,{primary:(0,U.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",mb:.5},children:(0,U.jsx)(h.Z,{variant:"subtitle1",fontWeight:"medium",children:e.title})}),secondary:(0,U.jsxs)(U.Fragment,{children:[e.description&&(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",sx:{mb:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:(0,U.jsx)("div",{dangerouslySetInnerHTML:{__html:e.description}})}),(0,U.jsx)(u.Z,{sx:{display:"flex",alignItems:"center",mt:1.5},children:(0,U.jsxs)(h.Z,{variant:"caption",color:"text.secondary",sx:{mr:1.5},children:[(0,U.jsx)(u.Z,{component:"span",sx:{fontWeight:500},children:(0,U.jsx)(je.Z,{label:"".concat(null===(t=e.submissions)||void 0===t?void 0:t.length," submission"),size:"small",color:"success",variant:"contained",sx:{height:20,fontSize:"0.7rem"}})})," "]})})]})})})]},e.id)}))})]})}),(0,U.jsx)(x.ZP,{item:!0,xs:12,md:8,children:$e?(0,U.jsxs)(be.Z,{elevation:2,sx:{p:3,height:"100%"},children:[(0,U.jsx)(u.Z,{sx:{display:"flex",gap:3,maxWidth:"1200px",margin:"0 auto",alignItems:"flex-start"},children:(0,U.jsxs)(u.Z,{sx:{flex:1,minWidth:0,maxWidth:"100%"},children:[(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,children:$e.title}),(0,U.jsx)(u.Z,{dangerouslySetInnerHTML:{__html:$e.description},sx:{"& p":{marginBottom:"1em"},"& h1, & h2, & h3":{marginTop:"1em",marginBottom:"0.5em"},maxHeight:"400px",overflowY:"auto",pr:2}})]})}),(0,U.jsx)(ye.Z,{sx:{my:3}}),(0,U.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:"Submissions"}),(null===(d=$e.submissions)||void 0===d?void 0:d.length)>0?(0,U.jsx)(Ze.Z,{dense:!0,sx:{maxHeight:"400px",overflowY:"hidden","&:hover":{overflowY:"auto"},"&::-webkit-scrollbar":{width:"5px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&:hover::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"transparent",borderRadius:"4px"},"&:hover::-webkit-scrollbar-thumb":{background:"#888"},"&::-webkit-scrollbar-thumb:hover":{background:"#555"},pr:1,transition:"overflow 0.2s ease"},children:et.map((function(e){var t,r,n;return(0,U.jsxs)(u.Z,{sx:{mb:3},children:[(0,U.jsxs)(ve.ZP,{alignItems:"flex-start",children:[(0,U.jsx)(ke.Z,{children:(0,U.jsx)(we.Z,{children:e.student?e.student.profile_pic?(0,U.jsx)("img",{src:"".concat(e.student.profile_pic),alt:"Profile",className:"profile-pic"}):(0,U.jsx)("span",{style:{fontSize:"1rem"},children:(null===(t=e.student.first_name)||void 0===t?void 0:t.charAt(0))||"?"}):(0,U.jsx)("span",{children:"?"})})}),(0,U.jsx)(ge.Z,{primary:(0,Ee.Z)((null===(r=e.student)||void 0===r?void 0:r.first_name)||"Unknown"),secondary:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{variant:"body2",color:"text.primary",children:e.text}),e.file_url&&(0,U.jsx)(u.Z,{sx:{mt:1},children:(0,U.jsx)(je.Z,{icon:(0,U.jsx)(Ce.Z,{fontSize:"small"}),label:e.file_url.split("/").pop(),variant:"outlined",sx:{mr:1,cursor:"pointer"},onClick:function(){window.open(e.file_url,"_blank");var t=e.file_url.split("/").pop(),r=document.createElement("a");r.href=e.file_url,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}})}),(0,U.jsx)(h.Z,{variant:"caption",display:"block",sx:{mt:1},children:(0,Be.o)(e.date)})]})})]}),(null===(n=e.replies)||void 0===n?void 0:n.length)>0&&(0,U.jsx)(Ze.Z,{sx:{pl:6},children:e.replies.map((function(e){var t,r;return(0,U.jsxs)(ve.ZP,{alignItems:"flex-start",children:[(0,U.jsx)(ke.Z,{children:(0,U.jsx)(we.Z,{children:e.trainer?e.trainer.profile_pic?(0,U.jsx)("img",{src:"".concat(e.trainer.profile_pic),alt:"Profile",className:"profile-pic"}):(0,U.jsx)("span",{style:{fontSize:"1rem"},children:(null===(t=e.trainer.full_name)||void 0===t?void 0:t.charAt(0))||"?"}):(0,U.jsx)("span",{children:"?"})})}),(0,U.jsx)(ge.Z,{primary:(null===(r=e.trainer)||void 0===r?void 0:r.full_name)||"Unknown",secondary:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{variant:"body2",color:"text.primary",children:e.text}),(0,U.jsx)(h.Z,{variant:"caption",display:"block",sx:{mt:1},children:(0,Be.o)(e.date)})]})})]},e.id)}))}),"tutor"===Oe&&(0,U.jsxs)(u.Z,{sx:{pl:6,mt:2},children:[(0,U.jsx)(k.Z,{fullWidth:!0,multiline:!0,rows:2,variant:"outlined",placeholder:"Write your feedback...",value:Fe[e.id]||"",onChange:function(t){return r=e.id,n=t.target.value,void qe((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,fe.Z)({},r,n))}));var r,n},sx:{mb:1}}),(0,U.jsx)(j.Z,{variant:"contained",size:"small",startIcon:(0,U.jsx)(Se.Z,{}),onClick:function(){return Xe(e.id,Fe[e.id]||"")},disabled:!Fe[e.id],children:"Send Feedback"})]})]},e.id)}))}):(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"No submissions yet."}),"student"===Oe&&(0,U.jsxs)(u.Z,{sx:{mt:4},children:[(0,U.jsx)(k.Z,{fullWidth:!0,multiline:!0,rows:3,variant:"outlined",placeholder:"Write your submission comments...",value:O,error:Boolean(He.comment),helperText:He.comment,onChange:function(e){return t=e,Ne({comment:"",general:""}),void V(t.target.value);var t},sx:{mb:2}}),(0,U.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,U.jsx)("input",{id:"file-upload",type:"file",onChange:function(e){J(e.target.files[0])},style:{display:"none"}}),(0,U.jsx)("label",{htmlFor:"file-upload",children:(0,U.jsx)(j.Z,{variant:"outlined",component:"span",startIcon:(0,U.jsx)(Ce.Z,{}),size:"small",children:"Attach File"})}),$&&(0,U.jsxs)(h.Z,{variant:"body2",sx:{ml:2},children:[$.name,(0,U.jsx)(m.Z,{onClick:function(){return J(null)},size:"small",sx:{ml:1},children:(0,U.jsx)(N.Z,{fontSize:"small"})})]})]}),(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(Se.Z,{}),onClick:Ge,disabled:Ae||!(null!==O&&void 0!==O&&O.trim())&&!$,children:"Submit"})]})]}):(0,U.jsx)(be.Z,{elevation:2,sx:{p:3,height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,U.jsx)(h.Z,{variant:"body1",color:"text.secondary",children:0===I.length?"No exercises available":"Select an exercise to view details"})})}),(0,U.jsx)(Z.Z,{open:W,onClose:function(){return z(!1)},maxWidth:"md",fullWidth:!0,children:(0,U.jsxs)("form",{onSubmit:Qe.handleSubmit,children:[(0,U.jsxs)(v.Z,{children:[D?"Edit Exercise":"Create New Exercise",(0,U.jsx)(m.Z,{onClick:function(){return z(!1)},sx:{position:"absolute",right:8,top:8},children:(0,U.jsx)(_e.Z,{})})]}),(0,U.jsxs)(g.Z,{dividers:!0,children:[(0,U.jsx)(G.Z,{children:"Title *"}),(0,U.jsx)(k.Z,{fullWidth:!0,placeholder:"Title",name:"title",value:Qe.values.title,onChange:Qe.handleChange,onBlur:Qe.handleBlur,error:Qe.touched.title&&Boolean(Qe.errors.title),helperText:Qe.touched.title&&Qe.errors.title,sx:{mb:3}}),(0,U.jsx)(G.Z,{children:"Description *"}),(0,U.jsxs)(u.Z,{sx:{height:300,mb:2},children:[(0,U.jsx)(Ie(),{ref:Me,theme:"snow",value:Qe.values.description,onChange:function(e){Qe.setFieldValue("description",e)},modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["code-block"],["clean"]],clipboard:{matchVisual:!1}},formats:["header","font","size","bold","italic","underline","strike","blockquote","color","background","script","align","list","bullet","indent","link","image","video","code-block"],style:{height:"250px"}}),Qe.touched.description&&Qe.errors.description&&(0,U.jsx)(h.Z,{variant:"caption",color:"error",sx:{mt:1,display:"block"},children:Qe.errors.description})]})]}),(0,U.jsxs)(y.Z,{children:[(0,U.jsx)(j.Z,{onClick:function(){return z(!1)},children:"Cancel"}),(0,U.jsx)(j.Z,{type:"submit",variant:"contained",disabled:Qe.isSubmitting||!Qe.isValid,children:Qe.isSubmitting?(0,U.jsx)(F.Z,{size:24}):D?"Update":"Create"})]})]})})]})})},Pe=r(57482),We=r(89673),ze=r(55818),Fe=r(3721),qe=r(57064),Re=r(94070),De=r(70242),He=r(74512),Ne=r(55261),Me=r(88970),Ye=r(85523),Oe=r(61419),Le=r(62075),Ue=r(54371),Ve=r(85667),Qe=r(3265),Ke=r(37355),$e=r(40318),Je=r(96739),Ge=r(8160),Xe=r(46935),et=r(41946),tt=r(53928),rt=r(98820),nt=r(87067),it=r(16908),st=function(e){var t,r=e.courseId,s=(0,c.useState)([]),l=(0,o.Z)(s,2),d=l[0],p=l[1],m=(0,c.useState)([]),Z=(0,o.Z)(m,2),v=Z[0],g=Z[1],y=(0,c.useState)(null),w=(0,o.Z)(y,2),C=w[0],S=w[1],_=(0,c.useState)(null),E=(0,o.Z)(_,2),T=E[0],I=E[1],z=(0,c.useState)(0),q=(0,o.Z)(z,2),R=q[0],D=q[1],H=(0,c.useState)({}),N=(0,o.Z)(H,2),M=N[0],Y=N[1],O=(0,c.useState)(!1),L=(0,o.Z)(O,2),V=L[0],Q=L[1],K=(0,c.useState)(null),$=(0,o.Z)(K,2),J=$[0],G=$[1],X=(0,c.useState)(!1),ee=(0,o.Z)(X,2),te=ee[0],re=ee[1],ne=(0,c.useState)(null),ie=(0,o.Z)(ne,2),se=ie[0],oe=ie[1],ae=(0,c.useState)("testList"),de=(0,o.Z)(ae,2),xe=de[0],pe=de[1],he=(0,c.useState)(0),me=(0,o.Z)(he,2),ke=me[0],we=me[1];console.log("resultData is",v);var Ce=JSON.parse(localStorage.getItem("auth")),_e=null===Ce||void 0===Ce||null===(t=Ce.user)||void 0===t?void 0:t.student_id,Ee=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,re(!0),e.next=4,le.Z.get("".concat(ce.t6,"api/test/course/").concat(r));case 4:t=e.sent,p(t.data.tests||[]),G(null),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching assessment data:",e.t0),G("Failed to load tests. Please try again later.");case 13:return e.prev=13,re(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])}))),[r]),Te=(0,c.useCallback)(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,re(!0),e.next=4,le.Z.get("".concat(ce.t6,"api/test/").concat(t,"/student/").concat(_e,"/result"));case 4:r=e.sent,g(r.data.questions||[]),G(null),pe("results"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching results:",e.t0),G("Failed to load results. Please try again later.");case 14:return e.prev=14,re(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[_e]),Ie=(0,c.useCallback)(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,re(!0),(r=t).questions&&0!==r.questions.length){e.next=7;break}return G("This test has no questions available."),I(null),e.abrupt("return");case 7:i={id:r.test_id,title:r.test_name,instructions:r.description,questions:r.questions.map((function(e){return{id:e.question_id,text:e.question,type:e.type,options:e.options||[],marks:e.marks}}))},I(i),oe(new Date),G(null),pe("testTaking"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching test details:",e.t0),G("Failed to load test details. Please try again.");case 18:return e.prev=18,re(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);(0,c.useEffect)((function(){Ee()}),[Ee]);var Be=function(e,t){Y((function(r){return(0,a.Z)((0,a.Z)({},r),{},(0,fe.Z)({},e,t))}))},Ae=function(e){var t=M[e];return void 0!==t&&null!==t&&""!==t&&(("string"!==typeof t||0!==t.trim().length)&&(!Array.isArray(t)||0!==t.length))},st=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue().fire({title:"Are you sure?",text:"You are about to submit the assessment.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, submit",cancelButtonText:"Cancel"});case 3:if(e.sent.isConfirmed){e.next=6;break}return e.abrupt("return");case 6:return t=Math.floor((new Date-se)/1e3),r=T.questions.map((function(e){var r=M[e.id],n={student_id:_e,question_id:e.id,test_id:T.id,marks:e.marks,time_taken:t};return"written"===e.type&&null!==r&&(n.written_answer=r),"mcq"===e.type&&null!==r&&(n.selected_option=r),n})),e.next=10,le.Z.post("".concat(ce.t6,"api/answers"),r);case 10:e.sent.data.success?(Q(!0),pe("testList")):G("Failed to submit answers. Please try again."),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error submitting assessment:",e.t0),G("An error occurred while submitting your answers. Please try again.");case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),[M,T,_e,se]),ot=function(){S(null),I(null),Q(!1),D(0),Y({}),G(null),pe("testList"),Ee()},at=function(){if(!v||0===v.length)return null;var e=v.length,t=v.filter((function(e){return e.is_correct})).length,r=v.reduce((function(e,t){return e+(t.marks||0)}),0),n=v.reduce((function(e,t){return e+(t.is_correct&&t.marks||0)}),0);return{totalQuestions:e,correctAnswers:t,totalMarks:r,earnedMarks:n,percentage:(n/r*100).toFixed(1)}}();if("results"===xe&&v.length>0)return(0,U.jsxs)(u.Z,{sx:{p:3},children:[(0,U.jsx)(j.Z,{startIcon:(0,U.jsx)(B.Z,{}),onClick:function(){return pe("testList")},sx:{mb:3},children:"Back to Tests"}),(0,U.jsxs)(u.Z,{sx:{textAlign:"center",mb:4},children:[(0,U.jsxs)(h.Z,{variant:"h3",gutterBottom:!0,children:[C.test_name," - Results"]}),(0,U.jsx)(h.Z,{variant:"subtitle1",color:"text.secondary",children:"Your performance summary"})]}),(0,U.jsxs)(x.ZP,{container:!0,spacing:3,sx:{mb:4},children:[(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,U.jsxs)(be.Z,{sx:{p:3,textAlign:"center"},children:[(0,U.jsx)(Le.Z,{color:"primary",sx:{fontSize:40,mb:1}}),(0,U.jsxs)(h.Z,{variant:"h4",gutterBottom:!0,children:[at.earnedMarks,"/",at.totalMarks]}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Total Score"})]})}),(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,U.jsxs)(be.Z,{sx:{p:3,textAlign:"center"},children:[(0,U.jsx)(Ue.Z,{color:"primary",sx:{fontSize:40,mb:1}}),(0,U.jsxs)(h.Z,{variant:"h4",gutterBottom:!0,children:[at.percentage,"%"]}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Percentage"})]})}),(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,U.jsxs)(be.Z,{sx:{p:3,textAlign:"center"},children:[(0,U.jsx)(Ve.Z,{color:"primary",sx:{fontSize:40,mb:1}}),(0,U.jsxs)(h.Z,{variant:"h4",gutterBottom:!0,children:[at.correctAnswers,"/",at.totalQuestions]}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Correct Answers"})]})}),(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,U.jsxs)(be.Z,{sx:{p:3,textAlign:"center"},children:[(0,U.jsx)(Qe.Z,{color:"primary",sx:{fontSize:40,mb:1}}),(0,U.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:at.totalQuestions}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Total Questions"})]})})]}),(0,U.jsxs)(be.Z,{sx:{p:3,mb:4},children:[(0,U.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:"Performance Breakdown"}),(0,U.jsxs)(u.Z,{sx:{mb:2},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,U.jsx)(h.Z,{variant:"body2",children:"Overall Score"}),(0,U.jsxs)(h.Z,{variant:"body2",children:[at.percentage,"%"]})]}),(0,U.jsx)(Pe.Z,{variant:"determinate",value:Number(at.percentage),sx:{height:10,borderRadius:5},color:at.percentage>=80?"success":at.percentage>=60?"primary":"error"})]})]}),(0,U.jsx)(be.Z,{sx:{width:"100%",mb:2},children:(0,U.jsx)(f.Z,{value:ke,onChange:function(e,t){we(t)},centered:!0,children:(0,U.jsx)(b.Z,{label:"Question Review"})})}),0===ke&&(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,sx:{mb:3},children:"Question-by-Question Review"}),(0,U.jsx)(x.ZP,{container:!0,spacing:2,children:v.map((function(e,t){return(0,U.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,U.jsxs)(We.Z,{sx:{mb:2},children:[(0,U.jsx)(ze.Z,{expandIcon:(0,U.jsx)(Ke.Z,{}),children:(0,U.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[(0,U.jsxs)(h.Z,{sx:{width:"33%",flexShrink:0},children:["Question ",t+1]}),(0,U.jsx)(je.Z,{icon:e.is_correct?(0,U.jsx)($e.Z,{}):(0,U.jsx)(Je.Z,{}),label:e.is_correct?"Correct":"Incorrect",color:e.is_correct?"success":"error",size:"small",sx:{mr:2}}),(0,U.jsxs)(h.Z,{sx:{color:"text.secondary"},children:[e.marks," mark",e.marks>1?"s":""]})]})}),(0,U.jsxs)(Fe.Z,{children:[(0,U.jsx)(h.Z,{variant:"h6",gutterBottom:!0,children:e.question}),"mcq"===e.type?(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{variant:"body2",gutterBottom:!0,sx:{mt:2,fontWeight:"bold"},children:"Options:"}),(0,U.jsx)(Ze.Z,{children:e.options.map((function(t,r){return(0,U.jsxs)(ve.ZP,{children:[(0,U.jsx)(qe.Z,{children:t===e.student_answer?e.is_correct?(0,U.jsx)($e.Z,{color:"success"}):(0,U.jsx)(Je.Z,{color:"error"}):t===e.correct_answer?(0,U.jsx)($e.Z,{color:"success"}):null}),(0,U.jsx)(ge.Z,{primary:t,sx:{backgroundColor:t===e.correct_answer?"success.light":t!==e.student_answer||e.is_correct?"transparent":"error.light",p:1,borderRadius:1}})]},r)}))}),!1===e.is_correct&&e.correct_answer&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{variant:"body2",gutterBottom:!0,sx:{mt:2,fontWeight:"bold"},children:"Correct answer:"}),(0,U.jsx)(be.Z,{variant:"outlined",sx:{p:2,backgroundColor:"success.light"},children:(0,U.jsx)(h.Z,{children:e.correct_answer})})]})]}):(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{variant:"body2",gutterBottom:!0,sx:{mt:2,fontWeight:"bold"},children:"Your answer:"}),(0,U.jsx)(be.Z,{variant:"outlined",sx:{p:2,backgroundColor:"grey.50"},children:(0,U.jsx)(h.Z,{children:e.student_answer||"No answer provided"})}),!1===e.is_correct&&e.correct_answer&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(h.Z,{variant:"body2",gutterBottom:!0,sx:{mt:2,fontWeight:"bold"},children:"Correct answer:"}),(0,U.jsx)(be.Z,{variant:"outlined",sx:{p:2,backgroundColor:"success.light"},children:(0,U.jsx)(h.Z,{children:e.correct_answer})})]})]}),(0,U.jsx)(u.Z,{sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,U.jsx)(je.Z,{label:"Score: ".concat(e.is_correct?e.marks:0,"/").concat(e.marks),color:e.is_correct?"success":"error",variant:"outlined"})})]})]},e.question_id)},e.question_id)}))})]})]});if(V)return(0,U.jsxs)(u.Z,{sx:{p:4,maxWidth:900,margin:"0 auto",textAlign:"center",minHeight:"60vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,U.jsx)(u.Z,{sx:{position:"relative",mb:3,animation:"pulse 1.5s ease-in-out infinite","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"100%":{transform:"scale(1)"}}},children:(0,U.jsx)(Ge.Z,{sx:{fontSize:100,color:"success.main",filter:"drop-shadow(0px 4px 8px rgba(0,0,0,0.1))"}})}),(0,U.jsx)(h.Z,{variant:"h3",gutterBottom:!0,sx:{fontWeight:700,mb:2,background:"linear-gradient(45deg, #2e7d32 30%, #66bb6a 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Assessment Submitted Successfully!"}),(0,U.jsx)(h.Z,{variant:"h6",sx:{mb:4,color:"text.secondary",maxWidth:"80%",mx:"auto",lineHeight:1.6},children:"Thank you for completing the assessment. Your answers have been recorded and will be reviewed shortly."}),(0,U.jsxs)(be.Z,{elevation:2,sx:{p:3,mb:4,borderRadius:2,backgroundColor:"grey.50",width:"100%",maxWidth:500},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"center",mb:2},children:[(0,U.jsx)(Xe.Z,{sx:{mr:1,color:"primary.main"}}),(0,U.jsx)(h.Z,{variant:"body2",sx:{fontWeight:500},children:"Results will be available within 24-48 hours"})]}),(0,U.jsx)(h.Z,{variant:"body2",sx:{color:"text.secondary"},children:"You will receive a notification when your results are ready for review."})]}),(0,U.jsx)(u.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:(0,U.jsx)(j.Z,{variant:"contained",onClick:ot,size:"large",sx:{px:4,py:1,borderRadius:2,fontWeight:600,background:"linear-gradient(45deg, #1976d2 30%, #42a5f5 90%)"},children:"Return to Tests"})})]});if(!C||"testList"===xe)return(0,U.jsxs)(u.Z,{sx:{p:3},children:[J&&(0,U.jsx)(Re.Z,{severity:"error",sx:{mb:2},children:J}),te?(0,U.jsxs)(u.Z,{sx:{textAlign:"center",my:8},children:[(0,U.jsx)(F.Z,{size:60,thickness:4,sx:{mb:2}}),(0,U.jsx)(h.Z,{variant:"h5",color:"primary",gutterBottom:!0,children:"Loading Assessments"}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Preparing your tests..."})]}):0===d.length?(0,U.jsxs)(u.Z,{sx:{textAlign:"center",my:8,p:4,backgroundColor:"grey.50",borderRadius:2},children:[(0,U.jsx)(et.Z,{sx:{fontSize:80,color:"text.secondary",mb:2,opacity:.7}}),(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,color:"text.secondary",children:"No Assessments Available"}),(0,U.jsx)(h.Z,{variant:"body1",color:"text.secondary",sx:{maxWidth:500,mx:"auto",mb:2},children:"There are currently no tests available for this course. Please check back later or contact your instructor."})]}):(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600,mb:2,textAlign:"center"},children:"Course Assessments"}),(0,U.jsx)(h.Z,{variant:"subtitle1",sx:{textAlign:"center",mb:5,color:"text.secondary",maxWidth:600,mx:"auto"},children:"Select an assessment below to begin testing your knowledge."}),(0,U.jsx)(x.ZP,{container:!0,spacing:4,children:d.map((function(e){return(0,U.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,U.jsxs)(A.Z,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",border:"1px solid",borderColor:"divider",borderRadius:3,"&:hover":{transform:"translateY(-4px)",boxShadow:"0 12px 24px rgba(0,0,0,0.15)",borderColor:"secondary.light"}},children:[(0,U.jsxs)(P.Z,{sx:{p:3,flexGrow:1},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",flexWrap:"wrap",mb:1},children:[(0,U.jsx)(h.Z,{variant:"h6",sx:{flex:1,fontWeight:600,lineHeight:1.3,wordBreak:"break-word",whiteSpace:"pre-line"},children:e.test_name}),(0,U.jsx)(je.Z,{label:e.course_name,color:"secondary",size:"small",sx:{ml:2,backgroundColor:"secondary.light",color:"secondary.dark",fontWeight:600,alignSelf:"flex-end",flexShrink:0,whiteSpace:"nowrap"}})]}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",sx:{mb:3,lineHeight:1.6,display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description||"Attend all the questions."}),(0,U.jsxs)(u.Z,{sx:{backgroundColor:"grey.50",p:2,borderRadius:2,border:"1px solid",borderColor:"divider"},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,U.jsx)(h.Z,{variant:"body2",sx:{fontWeight:500},children:"Questions:"}),(0,U.jsx)(h.Z,{variant:"body2",sx:{fontWeight:600},children:e.question_count})]}),(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,U.jsx)(h.Z,{variant:"body2",sx:{fontWeight:500},children:"Total Marks:"}),(0,U.jsx)(h.Z,{variant:"body2",sx:{fontWeight:600},children:e.total_marks})]})]})]}),(0,U.jsx)(W.Z,{sx:{p:3,pt:0},children:e.correction_done?(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(u.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,U.jsx)(je.Z,{variant:"outlined",label:"Submitted",color:"success",size:"small",sx:{fontWeight:600}}),(0,U.jsx)(j.Z,{size:"small",color:"primary",endIcon:(0,U.jsx)(it.Z,{}),onClick:function(){return function(e){S(e),Te(e.test_id)}(e)},sx:{fontWeight:600},children:"View Results"})]})}):e.test_completion?(0,U.jsx)(je.Z,{variant:"outlined",label:"Submitted",color:"success",size:"small",sx:{fontWeight:600}}):(0,U.jsx)(j.Z,{size:"small",color:"primary",endIcon:(0,U.jsx)(it.Z,{}),onClick:function(){return function(e){S(e),G(null),Ie(e)}(e)},sx:{fontWeight:600},children:"Start Assessment"})})]})},e.test_id)}))})]})]});if(J&&!T)return(0,U.jsxs)(u.Z,{sx:{p:3,maxWidth:800,margin:"0 auto",textAlign:"center"},children:[(0,U.jsx)(et.Z,{sx:{fontSize:60,color:"error.main",mb:2}}),(0,U.jsx)(h.Z,{variant:"h5",gutterBottom:!0,children:J}),(0,U.jsx)(j.Z,{variant:"contained",onClick:ot,sx:{mt:2},children:"Return to Tests"})]});if(te||!T)return(0,U.jsx)(u.Z,{sx:{p:3,textAlign:"center"},children:(0,U.jsx)(h.Z,{variant:"h6",children:"Loading assessment..."})});var lt=T.questions[R],ct=!!T&&T.questions.every((function(e){return Ae(e.id)}));return(0,U.jsxs)(u.Z,{sx:{p:{xs:2,md:3},maxWidth:900,margin:"0 auto"},children:[J&&(0,U.jsx)(Re.Z,{severity:"error",sx:{mb:2,borderRadius:2},children:J}),(0,U.jsx)(j.Z,{startIcon:(0,U.jsx)(B.Z,{}),onClick:ot,sx:{mb:3,color:"text.secondary","&:hover":{backgroundColor:"action.hover"}},children:"Return to Test List"}),(0,U.jsxs)(u.Z,{sx:{mb:4,textAlign:"center"},children:[(0,U.jsx)(h.Z,{variant:"h3",gutterBottom:!0,sx:{fontWeight:600},children:T.title}),(0,U.jsx)(h.Z,{variant:"h6",color:"text.secondary",sx:{fontSize:"1rem"},children:T.instructions})]}),(0,U.jsx)(Re.Z,{severity:"info",sx:{mb:3,borderRadius:2},children:"mcq"===lt.type?"Choose the single correct option from the choices below.":"Provide your written response in the text area below."}),(0,U.jsx)(be.Z,{variant:"outlined",sx:{p:2,mb:2,borderRadius:3},children:(0,U.jsx)(De.Z,{activeStep:R,alternativeLabel:!0,children:T.questions.map((function(e,t){var r=Ae(e.id);return(0,U.jsx)(He.Z,{completed:r,children:(0,U.jsx)(Ne.Z,{StepIconProps:{sx:{"&.Mui-completed":{color:r?"success.main":"grey.400"},"&.Mui-active":{color:"primary.main"}}},children:"Q".concat(t+1)})},e.id)}))})}),(0,U.jsxs)(be.Z,{elevation:2,sx:{p:3,mb:4,borderRadius:3,border:"1px solid",borderColor:"divider"},children:[(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,U.jsxs)(h.Z,{variant:"h5",sx:{color:"primary.main",fontWeight:500},children:["Question ",R+1," of ",T.questions.length]}),lt.marks&&(0,U.jsx)(je.Z,{label:"".concat(lt.marks," mark").concat(lt.marks>1?"s":""),color:"success",variant:"outlined"})]}),(0,U.jsx)(h.Z,{variant:"body1",sx:{mb:2,fontSize:"1.2rem",lineHeight:1.6},children:lt.text}),"mcq"===lt.type?(0,U.jsx)(Me.Z,{value:M[lt.id]||"",onChange:function(e){return Be(lt.id,e.target.value)},children:lt.options.map((function(e,t){return(0,U.jsx)(be.Z,{elevation:0,sx:{mb:1.5,p:1.5,borderRadius:2,border:"1px solid",borderColor:M[lt.id]===e?"success.main":"divider",backgroundColor:M[lt.id]===e?"success.lighter":"background.paper",transition:"all 0.2s ease","&:hover":{borderColor:"primary.light",backgroundColor:"action.hover"}},children:(0,U.jsx)(Ye.Z,{value:e,control:(0,U.jsx)(Oe.Z,{}),label:(0,U.jsx)(h.Z,{variant:"body1",children:e}),sx:{width:"100%",m:0}})},t)}))}):(0,U.jsx)(k.Z,{fullWidth:!0,multiline:!0,rows:8,placeholder:"Compose your answer here...",value:M[lt.id]||"",onChange:function(e){return Be(lt.id,e.target.value)},variant:"outlined",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,fontSize:"1rem"}}})]}),(0,U.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[(0,U.jsx)(j.Z,{variant:"outlined",onClick:function(){R>0&&D(R-1)},disabled:0===R,startIcon:(0,U.jsx)(tt.Z,{}),color:"secondary",sx:{borderRadius:2,px:3},children:"Previous"}),(0,U.jsx)(u.Z,{children:R<T.questions.length-1?(0,U.jsx)(j.Z,{variant:"contained",onClick:function(){R<T.questions.length-1&&D(R+1)},endIcon:(0,U.jsx)(rt.Z,{}),sx:{borderRadius:2,px:4,py:1},children:"Next Question"}):(0,U.jsx)(j.Z,{variant:"contained",color:"success",onClick:st,disabled:!ct,endIcon:(0,U.jsx)(Se.Z,{}),sx:{borderRadius:2,px:4,py:1},children:"Submit Assessment"})})]}),(0,U.jsx)(ye.Z,{sx:{my:3}}),(0,U.jsx)(Re.Z,{severity:ct?"success":"warning",sx:{mb:3,borderRadius:2},icon:ct?(0,U.jsx)(Ve.Z,{}):(0,U.jsx)(nt.Z,{}),children:ct?"All questions have been completed! You may now submit your assessment.":"Complete all questions before submitting. Currently answered: ".concat(Object.keys(M).length,"/").concat(T.questions.length)}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic",textAlign:"center"},children:"Note: All responses will be submitted together when you click Submit Assessment. You can review and modify answers anytime before final submission."})]})},ot=r(34583),at=r(83854),lt=["children","value","index"];function ct(e){var t=e.children,r=e.value,n=e.index,i=(0,l.Z)(e,lt);return(0,U.jsx)("div",(0,a.Z)((0,a.Z)({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),{},{children:r===n&&(0,U.jsx)(u.Z,{sx:{pt:2},children:t})}))}var dt=function(){var e=(0,(0,L.g)().checkPermission)("Exercise","read"),t=(0,w.s0)(),r=(0,w.TH)().state||{},l=r.title,A=r.courseData,P=r.notification,W=JSON.parse(localStorage.getItem("auth")||"{}"),z=(null===W||void 0===W?void 0:W.loginType)||"student",F=(0,c.useState)(!1),q=(0,o.Z)(F,2),R=q[0],D=q[1],H=(0,c.useState)(""),N=(0,o.Z)(H,2),M=N[0],Y=N[1],O=(0,c.useState)([]),Q=(0,o.Z)(O,2),K=Q[0],$=Q[1],J=(0,c.useMemo)((function(){return[{id:"syllabus",label:"Syllabus",icon:(0,U.jsx)(C.Z,{})},{id:"topics",label:"Topics",icon:(0,U.jsx)(S.Z,{})},{id:"exercise",label:"Exercise",icon:(0,U.jsx)(_.Z,{})},{id:"youtube",label:"YouTube",icon:(0,U.jsx)(at.Z,{})},{id:"assessments",label:"Assessments",icon:(0,U.jsx)(I.Z,{})}]}),[]),G=(0,c.useMemo)((function(){return J.filter((function(t){return"student"===z?["syllabus","topics","exercise","youtube","assessments"].includes(t.id):"exercise"===t.id?"admin"!==z||e:["syllabus","topics","youtube","classSchedule"].includes(t.id)}))}),[J,z,e]),X=(0,c.useMemo)((function(){var e={};return G.forEach((function(t,r){e[t.id]=r})),e}),[G]),ee=(0,c.useCallback)((function(e){if(!e)return 0;var t=e.toLowerCase();return X[{syllabus:"syllabus",topic:"topics",topics:"topics",exercise:"exercise",youtube:"youtube",video:"youtube",assessment:"assessments",assessments:"assessments",schedule:"classSchedule",classSchedule:"classSchedule"}[t]]||0}),[X]),te=(0,c.useState)(0),re=(0,o.Z)(te,2),ne=re[0],ie=re[1],se=(0,c.useState)([]),oe=(0,o.Z)(se,2),ae=oe[0],de=oe[1],ue=(0,c.useState)(!1),xe=(0,o.Z)(ue,2),pe=xe[0],he=xe[1],fe=(0,c.useState)(null),be=(0,o.Z)(fe,2),Ze=be[0],ve=be[1],ge=(0,c.useState)(!1),je=(0,o.Z)(ge,2),ye=je[0],ke=je[1],we=(0,c.useState)(null),Ce=(0,o.Z)(we,2),Se=Ce[0],_e=Ce[1];(0,c.useEffect)((function(){var e=ee(P);ie(e)}),[P,ee]);var Te=function(e){return e&&e.syllabus_info?e.syllabus_info.map((function(e){var t,r,n,i;return(0,a.Z)((0,a.Z)({},e),{},{file:{name:(null===(t=e.file)||void 0===t?void 0:t.name)||"Untitled",type:(null===(r=e.file)||void 0===r?void 0:r.type)||"",size:(null===(n=e.file)||void 0===n?void 0:n.size)||0,url:(null===(i=e.file)||void 0===i?void 0:i.url)||""}})})):[]},Ie=(0,c.useCallback)((0,i.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==A&&void 0!==A&&A.course_id){e.next=2;break}return e.abrupt("return");case 2:return he(!0),ve(null),e.prev=4,e.next=7,le.Z.get("".concat(ce.t6,"api/courses/").concat(A.course_id));case 7:t=e.sent,r=t.data,de(r?Te(r):[]),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("Error fetching course details:",e.t0),de([]);case 16:return e.prev=16,he(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,12,16,19]])}))),[null===A||void 0===A?void 0:A.course_id]);(0,c.useEffect)((function(){Ie()}),[Ie]);var Be=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new FormData,Object.keys(t).forEach((function(e){"file"===e&&t[e]?r.append("syllabus",t.file):t[e]&&r.append(e,t[e])})),e.next=5,le.Z.patch("".concat(ce.t6,"api/courses/").concat(A.course_id),r,{headers:{"Content-Type":"multipart/form-data"}});case 5:if(!(i=e.sent).data.success){e.next=12;break}return e.next=9,Ie();case 9:return e.abrupt("return",i.data.data);case 12:throw new Error(i.data.message||"Failed to add syllabus item");case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(0),console.error("Error adding syllabus item:",e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t,r){var i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=new FormData,Object.keys(r).forEach((function(e){"file"===e&&r[e]?i.append("syllabus",r.file):r[e]&&i.append(e,r[e])})),e.next=5,le.Z.patch("".concat(ce.t6,"api/courses/").concat(A.course_id,"/syllabus/").concat(t),i,{headers:{"Content-Type":"multipart/form-data"}});case 5:if(!(s=e.sent).data.success){e.next=12;break}return e.next=9,Ie();case 9:return e.abrupt("return",s.data.data);case 12:throw new Error(s.data.message||"Failed to update syllabus item");case 13:e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(0),console.error("Error updating syllabus item:",e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}(),We=function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le.Z.delete("".concat(ce.t6,"api/courses/").concat(A.course_id,"/syllabus/").concat(t));case 3:if(!(r=e.sent).data.success){e.next=9;break}return e.next=7,Ie();case 7:e.next=10;break;case 9:throw new Error(r.data.message||"Failed to delete syllabus item");case 10:e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(0),console.error("Error deleting syllabus item:",e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,U.jsx)(E._,{dateAdapter:T.H,children:(0,U.jsx)(d.Z,{children:(0,U.jsxs)(x.ZP,{container:!0,spacing:4,children:[(0,U.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,U.jsxs)(p.Z,{spacing:1,children:[(0,U.jsxs)(h.Z,{variant:"h4",children:["Course Name : ",(0,Ee.Z)(l)]}),Ze&&(0,U.jsx)(h.Z,{color:"error",variant:"body2",children:Ze})]}),(0,U.jsx)(p.Z,{sx:{mb:{xs:-.5,sm:.5}},spacing:1,direction:"row",justifyContent:"flex-end",children:(0,U.jsxs)(m.Z,{variant:"contained",color:"white",size:"medium",onClick:function(){return t(-1)},sx:{width:100,gap:1,backgroundColor:"red",ml:{xs:2,sm:5},color:"white"},children:[(0,U.jsx)(B.Z,{}),"Back"]})})]}),(0,U.jsx)(x.ZP,{item:!0,xs:12,children:(0,U.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,U.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider",py:2,px:4,bgcolor:"background.paper"},children:(0,U.jsx)(f.Z,{value:ne,onChange:function(e,t){ie(t)},variant:"scrollable",scrollButtons:"auto","aria-label":"course detail tabs",children:G.map((function(e,t){return(0,U.jsx)(b.Z,(0,a.Z)({className:"tabs",label:e.label,icon:e.icon,iconPosition:"start"},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),e.id)}))})}),(0,U.jsx)(ct,{value:ne,index:X.syllabus,children:pe?(0,U.jsx)(h.Z,{children:"Loading syllabus..."}):0!==ae.length||["admin","student"].includes(z)?(0,U.jsx)(V,{data:ae,onAddItem:Be,onUpdateItem:Pe,onDeleteItem:We,openAddSyllabus:ye,setOpenAddSyllabus:ke}):(0,U.jsxs)(u.Z,{sx:{minHeight:220,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2},children:[(0,U.jsxs)(Z.Z,{open:ye,onClose:function(){ke(!1),_e(null)},maxWidth:"sm",fullWidth:!0,children:[(0,U.jsx)(v.Z,{children:"Upload Syllabus"}),(0,U.jsx)(g.Z,{children:"Drag and drop a file here, or click to select a file to upload as the syllabus."}),(0,U.jsxs)(g.Z,{children:[(0,U.jsxs)(j.Z,{variant:"outlined",component:"label",startIcon:(0,U.jsx)(ot.Z,{}),fullWidth:!0,children:["Browse Files",(0,U.jsx)("input",{type:"file",hidden:!0,accept:".pdf,.doc,.docx",onChange:function(e){return _e(e.target.files[0])}})]}),Se&&(0,U.jsxs)(h.Z,{sx:{mt:2},variant:"body2",children:["Selected file: ",(0,U.jsx)("b",{children:Se.name})]})]}),(0,U.jsxs)(y.Z,{children:[(0,U.jsx)(j.Z,{onClick:function(){return ke(!1)},children:"Cancel"}),(0,U.jsx)(j.Z,{variant:"contained",disabled:!Se,onClick:(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be({file:Se});case 2:ke(!1),_e(null);case 4:case"end":return e.stop()}}),e)}))),children:"Upload"})]})]}),(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(ot.Z,{}),onClick:function(){return ke(!0)},children:"Upload Syllabus"})]})}),(0,U.jsx)(ct,{value:ne,index:X.topics,children:(0,U.jsx)(me,{courseId:null===A||void 0===A?void 0:A.course_id})}),(0,U.jsx)(ct,{value:ne,index:X.exercise,children:(0,U.jsx)(Ae,{courseId:null===A||void 0===A?void 0:A.course_id})}),void 0!==X.youtube&&(0,U.jsxs)(ct,{value:ne,index:X.youtube,children:[(0,U.jsxs)(Z.Z,{open:R,onClose:function(){return D(!1)},maxWidth:"sm",fullWidth:!0,children:[(0,U.jsx)(v.Z,{children:"Add YouTube Video"}),(0,U.jsx)(g.Z,{children:(0,U.jsx)(k.Z,{autoFocus:!0,fullWidth:!0,label:"YouTube Video URL",placeholder:"https://www.youtube.com/watch?v=xxxxx",value:M,onChange:function(e){return Y(e.target.value)},margin:"dense"})}),(0,U.jsxs)(y.Z,{children:[(0,U.jsx)(j.Z,{onClick:function(){return D(!1)},children:"Cancel"}),(0,U.jsx)(j.Z,{variant:"contained",onClick:function(){M.trim()&&($((function(e){return[].concat((0,s.Z)(e),[M])})),Y(""),D(!1))},children:"Add"})]})]}),0===K.length&&(0,U.jsxs)(u.Z,{sx:{minHeight:220,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:2},children:[(0,U.jsx)(at.Z,{color:"error",sx:{fontSize:60}}),(0,U.jsx)(h.Z,{variant:"h5",children:"Add Course Videos"}),(0,U.jsx)(h.Z,{variant:"body2",color:"text.secondary",children:"Upload or link YouTube videos related to this course"}),(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(at.Z,{}),onClick:function(){return D(!0)},children:"Add Your Video"})]}),K.length>0&&(0,U.jsxs)(u.Z,{sx:{mt:3},children:[K.map((function(e,t){return(0,U.jsx)(u.Z,{mb:2,children:(0,U.jsx)("iframe",{width:"100%",height:"315",src:e.replace("watch?v=","embed/"),title:"youtube-".concat(t),frameBorder:"0",allowFullScreen:!0})},t)})),(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(at.Z,{}),onClick:function(){return D(!0)},children:"Add Another Video"})]})]}),void 0!==X.assessments&&(0,U.jsx)(ct,{value:ne,index:X.assessments,children:(0,U.jsx)(st,{courseId:null===A||void 0===A?void 0:A.course_id})})]})})]})})})}},78045:function(e,t,r){r.d(t,{o:function(){return s}});var n=r(29439),i=r(23197),s=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.includeTime,o=void 0===s||s,a=r.includeSeconds,l=void 0!==a&&a,c=r.timeOnly,d=void 0!==c&&c,u=r.useCurrentIfEmpty,x=void 0!==u&&u,p=r.fallback,h=void 0===p?"":p;if(e)if("string"===typeof e&&/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){var m=e.split(":").map(Number),f=(0,n.Z)(m,3),b=f[0],Z=f[1],v=f[2];(t=new Date).setHours(b,Z,v||0,0)}else t=e instanceof Date?e:new Date(e);else{if(!x)return h;t=new Date}if(isNaN(t.getTime()))return h;var g=function(e,t){var r=t.getHours(),n=r>=12,i={yyyy:t.getFullYear(),yy:String(t.getFullYear()).slice(-2),MM:String(t.getMonth()+1).padStart(2,"0"),M:t.getMonth()+1,dd:String(t.getDate()).padStart(2,"0"),d:t.getDate(),HH:String(r).padStart(2,"0"),H:r,hh:String(r%12||12).padStart(2,"0"),h:r%12||12,mm:String(t.getMinutes()).padStart(2,"0"),m:t.getMinutes(),ss:String(t.getSeconds()).padStart(2,"0"),s:t.getSeconds(),a:n?"PM":"AM"};return e.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g,(function(e){return i[e]||e}))};if(d){var j=i.ZP.timeFormat;return l||(j=(j=(j=j.replace(/:ss?/g,"")).replace(/(^|\s)ss?(\s|$)/g,"$1$2")).replace(/::/g,":").replace(/(\s|^):|:(\s|$)/g,"$1$2")),g(j,t)}if(o){var y=g(i.ZP.dateFormat,t),k=i.ZP.timeFormat;l||(k=(k=k.replace(/[:\\/]?ss?/g,"")).replace(/::/g,":").replace(/:$/,""));var w=g(k,t);return"".concat(y," ").concat(w)}return g(i.ZP.dateFormat,t)}}}]);
//# sourceMappingURL=2133.ed48918f.chunk.js.map