"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[7326],{7326:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne}});var a=t(1413),r=t(61819),i=t(15861),o=t(29439),l=t(72791),c=t(697),s=t(20890),d=t(61889),u=t(68096),m=t(36314),h=t(30168),p=t(63366),g=t(87462),f=t(59278),v=t(52554),b=t(94419);function x(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function y(e){return parseFloat(e)}var Z=t(44402),_=t(66934),k=t(31402),j=t(75878),S=t(21217);function w(e){return(0,S.ZP)("MuiSkeleton",e)}(0,j.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var C,q,P,z,E,R,B,F,I=t(80184),T=["animation","className","component","height","style","variant","width"],M=(0,v.F4)(E||(E=C||(C=(0,h.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),L=(0,v.F4)(R||(R=q||(q=(0,h.Z)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),N=(0,_.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n[t.variant],!1!==t.animation&&n[t.animation],t.hasChildren&&n.withChildren,t.hasChildren&&!t.width&&n.fitContent,t.hasChildren&&!t.height&&n.heightAuto]}})((function(e){var n=e.theme,t=e.ownerState,a=x(n.shape.borderRadius)||"px",r=y(n.shape.borderRadius);return(0,g.Z)({display:"block",backgroundColor:n.vars?n.vars.palette.Skeleton.bg:(0,Z.Fq)(n.palette.text.primary,"light"===n.palette.mode?.11:.13),height:"1.2em"},"text"===t.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(r).concat(a,"/").concat(Math.round(r/.6*10)/10).concat(a),"&:empty:before":{content:'"\\00a0"'}},"circular"===t.variant&&{borderRadius:"50%"},"rounded"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})}),(function(e){return"pulse"===e.ownerState.animation&&(0,v.iv)(B||(B=P||(P=(0,h.Z)(["\n      animation: "," 2s ease-in-out 0.5s infinite;\n    "]))),M)}),(function(e){var n=e.ownerState,t=e.theme;return"wave"===n.animation&&(0,v.iv)(F||(F=z||(z=(0,h.Z)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 2s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),L,(t.vars||t).palette.action.hover)})),A=l.forwardRef((function(e,n){var t=(0,k.Z)({props:e,name:"MuiSkeleton"}),a=t.animation,r=void 0===a?"pulse":a,i=t.className,o=t.component,l=void 0===o?"span":o,c=t.height,s=t.style,d=t.variant,u=void 0===d?"text":d,m=t.width,h=(0,p.Z)(t,T),v=(0,g.Z)({},t,{animation:r,component:l,variant:u,hasChildren:Boolean(h.children)}),x=function(e){var n=e.classes,t=e.variant,a=e.animation,r=e.hasChildren,i=e.width,o=e.height,l={root:["root",t,a,r&&"withChildren",r&&!i&&"fitContent",r&&!o&&"heightAuto"]};return(0,b.Z)(l,w,n)}(v);return(0,I.jsx)(N,(0,g.Z)({as:l,ref:n,className:(0,f.Z)(x.root,i),ownerState:v},h,{style:(0,g.Z)({width:m,height:c},s)}))})),O=t(17133),H=t(94294),D=t(48550),V=t(79012),W=t(85523),G=t(94454),U=t(47071),X=t(24034),K=t(36277),Y=t(8007),$=t(23197),J=t(89731),Q=t(21830),ee=t.n(Q),ne=function(){var e=(0,l.useState)(!1),n=(0,o.Z)(e,2),t=n[0],h=n[1],p=(0,l.useState)(!0),g=(0,o.Z)(p,2),f=g[0],v=g[1],b=(0,l.useState)({general_logo:null,secondary_logo:null,signature:null,company_name:"",company_address:"",company_email:"",company_contact:"",bank_ifsc:"",bank_branch:"",bank_name:"",bank_account_no:"",declaration:"",gst_detail:"",deactivation_options:null}),x=(0,o.Z)(b,2),y=x[0],Z=x[1],_=(0,l.useRef)({}),k=Y.Ry().shape({company_address:Y.Z_().required("Address is required"),company_email:Y.Z_().email("Invalid email").required("Email is required"),company_contact:Y.Z_().matches(/^[0-9]{10}$/,"Phone number must be 10 digits").required("Phone number is required"),bank_ifsc:Y.Z_().required("IFSC code is required"),bank_branch:Y.Z_().required("Branch name is required"),bank_name:Y.Z_().required("Bank name is required"),bank_account_no:Y.Z_().required("Account number is required"),declaration:Y.Z_().required("Declaration is required"),gst_detail:Y.Z_().required("GST detail is required"),deactivation_options:Y.Z_().required("Deactivation options is required"),attendance_options:Y.Z_().required("Attendance options is required"),payment_method:Y.Z_().required("Payment options is required")});(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(!0),e.next=4,J.Z.get("".concat($.t6,"api/settings"));case 4:n=e.sent,Z(n.data.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching settings:",e.t0);case 11:return e.prev=11,setTimeout((function(){return v(!1)}),100),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var j=(0,K.TA)({initialValues:y,validationSchema:k,enableReinitialize:!0,onSubmit:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var a,i,o,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=3;break}return e.abrupt("return");case 3:return h(!0),a=new FormData,n.general_logo instanceof File&&a.append("general_logo",n.general_logo),n.secondary_logo instanceof File&&a.append("secondary_logo",n.secondary_logo),n.signature instanceof File&&a.append("signature",n.signature),["company_name","company_address","company_email","company_contact","bank_ifsc","bank_branch","bank_name","bank_account_no","declaration","gst_detail","deactivation_options","attendance_options","payment_method"].forEach((function(e){a.append(e,n[e])})),i=n.id?"".concat($.t6,"api/settings/").concat(n.id):"".concat($.t6,"api/settings"),o=n.id?"patch":"post",e.next=14,J.Z[o](i,a,{headers:{"Content-Type":"multipart/form-data"}});case 14:if(!1!==(l=e.sent).data.success){e.next=18;break}return ee().fire({title:"Error!",text:l.data.message,icon:"error",confirmButtonText:"OK"}),e.abrupt("return");case 18:ee().fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonText:"OK"}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Error saving settings:",e.t0),ee().fire({title:"Error!",text:"Failed to save settings",icon:"error",confirmButtonText:"OK"});case 25:return e.prev=25,h(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,21,25,28]])})));return function(n){return e.apply(this,arguments)}}()}),S=function(e){var n=j.values[e],t=j.values["".concat(e,"_url")];return t||("string"===typeof n&&n?n:null)},w=function(e){var n=e.src,t=e.alt,a=e.hasImage,r=e.fieldName,i={width:100,height:100,border:"1px dashed #ccc",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.50",overflow:"hidden",position:"relative",flexShrink:0};return n?(0,I.jsx)(c.Z,{sx:i,ref:function(e){e&&!_.current[r]&&(_.current[r]=e.getBoundingClientRect())},children:(0,I.jsx)("img",{src:n,alt:t,style:{width:"100%",height:"100%",objectFit:"contain",display:"block"},loading:"lazy",decoding:"async",onLoad:function(e){e.target.style.opacity="1";var n=e.target.parentElement;n&&(n.style.width="100px",n.style.height="100px")},onError:function(e){e.target.style.display="none";var n=e.target.parentElement;n&&(n.innerHTML='<Typography variant="body2" color="text.secondary">Error loading image</Typography>')}})}):(0,I.jsx)(c.Z,{sx:i,ref:function(e){e&&!_.current[r]&&(_.current[r]=e.getBoundingClientRect())},children:(0,I.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:a?"Loading...":"No Image"})})},C=function(e){return(0,l.createElement)(d.ZP,(0,a.Z)((0,a.Z)({item:!0},e.gridSize),{},{key:"skeleton-".concat(e.name)}),(0,I.jsx)(u.Z,{fullWidth:!0,children:(0,I.jsxs)(m.Z,{spacing:1,children:[(0,I.jsx)(A,{variant:"text",width:"40%",height:24}),(0,I.jsx)(A,{variant:"rounded",height:e.multiline?80:56})]})}))};return(0,I.jsxs)("form",{onSubmit:j.handleSubmit,encType:"multipart/form-data",children:[(0,I.jsxs)(m.Z,{spacing:2,children:[(0,I.jsx)(X.Z,{title:"Logo & Signature",children:(0,I.jsx)(d.ZP,{container:!0,spacing:3,children:(0,I.jsx)(d.ZP,{container:!0,item:!0,xs:12,spacing:3,alignItems:"center",children:[{name:"general_logo",label:"General Logo",uploadId:"general-logo-upload",alt:"General Logo Preview"},{name:"secondary_logo",label:"Favicon Logo",uploadId:"secondary-logo-upload",alt:"Secondary Logo Preview"},{name:"signature",label:"Signature",uploadId:"signature-upload",alt:"Signature Preview"}].map((function(e){return(0,I.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,I.jsx)(u.Z,{fullWidth:!0,children:(0,I.jsxs)(m.Z,{spacing:2,children:[(0,I.jsx)(O.Z,{children:e.label}),(0,I.jsx)(c.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexDirection:"column",minHeight:140},children:f?(0,I.jsx)(c.Z,{sx:{width:100,height:100,border:"1px dashed #ccc",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.50"},children:(0,I.jsx)(A,{variant:"rounded",width:80,height:80})}):(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(w,{src:S(e.name),alt:e.alt,hasImage:!!j.values[e.name],fieldName:e.name}),(0,I.jsx)("input",{accept:"image/*",style:{display:"none"},id:e.uploadId,type:"file",onChange:function(n){return function(e,n){var t=e.target.files[0];if(t){var a=URL.createObjectURL(t);return j.setFieldValue(n,t),j.setFieldValue("".concat(n,"_url"),a),function(){return URL.revokeObjectURL(a)}}}(n,e.name)}}),(0,I.jsx)("label",{htmlFor:e.uploadId,children:(0,I.jsxs)(H.Z,{variant:"outlined",component:"span",size:"small",children:["Choose ",e.label.includes("Logo")?"Logo":"Signature"]})})]})})]})})},e.name)}))})})}),[{title:"General Details",fields:[{name:"company_name",label:"Company Name *",placeholder:"Enter company name",gridSize:{xs:12,sm:6},required:!0},{name:"company_email",label:"Email *",placeholder:"Enter company email",type:"email",gridSize:{xs:12,sm:6},required:!0},{name:"company_contact",label:"Phone Number *",placeholder:"Enter phone number",gridSize:{xs:12,sm:6},required:!0},{name:"company_address",label:"Address *",placeholder:"Enter company address",gridSize:{xs:12},multiline:!0,rows:3,required:!0}]},{title:"Bank Details",fields:[{name:"bank_name",label:"Bank Name *",placeholder:"Enter bank name",gridSize:{xs:12,sm:6},required:!0},{name:"bank_branch",label:"Branch Name *",placeholder:"Enter branch name",gridSize:{xs:12,sm:6},required:!0},{name:"bank_ifsc",label:"IFSC Code *",placeholder:"Enter IFSC code",gridSize:{xs:12,sm:6},required:!0},{name:"bank_account_no",label:"Account Number *",placeholder:"Enter account number",gridSize:{xs:12,sm:6},required:!0},{name:"declaration",label:"Declaration *",placeholder:"Enter declaration",gridSize:{xs:12,sm:6},required:!0},{name:"gst_detail",label:"GST Number *",placeholder:"Enter GST number",gridSize:{xs:12,sm:6},required:!0}]}].map((function(e){return(0,I.jsx)(X.Z,{title:e.title,children:(0,I.jsx)(d.ZP,{container:!0,spacing:3,children:f?e.fields.map(C):e.fields.map((function(e){return(0,l.createElement)(d.ZP,(0,a.Z)((0,a.Z)({item:!0},e.gridSize),{},{key:e.name}),(0,I.jsx)(u.Z,{fullWidth:!0,children:(0,I.jsxs)(m.Z,{spacing:1,children:[(0,I.jsx)(O.Z,{children:e.label}),(0,I.jsx)(D.Z,{name:e.name,type:e.type||"text",value:j.values[e.name],onChange:j.handleChange,onBlur:j.handleBlur,error:j.touched[e.name]&&Boolean(j.errors[e.name]),helperText:j.touched[e.name]&&j.errors[e.name],placeholder:e.placeholder,multiline:e.multiline,rows:e.rows,fullWidth:!0,InputProps:{style:{minHeight:e.multiline?"80px":"auto"}}})]})}))}))})},e.title)})),Object.entries({deactivationOptions:{title:"Portal Access Permissions",name:"deactivation_options",options:[{value:"after_course_completion",label:"Course Completion Based - Portal access granted only after completing all course requirements"},{value:"after_batch_completion",label:"Batch Completion Based - Portal access granted only after completing all course requirements in a batch"},{value:"1_year_deactivation",label:"1 Year - Portal access available for 1 year"},{value:"no_deactivation",label:"No Deactivation - Portal access available indefinitely"}],helperText:"Select only one access type for student portal permissions"},attendanceOptions:{title:"Attendance Type",name:"attendance_options",options:[{value:"automatic_attendance",label:"Automatic - link clicked by student automatically attendance marked"},{value:"manual_attendance",label:"Manual - student marks attendance manually"}],helperText:"Select based on student attendance type"},paymentMethodOptions:{title:"Payment Method",name:"payment_method",options:[{value:"stripe_enabled",label:"Stripe based payment"},{value:"paypal_enabled",label:"PayPal based payment"}],helperText:"Select based on payment method type"}}).map((function(e){var n=(0,o.Z)(e,2),t=n[0],a=n[1];return(0,I.jsx)(X.Z,{title:a.title,children:(0,I.jsx)(d.ZP,{container:!0,spacing:3,children:(0,I.jsx)(d.ZP,{item:!0,xs:12,children:(0,I.jsx)(u.Z,{fullWidth:!0,error:j.touched[a.name]&&Boolean(j.errors[a.name]),children:(0,I.jsxs)(m.Z,{spacing:2,children:[(0,I.jsx)(V.Z,{children:f?Array.from({length:a.options.length}).map((function(e,n){return(0,I.jsx)(W.Z,{control:(0,I.jsx)(A,{variant:"rounded",width:20,height:20}),label:(0,I.jsx)(A,{variant:"text",width:"80%"})},"skeleton-".concat(n))})):a.options.map((function(e){return(0,I.jsx)(W.Z,{control:(0,I.jsx)(G.Z,{checked:j.values[a.name]===e.value,onChange:function(){return function(e,n){var t=j.values[e]===n?"":n;j.setFieldValue(e,t)}(a.name,e.value)},name:a.name}),label:e.label},e.value)}))}),j.touched[a.name]&&j.errors[a.name]&&(0,I.jsx)(U.Z,{error:!0,children:j.errors[a.name]}),(0,I.jsx)(U.Z,{children:a.helperText})]})})})})},t)}))]}),(0,I.jsx)(d.ZP,{item:!0,xs:12,children:(0,I.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:2,minHeight:15},children:f?(0,I.jsx)(A,{variant:"rounded",width:120,height:40}):(0,I.jsx)(H.Z,{type:"submit",variant:"contained",size:"large",disabled:t,sx:{minWidth:120,minHeight:40,flexShrink:0},children:t?"Saving...":"Save"})})})]})}},94454:function(e,n,t){t.d(n,{Z:function(){return q}});var a=t(4942),r=t(63366),i=t(87462),o=t(72791),l=t(59278),c=t(94419),s=t(44402),d=t(97278),u=t(74223),m=t(80184),h=(0,u.Z)((0,m.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),p=(0,u.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),g=(0,u.Z)((0,m.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),f=t(14036),v=t(31402),b=t(66934),x=t(75878),y=t(21217);function Z(e){return(0,y.ZP)("MuiCheckbox",e)}var _=(0,x.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),k=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],j=(0,b.ZP)(d.Z,{shouldForwardProp:function(e){return(0,b.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,t.indeterminate&&n.indeterminate,n["size".concat((0,f.Z)(t.size))],"default"!==t.color&&n["color".concat((0,f.Z)(t.color))]]}})((function(e){var n,t=e.theme,r=e.ownerState;return(0,i.Z)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,s.Fq)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(n={},(0,a.Z)(n,"&.".concat(_.checked,", &.").concat(_.indeterminate),{color:(t.vars||t).palette[r.color].main}),(0,a.Z)(n,"&.".concat(_.disabled),{color:(t.vars||t).palette.action.disabled}),n))})),S=(0,m.jsx)(p,{}),w=(0,m.jsx)(h,{}),C=(0,m.jsx)(g,{}),q=o.forwardRef((function(e,n){var t,a,s=(0,v.Z)({props:e,name:"MuiCheckbox"}),d=s.checkedIcon,u=void 0===d?S:d,h=s.color,p=void 0===h?"primary":h,g=s.icon,b=void 0===g?w:g,x=s.indeterminate,y=void 0!==x&&x,_=s.indeterminateIcon,q=void 0===_?C:_,P=s.inputProps,z=s.size,E=void 0===z?"medium":z,R=s.className,B=(0,r.Z)(s,k),F=y?q:b,I=y?q:u,T=(0,i.Z)({},s,{color:p,indeterminate:y,size:E}),M=function(e){var n=e.classes,t=e.indeterminate,a=e.color,r=e.size,o={root:["root",t&&"indeterminate","color".concat((0,f.Z)(a)),"size".concat((0,f.Z)(r))]},l=(0,c.Z)(o,Z,n);return(0,i.Z)({},n,l)}(T);return(0,m.jsx)(j,(0,i.Z)({type:"checkbox",inputProps:(0,i.Z)({"data-indeterminate":y},P),icon:o.cloneElement(F,{fontSize:null!=(t=F.props.fontSize)?t:E}),checkedIcon:o.cloneElement(I,{fontSize:null!=(a=I.props.fontSize)?a:E}),ownerState:T,ref:n,className:(0,l.Z)(M.root,R)},B,{classes:M}))}))}}]);
//# sourceMappingURL=7326.2b20028a.chunk.js.map