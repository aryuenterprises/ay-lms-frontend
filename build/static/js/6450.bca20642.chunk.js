"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[6450],{42664:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(72791),i=function(){return{checkPermission:(0,r.useCallback)((function(e,t){try{var n,r=JSON.parse(localStorage.getItem("auth")||"[]"),i=null===r||void 0===r?void 0:r.loginType,s=(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.permissions)||[];return"super_admin"===i||"admin"===i&&s.some((function(n){return n.module_name===e&&n.allowed_actions.includes(t)}))}catch(a){return console.error("Error checking permission:",a),!1}}),[])}}},46450:function(e,t,n){n.r(t);var r=n(1413),i=n(93433),s=n(61819),a=n(15861),o=n(29439),l=n(72791),d=n(10266),c=n(13239),u=n(20890),h=n(94294),x=n(36314),f=n(13400),m=n(61889),p=n(697),v=n(48550),Z=n(63466),_=n(74982),g=n(68096),j=n(58406),y=n(23786),b=n(57621),C=n(39504),w=n(20068),S=n(9955),k=n(94721),B=n(72363),T=n(5574),P=n(65661),I=n(39157),W=n(35527),O=n(97123),E=n(81918),D=n(17133),F=n(47071),L=n(42161),z=n(58536),V=n(10163),N=n(64370),q=n(62634),A=n(17139),M=n(16725),H=n(17875),R=n(71736),$=n(14471),K=n(49769),Y=n(36277),U=n(8007),G=n(23197),J=n(57689),X=n(21830),Q=n.n(X),ee=n(90838),te=n(71652),ne=n(41985),re=n(12649),ie=n(89731),se=n(78045),ae=n(24034),oe=n(42664),le=n(85680),de=n(80184);t.default=function(){var e,t,n,X,ce,ue,he,xe,fe=(0,oe.g)().checkPermission,me=(0,J.s0)(),pe=(0,J.TH)().state||{},ve=pe.N_UserId,Ze=pe.N_UserType,_e=fe("Batch","create"),ge=fe("Batch","update"),je=fe("Batch","delete"),ye=JSON.parse(localStorage.getItem("auth")),be=ye.user.trainer_id||ye.user.student_id,Ce=null===ye||void 0===ye?void 0:ye.loginType,we=(0,l.useState)([]),Se=(0,o.Z)(we,2),ke=Se[0],Be=Se[1],Te=(0,l.useState)(!0),Pe=(0,o.Z)(Te,2),Ie=Pe[0],We=Pe[1],Oe=(0,l.useState)(null),Ee=(0,o.Z)(Oe,2),De=Ee[0],Fe=Ee[1],Le=(0,l.useState)(!1),ze=(0,o.Z)(Le,2),Ve=ze[0],Ne=ze[1],qe=(0,l.useState)(!1),Ae=(0,o.Z)(qe,2),Me=Ae[0],He=Ae[1],Re=(0,l.useState)(null),$e=(0,o.Z)(Re,2),Ke=$e[0],Ye=$e[1],Ue=(0,l.useState)([]),Ge=(0,o.Z)(Ue,2),Je=Ge[0],Xe=Ge[1],Qe=(0,l.useState)([]),et=(0,o.Z)(Qe,2),tt=et[0],nt=et[1],rt=(0,l.useState)([]),it=(0,o.Z)(rt,2),st=it[0],at=it[1],ot=(0,l.useState)([]),lt=(0,o.Z)(ot,2),dt=lt[0],ct=lt[1],ut=(0,l.useState)(""),ht=(0,o.Z)(ut,2),xt=ht[0],ft=ht[1],mt=(0,l.useState)(""),pt=(0,o.Z)(mt,2),vt=pt[0],Zt=pt[1],_t=(0,l.useState)(""),gt=(0,o.Z)(_t,2),jt=gt[0],yt=gt[1],bt=(0,l.useState)(""),Ct=(0,o.Z)(bt,2),wt=Ct[0],St=Ct[1],kt=(0,l.useState)(""),Bt=(0,o.Z)(kt,2),Tt=Bt[0],Pt=Bt[1],It=(0,l.useState)(null),Wt=(0,o.Z)(It,2),Ot=Wt[0],Et=Wt[1],Dt=(0,l.useState)("all"),Ft=(0,o.Z)(Dt,2),Lt=Ft[0],zt=Ft[1],Vt=(0,l.useState)(!1),Nt=(0,o.Z)(Vt,2),qt=Nt[0],At=Nt[1],Mt=(0,l.useCallback)((0,a.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,We(!0),t=null,"admin"!==Ce&&"super_admin"!==Ce){e.next=11;break}return e.next=6,Promise.all([ie.Z.get("api/batches")]);case 6:n=e.sent,r=(0,o.Z)(n,1),t=r[0],e.next=24;break;case 11:if("tutor"!==Ce){e.next=19;break}return e.next=14,Promise.all([ie.Z.get("api/batches/trainer/".concat(be))]);case 14:i=e.sent,a=(0,o.Z)(i,1),t=a[0],e.next=24;break;case 19:return e.next=21,Promise.all([ie.Z.get("api/batches/student/".concat(be))]);case 21:l=e.sent,d=(0,o.Z)(l,1),t=d[0];case 24:Be(t.data.batches||[]),ct(t.data.active_category||t.data.categories||[]),Xe(t.data.active_course||t.data.active_courses||[]),nt(t.data.active_trainer||[]),at(t.data.active_student||[]),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(0),Fe(e.t0.message);case 34:return e.prev=34,We(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[0,31,34,37]])}))),[Ce,be]);(0,l.useEffect)((function(){Mt()}),[Mt]);var Ht=(0,l.useMemo)((function(){var e=ke.filter((function(e){if(xt){var t,n,r,i,s,a,o=xt.toLowerCase();if(!((null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(o))||(null===(n=e.trainer_name)||void 0===n?void 0:n.toLowerCase().includes(o))||(null===(r=e.course_name)||void 0===r?void 0:r.toLowerCase().includes(o))||(null===(i=e.batch_name)||void 0===i?void 0:i.toLowerCase().includes(o))||(null===(s=e.batch_id)||void 0===s?void 0:s.toString().includes(xt))||(null===(a=e.students)||void 0===a?void 0:a.some((function(e){var t;return null===e||void 0===e||null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(o)})))))return!1}if(ve&&Ze)if("tutor"===Ze){if(e.trainer_id!==ve)return!1}else if("student"===Ze){var l;if(!(null===(l=e.students)||void 0===l?void 0:l.some((function(e){return e.student_id===ve}))))return!1}var d;if("all"!==Lt&&!("active"===Lt?e.status:!e.status))return!1;if(null!==Ot&&void 0!==Ot&&Ot.id){if(e.id!==Ot.id)return!1}else if(null!==vt&&void 0!==vt&&vt.course_id){if(!(e.course===vt.course_id))return!1}else if(null!==jt&&void 0!==jt&&jt.category_id){if(!(e.category===jt.category_id))return!1}if(null!==wt&&void 0!==wt&&wt.student_id&&!(null===(d=e.students)||void 0===d?void 0:d.some((function(e){return e.student_id===wt.student_id}))))return!1;return null===Tt||void 0===Tt||!Tt.trainer_id||e.trainer_id===Tt.trainer_id})),t=dt,n=Je,r=st,s=tt;if(null!==Ot&&void 0!==Ot&&Ot.id){var a=ke.find((function(e){return e.id===Ot.id}));a&&(t=dt.filter((function(e){return e.category_id===a.category})),n=Je.filter((function(e){return e.course_id===a.course})),r=st.filter((function(e){var t;return null===(t=a.students)||void 0===t?void 0:t.some((function(t){return t.student_id===e.student_id}))})),s=tt.filter((function(e){return e.trainer_id===a.trainer_id})))}else if(null!==vt&&void 0!==vt&&vt.course_id){var o=Je.find((function(e){return e.course_id===vt.course_id}));o&&(t=dt.filter((function(e){return e.category_id===(o.category_id||o.category)})),n=Je.filter((function(e){return e.course_id===vt.course_id})),r=st.filter((function(t){return e.some((function(e){var n;return e.course===vt.course_id&&(null===(n=e.students)||void 0===n?void 0:n.some((function(e){return e.student_id===t.student_id})))}))})),s=tt.filter((function(t){return e.some((function(e){return e.course===vt.course_id&&e.trainer_id===t.trainer_id}))})))}else if(null!==jt&&void 0!==jt&&jt.category_id)t=dt.filter((function(e){return e.category_id===jt.category_id})),n=Je.filter((function(e){return(e.category_id||e.course_category_id)===jt.category_id})),r=st.filter((function(t){return e.some((function(e){var n;return e.category===jt.category_id&&(null===(n=e.students)||void 0===n?void 0:n.some((function(e){return e.student_id===t.student_id})))}))})),s=tt.filter((function(t){return e.some((function(e){return e.category===jt.category_id&&e.trainer_id===t.trainer_id}))}));else if(null!==wt&&void 0!==wt&&wt.student_id){var l=e.filter((function(e){var t;return null===(t=e.students)||void 0===t?void 0:t.some((function(e){return e.student_id===wt.student_id}))})),d=(0,i.Z)(new Set(l.map((function(e){return e.category})))),c=(0,i.Z)(new Set(l.map((function(e){return e.course}))));t=dt.filter((function(e){return d.includes(e.category_id)})),n=Je.filter((function(e){return c.includes(e.course_id)})),s=tt.filter((function(e){return l.some((function(t){return t.trainer_id===e.trainer_id}))}))}else if(null!==Tt&&void 0!==Tt&&Tt.trainer_id){var u=e.filter((function(e){return e.trainer_id===Tt.trainer_id})),h=(0,i.Z)(new Set(u.map((function(e){return e.category})))),x=(0,i.Z)(new Set(u.map((function(e){return e.course}))));t=dt.filter((function(e){return h.includes(e.category_id)})),n=Je.filter((function(e){return x.includes(e.course_id)})),r=st.filter((function(e){return u.some((function(t){var n;return null===(n=t.students)||void 0===n?void 0:n.some((function(t){return t.student_id===e.student_id}))}))}))}return{filteredCategories:t,filteredCourses:n,filteredBatches:e,filteredStudents:r,filteredTrainers:s}}),[dt,Je,ke,st,tt,jt,vt,wt,Tt,Ot,xt,Lt,ve,Ze]),Rt=Ht.filteredCategories,$t=Ht.filteredCourses,Kt=Ht.filteredBatches,Yt=Ht.filteredStudents,Ut=Ht.filteredTrainers,Gt=U.Ry().shape({title:U.Z_().required("Batch title is required").test("non-empty","Batch title cannot be empty",(function(e){return e&&e.trim().length>0})),slots:U.Rx().required("Number of slots is required").min(1,"Slots must be at least 1").integer("Slots must be a whole number"),start_date:U.Z_().required("Start date is required"),end_date:U.Z_().required("End date is required").test("end-date-after-start","End date must be after start date",(function(e){var t=this.parent.start_date;return!t||!e||new Date(e)>=new Date(t)})),start_time:U.Z_().required("Start time is required"),end_time:U.Z_().required("End time is required").test("end-time-after-start","End time must be after start time",(function(e){var t=this.parent,n=t.start_time,r=t.start_date,i=t.end_date;return!n||!e||(r!==i||e>n)})),course_id:U.Rx().required("Course is required"),trainer:U.Z_().required("Trainer is required"),students:U.IX().of(U.Rx()).test("students-within-slots","Number of students cannot exceed available slots",(function(e){var t=this.parent.slots;return!e||!t||e.length<=t}))}),Jt=(0,Y.TA)({initialValues:{title:"",slots:"",start_date:"",end_date:"",start_time:"",end_time:"",course_id:"",trainer:"",students:[]},validationSchema:Gt,enableReinitialize:!0,onSubmit:function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,We(!0),n=t.start_time?"".concat(t.start_time,":00"):"",r=t.end_time?"".concat(t.end_time,":00"):"",!Ke){e.next=17;break}return e.next=7,ie.Z.patch("".concat(G.t6,"api/batches/").concat(Ke.id),{title:t.title,slots:t.slots,start_date:(0,ee.p)(t.start_date),end_date:(0,ee.p)(t.end_date),start_time:n,end_time:r,course:t.course_id,trainer:t.trainer,students:t.students});case 7:if(!1!==(i=e.sent).data.success){e.next=13;break}return e.next=11,Q().fire({title:"Error!",text:i.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 11:e.next=15;break;case 13:return e.next=15,Q().fire({title:"Success!",text:i.data.message,icon:"success",showConfirmButton:!0,confirmButtonText:"OK"});case 15:e.next=27;break;case 17:return e.next=19,ie.Z.post("".concat(G.t6,"api/batches"),{title:t.title,slots:t.slots,start_date:(0,ee.p)(t.start_date),end_date:(0,ee.p)(t.end_date),start_time:n,end_time:r,course:t.course_id,trainer:t.trainer,students:t.students});case 19:if(!0!==(a=e.sent).data.success){e.next=25;break}return e.next=23,Q().fire({title:"Success!",text:a.data.message,icon:"success",showConfirmButton:!0,confirmButtonText:"OK"});case 23:e.next=27;break;case 25:return e.next=27,Q().fire({title:"Error!",text:a.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 27:Mt(),nn(),e.next=37;break;case 31:return e.prev=31,e.t0=e.catch(0),console.error("Error saving batch:",e.t0),e.next=36,Q().fire({title:"Error!",text:(null===(o=e.t0.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||e.t0.message||"Failed to save batch",icon:"error"});case 36:Fe(e.t0.message);case 37:return e.prev=37,We(!1),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[0,31,37,40]])})));return function(t){return e.apply(this,arguments)}}()}),Xt=function(e){Ye(e),Ne(!0)},Qt=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n){var i,a,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(i=n)?"activate":"deactivate",e.next=5,Q().fire({title:"".concat(i?"Activate":"Deactivate"," Batch"),text:"Are you sure you want to ".concat(a," this batch?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 5:if(e.sent.isConfirmed){e.next=8;break}return e.abrupt("return");case 8:return We(!0),e.next=11,ie.Z.patch("".concat(G.t6,"api/batches/").concat(t.id),{status:n});case 11:if(!1!==(o=e.sent).data.success){e.next=16;break}return e.next=15,Q().fire({title:"Error!",text:o.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 15:return e.abrupt("return");case 16:Be(ke.map((function(e){return e.id===o.data.data.batch_id?(0,r.Z)((0,r.Z)({},e),{},{status:i}):e}))),l=ke.map((function(e){return e.id===o.data.data.batch_id?(0,r.Z)((0,r.Z)({},e),{},{status:i}):e})),console.log("a",l),Q().fire({title:"Success",text:"Batch has been ".concat(a,"d successfully!"),icon:"success",showConfirmButton:!0}),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(0),console.error("Error changing status:",e.t0),Fe(e.t0.message),Q().fire("Error","Failed to change status. Please try again.","error");case 27:return e.prev=27,We(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[0,22,27,30]])})));return function(t,n){return e.apply(this,arguments)}}(),en=function(e){Ye(e),Jt.setValues({title:e.title,slots:e.slots,start_time:e.start_time,end_time:e.end_time,start_date:e.start_date,end_date:e.end_date,course_id:e.course,trainer:e.trainer_id,students:e.students.map((function(e){return e.student_id}))}),He(!0)},tn=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q().fire({title:"Delete Batch",text:"Are you sure you want to delete this batch?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 3:if(e.sent.isConfirmed){e.next=6;break}return e.abrupt("return");case 6:return We(!0),e.next=9,ie.Z.patch("".concat(G.t6,"api/batches/").concat(t.id,"/archive"));case 9:if(!1!==(n=e.sent).data.success){e.next=14;break}return e.next=13,Q().fire({title:"Error!",text:n.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 13:return e.abrupt("return");case 14:return Be(ke.filter((function(e){return e.id!==t.id}))),e.next=17,Q().fire({title:"Deleted!",text:"The batch has been deleted successfully.",icon:"success"});case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(0),console.error("Error deleting batch:",e.t0),e.next=24,Q().fire({title:"Error!",text:e.t0.message||"Failed to delete batch",icon:"error"});case 24:Fe(e.t0.message);case 25:return e.prev=25,We(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,19,25,28]])})));return function(t){return e.apply(this,arguments)}}(),nn=function(){Ne(!1),He(!1),At(!1),Ye(null),Jt.resetForm()};return Ie?(0,de.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,de.jsx)(c.Z,{})}):De?(0,de.jsxs)(d.Z,{sx:{py:4},children:[(0,de.jsxs)(u.Z,{color:"error",children:["Error: ",De]}),(0,de.jsx)(h.Z,{onClick:function(){return window.location.reload()},children:"Retry"})]}):(console.log("filteredBatches",Kt),(0,de.jsxs)(ae.Z,{sx:{py:4},children:[(0,de.jsx)(x.Z,{sx:{mb:{xs:-.5,sm:.5}},spacing:1,direction:"row",justifyContent:"flex-end",children:(0,de.jsxs)(f.Z,{variant:"contained",color:"white",size:"medium",onClick:function(){return me(-1)},sx:{width:100,gap:1,backgroundColor:"red",ml:{xs:2,sm:5},color:"white"},children:[(0,de.jsx)(L.Z,{}),"Back"]})}),(0,de.jsxs)(m.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",my:3,spacing:2,children:[(0,de.jsx)(m.ZP,{item:!0,xs:12,children:(0,de.jsx)(x.Z,{direction:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},spacing:2,width:"100%",children:(0,de.jsxs)(p.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2,width:{xs:"100%",sm:"auto"},"& > *":{minWidth:{xs:"calc(50% - 8px)",sm:200},flexGrow:1}},children:[(0,de.jsx)(v.Z,{size:"small",variant:"outlined",placeholder:"Search...",value:xt,onChange:function(e){return ft(e.target.value)},InputProps:{startAdornment:(0,de.jsx)(Z.Z,{position:"start",children:(0,de.jsx)(z.Z,{size:20})}),endAdornment:(0,de.jsx)(Z.Z,{position:"end",children:xt&&(0,de.jsx)(f.Z,{onClick:function(){ft("")},edge:"end",size:"small",children:(0,de.jsx)(V.Z,{size:20})})})},sx:{minWidth:{xs:"100%",sm:250},flexGrow:1}}),("admin"===Ce||"super_admin"===Ce)&&(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(_.Z,{id:"trainer_id",options:Ut||[],getOptionLabel:function(e){return e.full_name||""},value:Tt,onChange:function(e,t){var n;n=t,Et(null),Pt(n)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by tutor...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.trainer_id===t.trainer_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.trainer_id}),t.full_name)}}),(0,de.jsx)(_.Z,{id:"students_id",options:Yt||[],getOptionLabel:function(e){return e.full_name||""},value:wt,onChange:function(e,t){St(t),Et(null)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by student...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.student_id===t.student_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.student_id}),t.full_name)}}),(0,de.jsx)(_.Z,{id:"category_id",options:Rt||[],getOptionLabel:function(e){return e.category_name||""},value:jt,onChange:function(e,t){!function(e){yt(e),Zt(null),Et(null)}(t)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by category...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.category_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.category_id===t.category_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.category_id}),t.category_name)}}),(0,de.jsx)(_.Z,{id:"course_id",options:$t||[],getOptionLabel:function(e){return e.course_name||""},value:vt,onChange:function(e,t){Zt(t),Et(null)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by course...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.course_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.course_id===t.course_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.course_id}),t.course_name)}}),(0,de.jsx)(_.Z,{id:"batch_id",options:Kt||[],getOptionLabel:function(e){return e.title||""},value:Ot,onChange:function(e,t){Et(t)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by batch...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.batch_id===t.batch_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.batch_id}),t.title)}})]}),("super_admin"===Ce||"admin"===Ce)&&(0,de.jsx)(g.Z,{size:"small",sx:{minWidth:{xs:"100%",sm:180},flex:{xs:"1 1 100%",sm:"0 1 auto"},maxWidth:{sm:250}},children:(0,de.jsxs)(j.Z,{value:Lt,onChange:function(e){return zt(e.target.value)},endAdornment:"all"!==Lt&&(0,de.jsx)(Z.Z,{position:"end",sx:{mr:3},children:(0,de.jsx)(f.Z,{onClick:function(){zt("all")},edge:"end",size:"small",children:(0,de.jsx)(V.Z,{size:16})})}),children:[(0,de.jsx)(y.Z,{value:"all",children:"Select Status"}),(0,de.jsx)(y.Z,{value:"active",children:"Active"}),(0,de.jsx)(y.Z,{value:"inActive",children:"In active"})]})})]})})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,children:(0,de.jsx)(x.Z,{spacing:2,direction:"row",justifyContent:"flex-end",children:_e&&(0,de.jsx)(h.Z,{variant:"contained",startIcon:(0,de.jsx)(N.Z,{}),onClick:function(){Ye(null),Jt.resetForm(),He(!0)},children:"Add New Batch"})})})]}),0===Kt.length?(0,de.jsx)(u.Z,{variant:"body1",textAlign:"center",py:4,children:"No batches found. Create a new batch to get started."}):(0,de.jsx)(m.ZP,{container:!0,spacing:3,children:Kt.map((function(e){var t,n;return(0,de.jsx)(m.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,de.jsxs)(b.Z,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",borderLeft:"4px solid",borderLeftColor:null!==e&&void 0!==e&&e.status?"success.main":"error.main",borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},children:[(0,de.jsxs)(C.Z,{onClick:function(){return Xt(e)},sx:{flexGrow:1,pb:1},children:[(0,de.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",children:[(0,de.jsx)(p.Z,{children:(0,de.jsx)(u.Z,{variant:"h6",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.batch_name)})}),(0,de.jsxs)(x.Z,{direction:"row",children:[ge&&(0,de.jsx)(w.Z,{title:"Status",children:(0,de.jsx)(f.Z,{onClick:function(t){t.stopPropagation(),Qt(e,!(null!==e&&void 0!==e&&e.status))},sx:{mr:1},children:(0,de.jsx)(S.Z,{size:"medium",checked:null===e||void 0===e?void 0:e.status,color:null!==e&&void 0!==e&&e.status?"success":"error"})})}),ge&&(0,de.jsx)(w.Z,{title:"Edit",children:(0,de.jsx)(f.Z,{onClick:function(t){t.stopPropagation(),en(e)},children:(0,de.jsx)(q.Z,{size:"20"})})}),je&&(0,de.jsx)(w.Z,{title:"Delete",children:(0,de.jsx)(f.Z,{onClick:function(t){t.stopPropagation(),tn(e)},children:(0,de.jsx)(A.Z,{size:"20",color:"red"})})})]})]}),(0,de.jsx)(k.Z,{sx:{my:2}}),(0,de.jsxs)(x.Z,{spacing:1.5,children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,de.jsx)(M.Z,{size:"16"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Start Date"})]}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,se.o)(null===e||void 0===e?void 0:e.start_date,{includeTime:!1})})]}),(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,de.jsx)(H.Z,{size:"16"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Students"})]}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(null===e||void 0===e||null===(t=e.students)||void 0===t?void 0:t.length)||0})]}),(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,de.jsx)(R.Z,{size:"16"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Available Slots"})]}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(null===e||void 0===e?void 0:e.available_slots)||0})]}),(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,de.jsx)($.Z,{size:"16"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Schedules"})]}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(null===e||void 0===e||null===(n=e.schedules)||void 0===n?void 0:n.length)||0})]})]})]}),(0,de.jsx)(B.Z,{sx:{pt:0,pb:2,px:2},children:(0,de.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,de.jsx)(w.Z,{title:"View Details",children:(0,de.jsx)(f.Z,{size:"small",onClick:function(){return Xt(e)},sx:{border:1,borderColor:"divider",borderRadius:1},children:(0,de.jsx)(K.Z,{size:"18"})})}),(0,de.jsx)(h.Z,{size:"small",variant:"outlined",onClick:function(){return function(e){Ye(e),At(!0)}(e)},sx:{minWidth:"auto",px:2},children:"View Schedules"})]})})]})},null===e||void 0===e?void 0:e.id)}))}),(0,de.jsxs)(T.Z,{open:Ve,onClose:nn,maxWidth:"sm",fullWidth:!0,children:[(0,de.jsx)(P.Z,{sx:{p:2},children:(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,de.jsx)(u.Z,{variant:"h6",fontWeight:"600",children:"Batch Details"}),(0,de.jsx)(f.Z,{onClick:nn,children:(0,de.jsx)(V.Z,{})})]})}),(0,de.jsx)(I.Z,{dividers:!0,sx:{p:2},children:Ke&&(0,de.jsxs)(x.Z,{spacing:2,children:[(0,de.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsx)(b.Z,{variant:"outlined",children:(0,de.jsxs)(C.Z,{sx:{p:2},children:[(0,de.jsx)(u.Z,{variant:"subtitle1",fontWeight:"600",gutterBottom:!0,children:"Batch Information"}),(0,de.jsxs)(x.Z,{spacing:2,children:[(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Course"}),(0,de.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Ke.course_name||"Not assigned"})]}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Tutor"}),(0,de.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Ke.trainer_name||"Not assigned"})]}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Date Range"}),(0,de.jsxs)(u.Z,{variant:"body1",children:[(0,se.o)(Ke.start_date,{includeTime:!1})," \u2014"," ",(0,se.o)(Ke.end_date,{includeTime:!1})]})]}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Time Slot"}),(0,de.jsxs)(u.Z,{variant:"body1",children:[(0,se.o)(Ke.start_time,{timeOnly:!0})," -"," ",(0,se.o)(Ke.end_time,{timeOnly:!0})]})]}),(0,de.jsxs)(p.Z,{sx:{pt:1,borderTop:"1px solid",borderColor:"divider"},children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Created"}),(0,de.jsx)(u.Z,{variant:"body2",children:Ke.created_at?(0,se.o)(Ke.created_at,{includeTime:!0}):"-"})]})]})]})})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsx)(b.Z,{variant:"outlined",children:(0,de.jsxs)(C.Z,{sx:{p:1.5},children:[(0,de.jsx)(u.Z,{variant:"subtitle2",fontWeight:"600",gutterBottom:!0,children:"Weekly Schedule"}),(0,de.jsx)(x.Z,{spacing:.5,children:(null===(e=Ke.weekly_schedule)||void 0===e?void 0:e.length)>0?Ke.weekly_schedule.map((function(e,t){var n=e.split(" ")[0],r=e.split(" ").slice(1).join(" ").split(",")[0].split("&")[0].trim();return(0,de.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",fontSize:"0.98rem"},children:[(0,de.jsx)("span",{children:n}),(0,de.jsx)("span",{style:{color:"gray"},children:r})]},t)})):(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"No schedule"})})]})})})]}),(0,de.jsxs)(W.Z,{variant:"outlined",sx:{p:1.5,maxHeight:200,overflow:"auto"},children:[(0,de.jsxs)(u.Z,{variant:"subtitle2",fontWeight:"600",mb:1,children:["Students (",(null===(t=Ke.students)||void 0===t?void 0:t.length)||0,")"]}),(0,de.jsx)(m.ZP,{container:!0,spacing:1,children:(null===(n=Ke.students)||void 0===n?void 0:n.length)>0?Ke.students.map((function(e,t){return(0,de.jsx)(m.ZP,{item:!0,xs:6,children:(0,de.jsxs)(p.Z,{sx:{p:1,border:"1px solid #eee",borderRadius:1,backgroundColor:"#fafafa"},children:[(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,le.Z)(e.full_name)||"Unknown Student"}),(0,de.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["ID: ",e.registration_id]})]})},t)})):(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",sx:{p:2},children:"No students enrolled"})})]})]})}),(0,de.jsxs)(O.Z,{sx:{p:1},children:[(0,de.jsx)(h.Z,{onClick:nn,variant:"outlined",children:"Close"}),ge&&(0,de.jsx)(h.Z,{variant:"contained",onClick:function(){nn(),en(Ke)},children:"Edit Batch"})]})]}),(0,de.jsxs)(T.Z,{open:qt,onClose:nn,maxWidth:"md",fullWidth:!0,children:[(0,de.jsxs)(P.Z,{children:[(0,de.jsx)(u.Z,{variant:"h6",component:"div",fontWeight:"600",children:"Batch Schedule Details"}),(0,de.jsx)(f.Z,{onClick:nn,sx:{position:"absolute",right:8,top:8},children:(0,de.jsx)(V.Z,{})})]}),(0,de.jsx)(I.Z,{dividers:!0,children:Ke&&(0,de.jsxs)(de.Fragment,{children:[(0,de.jsxs)(p.Z,{mb:3,children:[(0,de.jsx)(u.Z,{variant:"h5",gutterBottom:!0,fontWeight:"600",children:Ke.title}),(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[(0,de.jsx)(E.Z,{label:Ke.status?"Active":"Inactive",variant:"outlined",size:"small"}),(0,de.jsxs)(u.Z,{variant:"body2",color:"text.secondary",children:["ID: ",Ke.batch_id]}),Ke.is_archived&&(0,de.jsx)(E.Z,{label:"Archived",variant:"outlined",color:"error",size:"small"})]})]}),(null===(X=Ke.course_trainer_assignments)||void 0===X?void 0:X[0])&&(0,de.jsxs)(p.Z,{mb:3,children:[(0,de.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"600",children:"Course & Tutor Information"}),(0,de.jsx)(W.Z,{variant:"outlined",sx:{p:2},children:(0,de.jsxs)(m.ZP,{container:!0,spacing:3,children:[(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Course"}),(0,de.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:(null===(ce=Je.find((function(e){return e.course_id===Ke.course_trainer_assignments[0].course_id})))||void 0===ce?void 0:ce.course_name)||"Not assigned"})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Tutor"}),(0,de.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Ke.course_trainer_assignments[0].trainer_name||"Not assigned"}),(0,de.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["ID: ",Ke.course_trainer_assignments[0].employee_id]})]})})]})})]}),(0,de.jsxs)(p.Z,{children:[(0,de.jsxs)(u.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"600",children:["Session Schedules (",(null===(ue=Ke.schedules)||void 0===ue?void 0:ue.length)||0,")"]}),(null===(he=Ke.schedules)||void 0===he?void 0:he.length)>0?(0,de.jsx)(m.ZP,{container:!0,spacing:2,children:Ke.schedules.map((function(e,t){return(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,de.jsxs)(W.Z,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,de.jsxs)(p.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,de.jsxs)(u.Z,{variant:"body2",fontWeight:"600",children:["Session ",t+1]}),(0,de.jsx)(E.Z,{label:(null===e||void 0===e?void 0:e.status)||"Scheduled",size:"small",variant:"outlined"})]}),(0,de.jsxs)(x.Z,{spacing:2,children:[(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Date"}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:null!==e&&void 0!==e&&e.scheduled_date?(0,se.o)(e.scheduled_date,{includeTime:!1}):"Not scheduled"})]}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Time"}),(0,de.jsxs)(p.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,se.o)(null===e||void 0===e?void 0:e.start_time,{timeOnly:!0})||"--:--"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"-"}),(0,de.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,se.o)(null===e||void 0===e?void 0:e.end_time,{timeOnly:!0})||"--:--"})]})]}),((null===e||void 0===e?void 0:e.room_number)||(null===e||void 0===e?void 0:e.topic))&&(0,de.jsx)(p.Z,{sx:{pt:1,borderTop:1,borderColor:"divider"},children:(0,de.jsxs)(x.Z,{spacing:1,children:[(null===e||void 0===e?void 0:e.room_number)&&(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Room"}),(0,de.jsx)(u.Z,{variant:"body2",children:e.room_number})]}),(null===e||void 0===e?void 0:e.topic)&&(0,de.jsxs)(p.Z,{children:[(0,de.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Topic"}),(0,de.jsx)(u.Z,{variant:"body2",children:e.topic})]})]})})]})]})},t)}))}):(0,de.jsxs)(W.Z,{variant:"outlined",sx:{p:4,textAlign:"center"},children:[(0,de.jsx)(u.Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Schedules Found"}),(0,de.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"There are no schedules available for this batch."})]})]})]})}),(0,de.jsx)(O.Z,{sx:{p:2},children:(0,de.jsx)(h.Z,{onClick:nn,variant:"outlined",children:"Close"})})]}),(0,de.jsxs)(T.Z,{open:Me,onClose:nn,maxWidth:"sm",fullWidth:!0,children:[(0,de.jsxs)(P.Z,{children:[Ke?"Edit Batch":"Add New Batch",(0,de.jsx)(f.Z,{"aria-label":"close",onClick:nn,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,de.jsx)(V.Z,{})})]}),(0,de.jsx)(I.Z,{children:(0,de.jsx)("form",{onSubmit:Jt.handleSubmit,children:(0,de.jsxs)(m.ZP,{container:!0,spacing:3,sx:{mt:1},children:[(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Batch Title*"}),(0,de.jsx)(v.Z,{fullWidth:!0,id:"title",name:"title",value:Jt.values.title,onChange:Jt.handleChange,error:Jt.touched.title&&Boolean(Jt.errors.title),helperText:Jt.touched.title&&Jt.errors.title,onBlur:Jt.handleBlur,placeholder:"Enter batch title"})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Slots*"}),(0,de.jsx)(v.Z,{fullWidth:!0,id:"slots",name:"slots",type:"number",value:Jt.values.slots,onChange:Jt.handleChange,error:Jt.touched.slots&&Boolean(Jt.errors.slots),helperText:Jt.touched.slots&&Jt.errors.slots,onBlur:Jt.handleBlur,placeholder:"Enter batch slots",inputProps:{min:1}})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Start Date*"}),(0,de.jsx)(te._,{dateAdapter:re.H,children:(0,de.jsx)(ne.M,{format:G.ZP.dateFormat,minDate:new Date,value:Jt.values.start_date?new Date(Jt.values.start_date):null,onChange:function(e){Jt.setFieldValue("start_date",e),Jt.values.end_date&&e>new Date(Jt.values.end_date)&&Jt.setFieldValue("end_date",null)},slotProps:{textField:{fullWidth:!0,name:"start_date",error:Jt.touched.start_date&&Boolean(Jt.errors.start_date),helperText:Jt.touched.start_date&&Jt.errors.start_date,onBlur:Jt.handleBlur,placeholder:"Select start date"}}})})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"End Date*"}),(0,de.jsx)(te._,{dateAdapter:re.H,children:(0,de.jsx)(ne.M,{format:G.ZP.dateFormat,minDate:Jt.values.start_date?new Date(Jt.values.start_date):new Date,value:Jt.values.end_date?new Date(Jt.values.end_date):null,onChange:function(e){Jt.setFieldValue("end_date",e)},slotProps:{textField:{fullWidth:!0,name:"end_date",error:Jt.touched.end_date&&Boolean(Jt.errors.end_date),helperText:Jt.touched.end_date&&Jt.errors.end_date,onBlur:Jt.handleBlur,placeholder:"Select end date"}}})})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Start Time*"}),(0,de.jsx)(v.Z,{fullWidth:!0,type:"time",id:"start_time",name:"start_time",value:Jt.values.start_time||"",onChange:Jt.handleChange,error:Jt.touched.start_time&&Boolean(Jt.errors.start_time),helperText:Jt.touched.start_time&&Jt.errors.start_time,onBlur:Jt.handleBlur,InputLabelProps:{shrink:!0},inputProps:{step:300}})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"End Time*"}),(0,de.jsx)(v.Z,{fullWidth:!0,type:"time",id:"end_time",name:"end_time",value:Jt.values.end_time||"",onChange:Jt.handleChange,error:Jt.touched.end_time&&Boolean(Jt.errors.end_time),helperText:Jt.touched.end_time&&Jt.errors.end_time,onBlur:Jt.handleBlur,InputLabelProps:{shrink:!0},inputProps:{step:300}})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Course*"}),(0,de.jsx)(_.Z,{options:Je||[],getOptionLabel:function(e){return e.course_name},value:(null===Je||void 0===Je?void 0:Je.find((function(e){return e.course_id===Jt.values.course_id})))||null,onChange:function(e,t){Jt.setFieldValue("course_id",t?t.course_id:"")},onBlur:function(){return Jt.setFieldTouched("course_id",!0)},renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select course",error:Jt.touched.course_id&&Boolean(Jt.errors.course_id),helperText:Jt.touched.course_id&&Jt.errors.course_id}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.course_name.toLowerCase().includes(e.inputValue.toLowerCase())||t.course_id.toString().includes(e.inputValue)}))},isOptionEqualToValue:function(e,t){return e.course_id===t.course_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.course_id}),t.course_name)}})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Tutor*"}),(0,de.jsx)(_.Z,{options:tt,getOptionLabel:function(e){return"".concat(e.full_name," (").concat(e.employee_id,")")},value:tt.find((function(e){return e.trainer_id===Jt.values.trainer}))||null,onChange:function(e,t){Jt.setFieldValue("trainer",t?t.trainer_id:""),Jt.setFieldValue("employee_id",t?t.employee_id:"")},onBlur:function(){Jt.setFieldTouched("trainer",!0),Jt.setFieldTouched("employee_id",!0)},renderInput:function(e){return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select trainer",error:Jt.touched.trainer&&Boolean(Jt.errors.trainer),helperText:Jt.touched.trainer&&Jt.errors.trainer}))},filterOptions:function(e,t){return e.filter((function(e){return e.full_name.toLowerCase().includes(t.inputValue.toLowerCase())||e.employee_id.toString().includes(t.inputValue)}))},isOptionEqualToValue:function(e,t){return e.trainer_id===t.trainer_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.trainer_id}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)("div",{children:t.full_name}),(0,de.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["ID: ",t.employee_id]})]}))}})]})}),(0,de.jsx)(m.ZP,{item:!0,xs:12,children:(0,de.jsxs)(x.Z,{spacing:1,children:[(0,de.jsx)(D.Z,{children:"Students"}),(0,de.jsx)(_.Z,{multiple:!0,options:st||[],getOptionLabel:function(e){return"".concat(e.full_name," (").concat(e.registration_id,")")},value:(null===st||void 0===st?void 0:st.filter((function(e){var t;return null===(t=Jt.values.students)||void 0===t?void 0:t.includes(e.student_id)})))||[],onChange:function(e,t){var n=t.map((function(e){return e.student_id}));Jt.setFieldValue("students",n)},onBlur:function(){return Jt.setFieldTouched("students",!0)},renderInput:function(e){var t;return(0,de.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select students",error:Jt.touched.students&&Boolean(Jt.errors.students),helperText:Jt.touched.students&&Jt.errors.students||"Selected: ".concat((null===(t=Jt.values.students)||void 0===t?void 0:t.length)||0,"/").concat(Jt.values.slots||0," slots")}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.full_name.toLowerCase().includes(e.inputValue.toLowerCase())||t.registration_id.toString().includes(e.inputValue)}))},isOptionEqualToValue:function(e,t){return e.student_id===t.student_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.student_id}),(0,de.jsxs)(p.Z,{children:[(0,de.jsx)("div",{children:t.full_name}),(0,de.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["Registration ID: ",t.registration_id]})]}))},renderTags:function(e,t){return e.map((function(e,n){return(0,l.createElement)(E.Z,(0,r.Z)((0,r.Z)({label:e.full_name},t({index:n})),{},{size:"small",key:e.student_id}))}))}}),(0,de.jsx)(F.Z,{children:(null===(xe=Jt.values.students)||void 0===xe?void 0:xe.length)>0?"Selected ".concat(Jt.values.students.length," out of ").concat(Jt.values.slots||0," slots"):"Select students for this batch (optional)"})]})})]})})}),(0,de.jsxs)(O.Z,{sx:{p:3,pt:2},children:[(0,de.jsx)(h.Z,{onClick:nn,variant:"outlined",children:"Cancel"}),(0,de.jsx)(h.Z,{onClick:Jt.submitForm,variant:"contained",disabled:Jt.isSubmitting,startIcon:Jt.isSubmitting?(0,de.jsx)(c.Z,{size:16}):null,children:Jt.isSubmitting?"Saving...":Ke?"Update Batch":"Create Batch"})]})]})]}))}},78045:function(e,t,n){n.d(t,{o:function(){return s}});var r=n(29439),i=n(23197),s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.includeTime,a=void 0===s||s,o=n.includeSeconds,l=void 0!==o&&o,d=n.timeOnly,c=void 0!==d&&d,u=n.useCurrentIfEmpty,h=void 0!==u&&u,x=n.fallback,f=void 0===x?"":x;if(e)if("string"===typeof e&&/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){var m=e.split(":").map(Number),p=(0,r.Z)(m,3),v=p[0],Z=p[1],_=p[2];(t=new Date).setHours(v,Z,_||0,0)}else t=e instanceof Date?e:new Date(e);else{if(!h)return f;t=new Date}if(isNaN(t.getTime()))return f;var g=function(e,t){var n=t.getHours(),r=n>=12,i={yyyy:t.getFullYear(),yy:String(t.getFullYear()).slice(-2),MM:String(t.getMonth()+1).padStart(2,"0"),M:t.getMonth()+1,dd:String(t.getDate()).padStart(2,"0"),d:t.getDate(),HH:String(n).padStart(2,"0"),H:n,hh:String(n%12||12).padStart(2,"0"),h:n%12||12,mm:String(t.getMinutes()).padStart(2,"0"),m:t.getMinutes(),ss:String(t.getSeconds()).padStart(2,"0"),s:t.getSeconds(),a:r?"PM":"AM"};return e.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g,(function(e){return i[e]||e}))};if(c){var j=i.ZP.timeFormat;return l||(j=(j=(j=j.replace(/:ss?/g,"")).replace(/(^|\s)ss?(\s|$)/g,"$1$2")).replace(/::/g,":").replace(/(\s|^):|:(\s|$)/g,"$1$2")),g(j,t)}if(a){var y=g(i.ZP.dateFormat,t),b=i.ZP.timeFormat;l||(b=(b=b.replace(/[:\\/]?ss?/g,"")).replace(/::/g,":").replace(/:$/,""));var C=g(b,t);return"".concat(y," ").concat(C)}return g(i.ZP.dateFormat,t)}},90838:function(e,t,n){n.d(t,{p:function(){return r}});var r=function(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[i,n,r].join("-")}}}]);
//# sourceMappingURL=6450.bca20642.chunk.js.map