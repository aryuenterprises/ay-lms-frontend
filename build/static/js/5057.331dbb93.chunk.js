"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[5057],{45057:function(e,t,n){n.r(t);var r=n(93433),i=n(61819),a=n(1413),s=n(15861),o=n(29439),c=n(72791),l=n(43513),d=n(697),u=n(20068),h=n(13400),p=n(61889),x=n(36314),f=n(94294),Z=n(5574),m=n(65661),g=n(39157),k=n(17133),b=n(48550),v=n(97123),j=n(62634),C=n(17139),P=n(60592),S=n(10163),w=n(36277),B=n(89731),y=n(8007),T=n(2314),_=n(66770),A=n.n(_),E=(n(86009),n(91587),n(69977),n(24034)),q=n(23197),M=n(21830),O=n.n(M),z=n(80184);t.default=function(){var e=(0,c.useState)(!1),t=(0,o.Z)(e,2),n=t[0],_=t[1],M=(0,c.useState)(null),D=(0,o.Z)(M,2),N=D[0],W=D[1],K=(0,c.useState)([]),L=(0,o.Z)(K,2),R=L[0],Y=L[1],F=(0,c.useState)(!0),U=(0,o.Z)(F,2),V=U[0],H=U[1],I=(0,c.useState)(""),G=(0,o.Z)(I,2),J=G[0],Q=G[1],X=(0,c.useCallback)((0,s.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.Z.get("".concat(q.t6,"api/cms"));case 3:t=e.sent,n=t.data.data.map((function(e,t){return(0,a.Z)((0,a.Z)({},e),{},{sno:t+1})})),Y(n),H(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Error fetching CMS data:",e.t0),H(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]);(0,c.useEffect)((function(){X()}),[X]);var $=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"});case 3:if(e.sent.isConfirmed){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,B.Z.patch("".concat(q.t6,"api/cms/").concat(t,"/archive"));case 8:Y(R.filter((function(e){return e.id!==t}))),O().fire({title:"Deleted!",text:"Your page has been deleted.",icon:"success",showConfirmButton:!0}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error deleting CMS page:",e.t0),O().fire({title:"Error!",text:"Failed to delete the page. Please try again.",icon:"error",confirmButtonText:"OK"});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){_(!1),ne.resetForm()},te=y.Ry().shape({title:y.Z_().required("Title is required"),link:y.Z_().required("Link is required")}),ne=(0,w.TA)({initialValues:{title:(null===N||void 0===N?void 0:N.title)||"",link:(null===N||void 0===N?void 0:N.link)||"",description:(null===N||void 0===N?void 0:N.description)||""},validationSchema:te,enableReinitialize:!0,onSubmit:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,n){var s,o,c,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.setSubmitting,e.prev=1,o=(0,a.Z)((0,a.Z)({},t),{},{description:J}),!N){e.next=10;break}return e.next=6,B.Z.patch("".concat(q.t6,"api/cms/").concat(N.id,"/"),o);case 6:!0===(c=e.sent).data.success&&(O().fire({title:"Success!",text:c.data.message,icon:"success",confirmButtonText:"OK"}),Y(R.map((function(e){return e.id===N.id?c.data.data:e})))),e.next=14;break;case 10:return e.next=12,B.Z.post("".concat(q.t6,"api/cms"),o);case 12:!0===(l=e.sent).data.success&&(O().fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonText:"OK"}),Y([].concat((0,r.Z)(R),[l.data.data])));case 14:ee(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error saving CMS page:",e.t0);case 20:return e.prev=20,s(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})));return function(t,n){return e.apply(this,arguments)}}()}),re=[{name:"S.No",selector:function(e){return e.sno},sortable:!0,width:"80px"},{name:"Title",selector:function(e){return e.title},sortable:!0},{name:"Link",selector:function(e){return(0,z.jsx)("a",{href:"".concat(e.link),target:"_blank",rel:"noopener noreferrer",children:e.link})},sortable:!0},{name:"Actions",cell:function(e){return(0,z.jsxs)(d.Z,{sx:{display:"flex",gap:1},children:[(0,z.jsx)(u.Z,{title:"Edit",children:(0,z.jsx)(h.Z,{variant:"contained",color:"info",onClick:function(){return W(t=e),Q(t.description||""),void _(!0);var t},children:(0,z.jsx)(j.Z,{})})}),(0,z.jsx)(u.Z,{title:"Delete",children:(0,z.jsx)(h.Z,{variant:"contained",color:"error",onClick:function(){return $(e.id)},children:(0,z.jsx)(C.Z,{})})})]})}}];return(0,z.jsxs)(E.Z,{children:[(0,z.jsx)(p.ZP,{item:!0,container:!0,justifyContent:"flex-end",mb:3,children:(0,z.jsx)(p.ZP,{item:!0,children:(0,z.jsx)(x.Z,{spacing:2,children:(0,z.jsx)(d.Z,{sx:{display:"flex"},children:(0,z.jsx)(f.Z,{color:"success",variant:"contained",startIcon:(0,z.jsx)(P.Z,{}),onClick:function(){W(null),Q(""),_(!0)},children:"Add New Page"})})})})}),(0,z.jsx)(l.ZP,{columns:re,data:R,pagination:!0,progressPending:V,paginationPerPage:10,paginationRowsPerPageOptions:[5,10,20,30],highlightOnHover:!0,responsive:!0}),(0,z.jsxs)(Z.Z,{maxWidth:"md",TransitionComponent:T.S,keepMounted:!0,fullWidth:!0,open:n,onClose:function(e,t){"backdropClick"!==t&&ee()},BackdropProps:{onClick:function(e){return e.stopPropagation()}},sx:{"& .MuiDialog-paper":{p:0},transition:"transform 225ms"},"aria-describedby":"alert-dialog-slide-description",children:[(0,z.jsxs)(m.Z,{className:"dialogTitle",children:[N?"Edit Page":"Add New Page",(0,z.jsx)(h.Z,{color:"dark",onClick:ee,edge:"end",size:"big","aria-label":"close",children:(0,z.jsx)(S.Z,{})})]}),(0,z.jsx)(g.Z,{children:(0,z.jsxs)("form",{onSubmit:ne.handleSubmit,children:[(0,z.jsxs)(p.ZP,{container:!0,spacing:2,sx:{mt:1},children:[(0,z.jsx)(p.ZP,{item:!0,xs:12,children:(0,z.jsxs)(x.Z,{spacing:1,children:[(0,z.jsx)(k.Z,{children:"Title *"}),(0,z.jsx)(b.Z,{fullWidth:!0,id:"title",name:"title",placeholder:"e.g., About Us, Privacy Policy",value:ne.values.title,onChange:ne.handleChange,onBlur:ne.handleBlur,error:ne.touched.title&&Boolean(ne.errors.title),helperText:ne.touched.title&&ne.errors.title})]})}),(0,z.jsx)(p.ZP,{item:!0,xs:12,children:(0,z.jsxs)(x.Z,{spacing:1,children:[(0,z.jsx)(k.Z,{children:"Link *"}),(0,z.jsx)(b.Z,{fullWidth:!0,id:"link",name:"link",placeholder:"e.g., https://example.com",value:ne.values.link,onChange:ne.handleChange,onBlur:ne.handleBlur,error:ne.touched.link&&Boolean(ne.errors.link),helperText:ne.touched.link&&ne.errors.link})]})}),(0,z.jsx)(p.ZP,{item:!0,xs:12,children:(0,z.jsxs)(x.Z,{spacing:1,children:[(0,z.jsx)(k.Z,{children:"Description *"}),(0,z.jsx)(d.Z,{sx:{height:300,mb:3},children:(0,z.jsx)(A(),{theme:"snow",value:J,onChange:Q,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike","blockquote"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["code-block"],["clean"]],clipboard:{matchVisual:!1}},formats:["header","font","size","bold","italic","underline","strike","blockquote","color","background","script","align","list","bullet","indent","link","image","video","code-block"],style:{height:"250px"}})})]})})]}),(0,z.jsxs)(v.Z,{sx:{mt:3},children:[(0,z.jsx)(f.Z,{onClick:ee,children:"Cancel"}),(0,z.jsx)(f.Z,{type:"submit",variant:"contained",disabled:ne.isSubmitting,children:N?"Update Page":"Add Page"})]})]})})]})]})}},69977:function(){}}]);
//# sourceMappingURL=5057.331dbb93.chunk.js.map