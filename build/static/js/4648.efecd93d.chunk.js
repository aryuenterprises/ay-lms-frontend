"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[4648],{74648:function(e,r,o){o.r(r),o.d(r,{default:function(){return oe}});var n=o(1413),t=o(93433),i=o(61819),s=o(15861),l=o(29439),c=o(72791),a=o(10266),d=o(13239),u=o(20890),x=o(94070),h=o(57621),p=o(39504),g=o(61889),m=o(36314),f=o(94721),v=o(697),Z=o(35527),j=o(94294),y=o(81918),b=o(20068),w=o(13400),C=o(37032),q=o(55200),T=o(49496),k=o(22840),S=o(77019),A=o(40638),z=o(3710),W=o(38820),B=o(5397),P=o(96739),I=o(85667),F=o(57689),E=o(36277),Q=o(8007),_=o(48550),V=o(68096),O=o(30829),R=o(58406),M=o(23786),D=o(17133),N=o(88970),L=o(85523),H=o(61419),Y=o(94454),U=o(80184),J=function(e){var r=e.formik,o=e.onCancel,n=e.loading,i=e.isEditing,s=(0,c.useState)(r.values.questionType||"input"),a=(0,l.Z)(s,2),d=a[0],h=a[1];(0,c.useEffect)((function(){h(r.values.questionType),"radio"!==r.values.questionType||r.values.options&&0!==r.values.options.length?"checkbox"!==r.values.questionType||r.values.options&&0!==r.values.options.length||r.setFieldValue("options",["",""]):r.setFieldValue("options",["Yes","No"])}),[r.values.questionType]);var p=function(e,o){var n=(0,t.Z)(r.values.options);n[e]=o,r.setFieldValue("options",n)},Z=function(){if(r.values.options.length<6){var e=[].concat((0,t.Z)(r.values.options),["Option ".concat(r.values.options.length+1)]);r.setFieldValue("options",e)}},y=function(e){if(r.values.options.length>2){var o=r.values.options.filter((function(r,o){return o!==e}));r.setFieldValue("options",o),r.values.correctAnswer===r.values.options[e]&&r.setFieldValue("correctAnswer","")}else r.setFieldError("options","At least 2 options are required")};return(0,U.jsxs)(v.Z,{sx:{p:3,border:"1px solid #e0e0e0",borderRadius:2,bgcolor:"white"},children:[(0,U.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,U.jsx)(u.Z,{variant:"h6",children:i?"Edit Question":"Add New Question"}),(0,U.jsx)(w.Z,{onClick:o,size:"small",children:(0,U.jsx)(P.Z,{})})]}),(0,U.jsx)("form",{onSubmit:r.handleSubmit,children:(0,U.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,U.jsx)(g.ZP,{item:!0,xs:12,children:(0,U.jsx)(_.Z,{fullWidth:!0,label:"Question Title *",name:"questionTitle",value:r.values.questionTitle,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.questionTitle&&Boolean(r.errors.questionTitle),helperText:r.touched.questionTitle&&r.errors.questionTitle,multiline:!0,rows:2,placeholder:"Enter your question here..."})}),(0,U.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,U.jsxs)(V.Z,{fullWidth:!0,error:r.touched.questionType&&Boolean(r.errors.questionType),children:[(0,U.jsx)(O.Z,{children:"Question Type *"}),(0,U.jsxs)(R.Z,{name:"questionType",value:r.values.questionType,onChange:function(e){var o=e.target.value;h(o),r.setFieldValue("questionType",o),r.setFieldValue("correctAnswer",""),r.setFieldValue("correctAnswers",[]),"radio"===o?r.setFieldValue("options",["Yes","No"]):"checkbox"===o?r.setFieldValue("options",["",""]):"input"===o&&r.setFieldValue("options",[])},onBlur:r.handleBlur,label:"Question Type *",children:[(0,U.jsx)(M.Z,{value:"input",children:"Text Input"}),(0,U.jsx)(M.Z,{value:"radio",children:"Single Choice (Radio)"}),(0,U.jsx)(M.Z,{value:"checkbox",children:"Multiple Choice"})]}),r.touched.questionType&&r.errors.questionType&&(0,U.jsx)(u.Z,{color:"error",variant:"caption",children:r.errors.questionType})]})}),(0,U.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,U.jsx)(_.Z,{fullWidth:!0,label:"Marks *",type:"number",name:"mark",value:r.values.mark,onChange:r.handleChange,onBlur:r.handleBlur,error:r.touched.mark&&Boolean(r.errors.mark),helperText:r.touched.mark&&r.errors.mark,InputProps:{inputProps:{min:.5,max:10,step:.5}}})}),(0,U.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,U.jsxs)(V.Z,{fullWidth:!0,error:r.touched.questionTime&&Boolean(r.errors.questionTime),children:[(0,U.jsx)(O.Z,{children:"Time Limit *"}),(0,U.jsxs)(R.Z,{name:"questionTime",value:r.values.questionTime,onChange:r.handleChange,onBlur:r.handleBlur,label:"Time Limit *",children:[(0,U.jsx)(M.Z,{value:10,children:"10 seconds"}),(0,U.jsx)(M.Z,{value:20,children:"20 seconds"}),(0,U.jsx)(M.Z,{value:30,children:"30 seconds"}),(0,U.jsx)(M.Z,{value:60,children:"60 seconds"}),(0,U.jsx)(M.Z,{value:90,children:"90 seconds"})]}),r.touched.questionTime&&r.errors.questionTime&&(0,U.jsx)(u.Z,{color:"error",variant:"caption",children:r.errors.questionTime})]})}),(0,U.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,U.jsx)(f.Z,{sx:{my:2}}),(0,U.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,children:"Answer Section"}),"input"===d&&(0,U.jsx)(_.Z,{fullWidth:!0,label:"Expected Answer (Optional)",name:"correctAnswer",value:r.values.correctAnswer||"",onChange:r.handleChange,onBlur:r.handleBlur,placeholder:"Enter the expected answer (for reference only)",helperText:"This answer is for reference and won't be shown to participants"}),"radio"===d&&(0,U.jsxs)(v.Z,{sx:{mt:2},children:[(0,U.jsxs)(V.Z,{component:"fieldset",fullWidth:!0,error:r.touched.correctAnswer&&Boolean(r.errors.correctAnswer),children:[(0,U.jsx)(D.Z,{component:"legend",children:"Select Correct Answer *"}),(0,U.jsx)(N.Z,{value:r.values.correctAnswer||"",onChange:function(e){return o=e.target.value,void r.setFieldValue("correctAnswer",o);var o},name:"correctAnswer",children:(0,U.jsx)(g.ZP,{container:!0,spacing:2,children:r.values.options&&r.values.options.map((function(e,o){var n,t;return(0,U.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,U.jsx)(L.Z,{value:e,control:(0,U.jsx)(H.Z,{}),label:(0,U.jsx)(_.Z,{fullWidth:!0,size:"small",value:e,onChange:function(e){return p(o,e.target.value)},onBlur:r.handleBlur,error:r.touched.options&&(null===(n=r.errors)||void 0===n||null===(t=n.options)||void 0===t?void 0:t[o])})}),r.values.options.length>2&&(0,U.jsx)(w.Z,{size:"small",onClick:function(){return y(o)},sx:{color:"error.main"},children:(0,U.jsx)(P.Z,{fontSize:"small"})})]})},o)}))})}),r.touched.correctAnswer&&r.errors.correctAnswer&&(0,U.jsx)(u.Z,{color:"error",variant:"caption",children:r.errors.correctAnswer})]}),r.values.options&&r.values.options.length<6&&(0,U.jsx)(j.Z,{onClick:Z,variant:"outlined",size:"small",sx:{mt:2},type:"button",children:"Add Option"}),r.touched.options&&r.errors.options&&"string"===typeof r.errors.options&&(0,U.jsx)(x.Z,{severity:"error",sx:{mt:1},children:r.errors.options})]}),"checkbox"===d&&(0,U.jsxs)(v.Z,{sx:{mt:2},children:[(0,U.jsxs)(V.Z,{component:"fieldset",fullWidth:!0,error:r.touched.correctAnswer&&Boolean(r.errors.correctAnswer),children:[(0,U.jsx)(D.Z,{component:"legend",children:"Select Correct Answer *"}),(0,U.jsx)(g.ZP,{container:!0,spacing:2,children:r.values.options&&r.values.options.map((function(e,o){var n,t;return(0,U.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,U.jsx)(L.Z,{control:(0,U.jsx)(Y.Z,{checked:r.values.correctAnswer===e,onChange:function(){return function(e){r.setFieldValue("correctAnswer",e)}(e)},name:"correctAnswer"}),label:(0,U.jsx)(_.Z,{fullWidth:!0,size:"small",value:e,onChange:function(e){return p(o,e.target.value)},onBlur:r.handleBlur,error:r.touched.options&&(null===(n=r.errors)||void 0===n||null===(t=n.options)||void 0===t?void 0:t[o])})}),r.values.options.length>2&&(0,U.jsx)(w.Z,{size:"small",onClick:function(){return y(o)},sx:{color:"error.main"},children:(0,U.jsx)(P.Z,{fontSize:"small"})})]})},o)}))}),r.touched.correctAnswer&&r.errors.correctAnswer&&(0,U.jsx)(u.Z,{color:"error",variant:"caption",children:r.errors.correctAnswer})]}),r.values.options&&r.values.options.length<6&&(0,U.jsx)(j.Z,{onClick:Z,variant:"outlined",size:"small",sx:{mt:2},type:"button",children:"Add Option"}),r.touched.options&&r.errors.options&&"string"===typeof r.errors.options&&(0,U.jsx)(x.Z,{severity:"error",sx:{mt:1},children:r.errors.options})]})]}),(0,U.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,U.jsx)(f.Z,{sx:{my:2}}),(0,U.jsxs)(m.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,U.jsx)(j.Z,{onClick:o,variant:"outlined",type:"button",disabled:n,children:"Cancel"}),(0,U.jsx)(j.Z,{type:"submit",variant:"contained",color:"primary",disabled:n,children:n?"Saving...":i?"Update Question":"Add Question"})]})]})]})})]})};J.defaultProps={loading:!1,isEditing:!1};var X=J,G=o(23197),K=o(89731),$=o(21830),ee=o.n($),re=o(95305),oe=function(){var e,r,o,_,V=(0,F.TH)(),O=(null===(e=V.state)||void 0===e?void 0:e.eventData)||null,R=(V.state||{}).eventId,M=(0,c.useState)(null),D=(0,l.Z)(M,2),N=D[0],L=D[1],H=(0,c.useState)([]),Y=(0,l.Z)(H,2),J=Y[0],$=Y[1],oe=(0,c.useState)(!1),ne=(0,l.Z)(oe,2),te=ne[0],ie=ne[1],se=(0,c.useState)(null),le=(0,l.Z)(se,2),ce=le[0],ae=le[1],de=(0,c.useState)(null),ue=(0,l.Z)(de,2),xe=ue[0],he=ue[1],pe=(0,c.useState)(!0),ge=(0,l.Z)(pe,2),me=ge[0],fe=ge[1],ve=(0,c.useState)(""),Ze=(0,l.Z)(ve,2),je=Ze[0],ye=Ze[1],be=(0,c.useState)(!1),we=(0,l.Z)(be,2),Ce=we[0],qe=we[1],Te=(0,c.useState)(!1),ke=(0,l.Z)(Te,2),Se=ke[0],Ae=ke[1],ze=Q.Ry({questionTitle:Q.Z_().required("Question title is required"),questionType:Q.Z_().oneOf(["radio","checkbox","input"],"Invalid question type"),options:Q.IX().when("questionType",{is:function(e){return"radio"===e||"checkbox"===e},then:function(e){return e.of(Q.Z_().required("Option cannot be empty")).min(2,"At least 2 options are required").test("unique-options","Options must be unique",(function(e){var r=e.filter((function(e){return e&&""!==e.trim()}));return new Set(r).size===r.length}))},otherwise:function(e){return e}}),correctAnswer:Q.Z_().when("questionType",{is:function(e){return"radio"===e||"checkbox"===e},then:function(e){return e.required("Correct answer is required")},otherwise:function(e){return e}}),mark:Q.Rx().min(.5,"Minimum mark is 0.5").max(10,"Maximum mark is 10").required("Mark is required"),questionTime:Q.Rx().min(10,"Minimum time is 10 seconds").max(90,"Maximum time is 90 seconds").required("Time is required")}),We=(0,E.TA)({initialValues:{questionTitle:"",questionType:"radio",options:["Yes","No"],correctAnswer:"",mark:1,questionTime:30},validationSchema:ze,enableReinitialize:!0,onSubmit:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r,o){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.resetForm,e.next=3,Pe(r,n);case 3:case"end":return e.stop()}}),e)})));return function(r,o){return e.apply(this,arguments)}}()});(0,c.useEffect)((function(){var e,r;ce&&(We.setValues({questionTitle:ce.questionTitle||ce.text||"",questionType:"poll"===ce.question_type?"checkbox":"radio",options:ce.options||(null===(e=ce.config)||void 0===e?void 0:e.choices)||["Yes","No"],correctAnswer:ce.correctAnswer||(null===(r=ce.config)||void 0===r?void 0:r.correct)||"",mark:ce.mark||ce.points||1,questionTime:ce.questionTime||ce.timeLimit||30}),ie(!0))}),[ce]),(0,c.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var r,o,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,fe(!0),qe(!0),L(O),e.next=6,K.Z.get("".concat(G.t6,"api/live-quiz/questions/"),{params:{room:R}});case 6:r=e.sent,$(r.data.data||[]),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching data:",e.t0),ye((null===(o=e.t0.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||"Failed to load event data");case 14:return e.prev=14,fe(!1),qe(!1),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[0,10,14,18]])})));return function(){return e.apply(this,arguments)}}();R&&e()}),[R,O]);var Be,Pe=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r,o){var s,l,c,a,d,u,x,h,p,g,m,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Ae(!0),ye(""),s=J.length>0?Math.max.apply(Math,(0,t.Z)(J.map((function(e){return e.order||0}))))+1:1,l={room:R,order:s,question_type:function(e){switch(e){case"radio":return"mcq";case"checkbox":return"poll";case"input":return"text";default:return e}}(r.questionType),text:r.questionTitle,timer_seconds:r.questionTime,mark:r.mark},c={},"radio"===r.questionType||"checkbox"===r.questionType?c={choices:r.options.filter((function(e){return e&&""!==e.trim()})),correct:r.correctAnswer}:"input"===r.questionType&&(c={correct:r.correctAnswer||""}),a=(0,n.Z)((0,n.Z)({},l),{},{config:c}),!ce){e.next=21;break}return a.order=ce.order||s-1,e.next=13,K.Z.patch("".concat(G.t6,"api/live-quiz/questions/").concat(ce.id,"/"),a);case 13:d=e.sent,u=d.data.data,x=J.map((function(e){return e.id===u.id?u:e})),$(x),ae(null),ie(!1),e.next=27;break;case 21:return e.next=23,K.Z.post("".concat(G.t6,"api/live-quiz/questions/"),a);case 23:d=e.sent,h=d.data.data,$([].concat((0,t.Z)(J),[h])),ie(!1);case 27:o(),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),console.error("Error saving question:",e.t0),ye((null===(p=e.t0.response)||void 0===p||null===(g=p.data)||void 0===g?void 0:g.message)||(null===(m=e.t0.response)||void 0===m||null===(f=m.data)||void 0===f?void 0:f.error)||"Failed to ".concat(ce?"update":"add"," question"));case 34:return e.prev=34,Ae(!1),e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[0,30,34,37]])})));return function(r,o){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(r){var o,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{qe(!0),ee().fire({title:"Delete Question",text:"Are you sure you want to delete this question?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(function(){var e=(0,s.Z)((0,i.Z)().mark((function e(o){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o.isConfirmed){e.next=5;break}return e.next=3,K.Z.delete("".concat(G.t6,"api/live-quiz/questions/").concat(r,"/"));case 3:(n=e.sent).data.success?(ee().fire("Deleted!","The question has been deleted.","success"),t=J.filter((function(e){return e.id!==r})),$(t),ye("")):ee().fire("Error!",n.data.message,"error");case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}catch(t){console.error("Error deleting question:",t),ye((null===(o=t.response)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.message)||"Failed to delete question")}finally{qe(!1)}case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return me?(0,U.jsx)(a.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,U.jsx)(d.Z,{})}):N?(0,U.jsxs)(a.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[je&&(0,U.jsx)(x.Z,{severity:"error",sx:{mb:3},onClose:function(){return ye("")},children:je}),(0,U.jsx)(h.Z,{sx:{mb:4,boxShadow:3},children:(0,U.jsx)(p.Z,{children:(0,U.jsxs)(g.ZP,{container:!0,spacing:3,children:[(0,U.jsxs)(g.ZP,{item:!0,xs:12,children:[(0,U.jsx)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:(0,U.jsx)(u.Z,{variant:"h4",component:"h1",fontWeight:"bold",children:N.eventName})}),(0,U.jsx)(f.Z,{sx:{my:2}})]}),(0,U.jsx)(g.ZP,{item:!0,xs:12,md:6,children:(0,U.jsxs)(m.Z,{spacing:2,children:[(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,U.jsx)(C.Z,{color:"primary"}),(0,U.jsxs)(u.Z,{variant:"h6",children:["Event Date: ",(Be=N.eventDate,new Date(Be).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"long"}))]})]}),(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,U.jsx)(q.Z,{color:"primary"}),(0,U.jsxs)(u.Z,{variant:"h6",children:["Participants: ",N.eventParticipantsCount]})]})]})}),(0,U.jsxs)(g.ZP,{item:!0,xs:12,md:6,children:[(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,U.jsx)(T.Z,{color:"primary"}),(0,U.jsx)(u.Z,{variant:"h6",children:"Description:"})]}),(0,U.jsx)(Z.Z,{variant:"outlined",sx:{p:2,bgcolor:"grey.50",maxHeight:150,overflow:"auto"},children:(0,U.jsx)(u.Z,{variant:"body1",children:N.eventDescription})})]})]})})}),(0,U.jsx)(h.Z,{sx:{boxShadow:3},children:(0,U.jsxs)(p.Z,{children:[(0,U.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,U.jsxs)(u.Z,{variant:"h5",fontWeight:"bold",children:["Event Questions (",J.length,")"]}),!te&&!ce&&(0,U.jsx)(j.Z,{variant:"contained",startIcon:(0,U.jsx)(k.Z,{}),onClick:function(){We.resetForm(),ae(null),ie(!0)},disabled:Ce,children:"Add Question"})]}),(0,U.jsx)(f.Z,{sx:{mb:3}}),(te||ce)&&(0,U.jsx)(v.Z,{sx:{mb:4},children:(0,U.jsx)(X,{formik:We,onCancel:function(){ie(!1),ae(null),We.resetForm()},loading:Se,isEditing:!!ce})}),!te&&!ce&&!xe&&(0,U.jsx)(U.Fragment,{children:Ce?(0,U.jsx)(v.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",border:"1px solid",borderColor:"grey.300",borderRadius:1,bgcolor:"white"},children:(0,U.jsx)(d.Z,{size:40,sx:{color:"grey.700"}})}):(0,U.jsx)(U.Fragment,{children:0===J.length?(0,U.jsxs)(Z.Z,{elevation:0,sx:{p:6,textAlign:"center",border:"2px dashed",borderColor:"grey.300",bgcolor:"white",borderRadius:2},children:[(0,U.jsx)(u.Z,{variant:"h6",gutterBottom:!0,sx:{fontWeight:500,color:"grey.800",mb:2},children:"No questions yet"}),(0,U.jsx)(u.Z,{variant:"body1",sx:{color:"grey.600",maxWidth:"400px",mx:"auto",lineHeight:1.6},children:"Start building your assessment by adding the first question"})]}):(0,U.jsxs)(v.Z,{sx:{width:"100%"},children:[(0,U.jsx)(v.Z,{sx:{mb:3,pb:2,borderBottom:"1px solid",borderColor:"grey.300"},children:(0,U.jsxs)(u.Z,{variant:"subtitle1",sx:{fontWeight:600,color:"grey.800"},children:[J.length," Question",1!==J.length?"s":""]})}),(0,U.jsx)(g.ZP,{container:!0,spacing:3,children:J.map((function(e,r){var o,n;return(0,U.jsx)(g.ZP,{item:!0,xs:12,sm:6,children:(0,U.jsx)(Z.Z,{elevation:0,sx:{p:0,height:"100%",border:"1px solid",borderColor:"grey.300",borderRadius:2,bgcolor:"white",overflow:"hidden",transition:"all 0.2s","&:hover":{borderColor:"grey.400",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"}},children:(0,U.jsx)(v.Z,{sx:{p:3,height:"100%"},children:(0,U.jsxs)(m.Z,{direction:"column",justifyContent:"space-between",sx:{height:"100%"},children:[(0,U.jsxs)(v.Z,{children:[(0,U.jsxs)(m.Z,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",spacing:1.5,sx:{mb:2},children:[(0,U.jsxs)(v.Z,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[(0,U.jsx)(u.Z,{variant:"body2",sx:{fontWeight:600,color:"grey.800",minWidth:"22px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",bgcolor:"grey.100",border:"1px solid",borderColor:"grey.300",flexShrink:0},children:r+1}),(0,U.jsx)(u.Z,{variant:"subtitle1",sx:{fontWeight:500,color:"grey.900",lineHeight:1.4,fontSize:{xs:"0.95rem",sm:"1rem"}},children:e.questionTitle||e.text})]}),(0,U.jsx)(v.Z,{sx:{alignSelf:"flex-end"},children:(0,U.jsx)(j.Z,{size:"small",variant:"outlined",color:"info",onClick:function(){return function(e){console.log("Starting question:",e);var r="wss://aylms.aryuprojects.com/ws/live-quiz/room/".concat(e.room,"/");ws.current=new WebSocket(r),ws.current.onmessage=function(r){var o=JSON.parse(r.data);"question_started"===o.type&&o.question_id===e.id&&dispatch((0,re.ss)({open:!0,message:"Question started",variant:"success",alert:{color:"success"},close:!1}))},ws.current.onerror=function(){dispatch((0,re.ss)({open:!0,message:"WebSocket connection error",variant:"error",alert:{color:"error"},close:!1}))}}(e)},children:"Start"})})]}),(0,U.jsxs)(m.Z,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",sx:{mb:2},children:[(0,U.jsx)(y.Z,{icon:(0,U.jsx)(S.Z,{sx:{fontSize:14}}),label:"".concat(e.questionTime||e.timer_seconds||30,"s"),size:"small",variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"grey.50",fontSize:{xs:"0.75rem",sm:"0.8125rem"},height:"28px","& .MuiChip-icon":{color:"grey.600",fontSize:"14px"}}}),(0,U.jsx)(y.Z,{icon:(0,U.jsx)(A.Z,{sx:{fontSize:14}}),label:"".concat(e.mark||e.points||1,"pt"),size:"small",variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"grey.50",fontSize:{xs:"0.75rem",sm:"0.8125rem"},height:"28px","& .MuiChip-icon":{color:"grey.600",fontSize:"14px"}}}),(0,U.jsx)(y.Z,{label:e.questionType||e.question_type||"radio",size:"small",variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"grey.50",fontSize:{xs:"0.75rem",sm:"0.8125rem"},height:"28px",textTransform:"capitalize"}})]}),(0,U.jsxs)(v.Z,{sx:{bgcolor:"grey.50",p:1.5,borderRadius:1,border:"1px solid",borderColor:"grey.200",mb:2},children:[(0,U.jsx)(u.Z,{variant:"body2",sx:{color:"grey.800",fontWeight:500,mb:.5,fontSize:{xs:"0.8125rem",sm:"0.875rem"}},children:"Options:"}),(0,U.jsx)(u.Z,{variant:"body2",sx:{color:"grey.700",mb:1.5,fontSize:{xs:"0.8125rem",sm:"0.875rem"},display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:null!==(o=e.config)&&void 0!==o&&o.choices&&Array.isArray(e.config.choices)?e.config.choices.join(", "):"No options specified"}),(0,U.jsx)(u.Z,{variant:"body2",sx:{color:"grey.800",fontWeight:500,mb:.5,fontSize:{xs:"0.8125rem",sm:"0.875rem"}},children:"Correct Answer:"}),(0,U.jsx)(u.Z,{variant:"body2",sx:{color:"grey.700",fontSize:{xs:"0.8125rem",sm:"0.875rem"},display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:(null===(n=e.config)||void 0===n?void 0:n.correct)||"Not specified"})]})]}),(0,U.jsxs)(m.Z,{direction:"row",justifyContent:"flex-end",spacing:1,sx:{pt:2,borderTop:"1px solid",borderColor:"grey.200"},children:[(0,U.jsx)(b.Z,{title:"View Question",children:(0,U.jsx)(w.Z,{size:"small",onClick:function(){return function(e){he(e)}(e)},sx:{color:"grey.700",border:"1px solid",borderColor:"grey.300","&:hover":{bgcolor:"grey.100",borderColor:"grey.400"},width:"36px",height:"36px"},children:(0,U.jsx)(z.Z,{fontSize:"small"})})}),(0,U.jsx)(b.Z,{title:"Edit Question",children:(0,U.jsx)(w.Z,{size:"small",onClick:function(){return function(e){ae(e)}(e)},sx:{color:"grey.700",border:"1px solid",borderColor:"grey.300","&:hover":{bgcolor:"grey.100",borderColor:"grey.400"},width:"36px",height:"36px"},children:(0,U.jsx)(W.Z,{fontSize:"small"})})}),(0,U.jsx)(b.Z,{title:"Delete Question",children:(0,U.jsx)(w.Z,{size:"small",onClick:function(){return Ie(e.id)},sx:{color:"grey.700",border:"1px solid",borderColor:"grey.300","&:hover":{bgcolor:"grey.100",borderColor:"grey.400"},width:"36px",height:"36px"},children:(0,U.jsx)(B.Z,{fontSize:"small"})})})]})]})})})},e.id)}))})]})})}),xe&&(0,U.jsxs)(Z.Z,{elevation:2,sx:{mt:3,border:"2px solid",borderColor:"grey.800",bgcolor:"white",overflow:"hidden"},children:[(0,U.jsx)(v.Z,{sx:{p:2,borderBottom:"1px solid",borderColor:"grey.300",bgcolor:"grey.50"},children:(0,U.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,U.jsx)(u.Z,{variant:"h6",sx:{fontWeight:600,color:"grey.900"},children:"Question Preview"}),(0,U.jsx)(w.Z,{onClick:function(){return he(null)},size:"small",sx:{color:"grey.700",border:"1px solid",borderColor:"grey.300","&:hover":{bgcolor:"grey.100",borderColor:"grey.400"}},children:(0,U.jsx)(P.Z,{fontSize:"small"})})]})}),(0,U.jsxs)(v.Z,{sx:{p:3},children:[(0,U.jsxs)(v.Z,{sx:{mb:3},children:[(0,U.jsx)(u.Z,{variant:"subtitle2",sx:{color:"grey.600",mb:1,fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Question"}),(0,U.jsx)(u.Z,{variant:"h6",sx:{fontWeight:500,color:"grey.900",lineHeight:1.5},children:xe.questionTitle||xe.text})]}),(0,U.jsxs)(v.Z,{sx:{mb:3},children:[(0,U.jsx)(u.Z,{variant:"subtitle2",sx:{color:"grey.600",mb:1.5,fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Details"}),(0,U.jsxs)(m.Z,{direction:"row",spacing:1.5,flexWrap:"wrap",children:[(0,U.jsx)(y.Z,{icon:(0,U.jsx)(S.Z,{sx:{fontSize:16}}),label:"".concat(xe.questionTime||xe.timeLimit||30," seconds"),variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"white",fontWeight:500,"& .MuiChip-icon":{color:"grey.600"}}}),(0,U.jsx)(y.Z,{icon:(0,U.jsx)(A.Z,{sx:{fontSize:16}}),label:"".concat(xe.mark||xe.points||1," point").concat(1!==(xe.mark||xe.points||1)?"s":""),variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"white",fontWeight:500,"& .MuiChip-icon":{color:"grey.600"}}}),(0,U.jsx)(y.Z,{label:xe.questionType||xe.question_type||"radio",variant:"outlined",sx:{borderColor:"grey.400",color:"grey.800",bgcolor:"white",fontWeight:500,textTransform:"capitalize"}})]})]}),(null===(r=xe.config)||void 0===r?void 0:r.choices)&&(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(u.Z,{variant:"subtitle2",sx:{color:"grey.600",mb:2,fontWeight:500,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Options"}),Array.isArray(null===(o=xe.config)||void 0===o?void 0:o.choices)&&xe.config.choices.length>0?(0,U.jsx)(g.ZP,{container:!0,spacing:2,children:xe.config.choices.map((function(e,r){return(0,U.jsx)(g.ZP,{item:!0,xs:12,sm:6,children:(0,U.jsxs)(Z.Z,{elevation:0,sx:{p:2.5,border:"2px solid",borderColor:e===xe.config.correct?"grey.900":"grey.200",bgcolor:e===xe.config.correct?"grey.50":"white",borderRadius:1.5,position:"relative"},children:[(0,U.jsxs)(m.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,U.jsx)(v.Z,{sx:{width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",bgcolor:e===xe.config.correct?"grey.900":"grey.100",border:"1px solid",borderColor:e===xe.config.correct?"grey.900":"grey.300",flexShrink:0},children:(0,U.jsxs)(u.Z,{variant:"body2",sx:{fontWeight:600,color:e===xe.config.correct?"white":"grey.800"},children:[String.fromCharCode(65+r)," "]})}),(0,U.jsx)(u.Z,{variant:"body1",sx:{color:e===xe.config.correct?"grey.900":"grey.700",fontWeight:e===xe.config.correct?500:400},children:e})]}),e===xe.config.correct&&(0,U.jsx)(v.Z,{sx:{position:"absolute",top:-10,right:10,bgcolor:"grey.900",color:"white",px:1.5,py:.5,borderRadius:"4px",fontSize:"0.75rem",fontWeight:600,letterSpacing:"0.5px"},children:"Correct"})]})},r)}))}):(0,U.jsx)(Z.Z,{elevation:0,sx:{p:3,border:"1px dashed",borderColor:"grey.300",bgcolor:"grey.50",textAlign:"center"},children:(0,U.jsx)(u.Z,{variant:"body1",sx:{color:"grey.600",fontStyle:"italic"},children:"No options specified"})})]}),(null===(_=xe.config)||void 0===_?void 0:_.correct)&&(0,U.jsx)(v.Z,{sx:{mt:3,pt:3,borderTop:"1px solid",borderColor:"grey.200"},children:(0,U.jsxs)(m.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,U.jsx)(I.Z,{sx:{color:"grey.800",fontSize:20}}),(0,U.jsxs)(v.Z,{children:[(0,U.jsx)(u.Z,{variant:"subtitle2",sx:{color:"grey.600",mb:.5,fontWeight:500},children:"Correct Answer"}),(0,U.jsx)(u.Z,{variant:"body1",sx:{color:"grey.900",fontWeight:500},children:xe.config.correct})]})]})})]})]})]})})]}):(0,U.jsx)(a.Z,{sx:{mt:4,textAlign:"center"},children:(0,U.jsx)(u.Z,{variant:"h6",color:"text.secondary",children:"Event not found"})})}}}]);
//# sourceMappingURL=4648.efecd93d.chunk.js.map