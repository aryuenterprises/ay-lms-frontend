"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[6450],{42664:function(e,t,n){n.d(t,{g:function(){return i}});var r=n(72791),i=function(){return{checkPermission:(0,r.useCallback)((function(e,t){try{var n,r=JSON.parse(localStorage.getItem("auth")||"[]"),i=null===r||void 0===r?void 0:r.loginType,s=(null===r||void 0===r||null===(n=r.user)||void 0===n?void 0:n.permissions)||[];return"super_admin"===i||"admin"===i&&s.some((function(n){return n.module_name===e&&n.allowed_actions.includes(t)}))}catch(a){return console.error("Error checking permission:",a),!1}}),[])}}},46450:function(e,t,n){n.r(t);var r=n(1413),i=n(93433),s=n(61819),a=n(15861),o=n(29439),l=n(72791),d=n(10266),c=n(13239),u=n(20890),h=n(94294),x=n(61889),f=n(36314),m=n(697),p=n(48550),v=n(63466),Z=n(13400),_=n(74982),g=n(68096),j=n(58406),y=n(23786),b=n(57621),C=n(39504),w=n(20068),S=n(9955),k=n(94721),B=n(72363),T=n(5574),P=n(65661),I=n(39157),W=n(35527),O=n(97123),E=n(81918),D=n(17133),F=n(47071),L=n(58536),z=n(10163),V=n(64370),N=n(62634),q=n(17139),A=n(16725),M=n(17875),H=n(71736),R=n(14471),$=n(49769),K=n(36277),Y=n(8007),U=n(23197),G=n(21830),J=n.n(G),X=n(90838),Q=n(71652),ee=n(41985),te=n(12649),ne=n(89731),re=n(78045),ie=n(24034),se=n(42664),ae=n(85680),oe=n(57689),le=n(80184);t.default=function(){var e,t,n,G,de,ce,ue,he,xe=(0,se.g)().checkPermission,fe=(0,oe.TH)().state||{},me=fe.N_UserId,pe=fe.N_UserType,ve=xe("Batch","create"),Ze=xe("Batch","update"),_e=xe("Batch","delete"),ge=JSON.parse(localStorage.getItem("auth")),je=ge.user.trainer_id||ge.user.student_id,ye=null===ge||void 0===ge?void 0:ge.loginType,be=(0,l.useState)([]),Ce=(0,o.Z)(be,2),we=Ce[0],Se=Ce[1],ke=(0,l.useState)(!0),Be=(0,o.Z)(ke,2),Te=Be[0],Pe=Be[1],Ie=(0,l.useState)(null),We=(0,o.Z)(Ie,2),Oe=We[0],Ee=We[1],De=(0,l.useState)(!1),Fe=(0,o.Z)(De,2),Le=Fe[0],ze=Fe[1],Ve=(0,l.useState)(!1),Ne=(0,o.Z)(Ve,2),qe=Ne[0],Ae=Ne[1],Me=(0,l.useState)(null),He=(0,o.Z)(Me,2),Re=He[0],$e=He[1],Ke=(0,l.useState)([]),Ye=(0,o.Z)(Ke,2),Ue=Ye[0],Ge=Ye[1],Je=(0,l.useState)([]),Xe=(0,o.Z)(Je,2),Qe=Xe[0],et=Xe[1],tt=(0,l.useState)([]),nt=(0,o.Z)(tt,2),rt=nt[0],it=nt[1],st=(0,l.useState)([]),at=(0,o.Z)(st,2),ot=at[0],lt=at[1],dt=(0,l.useState)(""),ct=(0,o.Z)(dt,2),ut=ct[0],ht=ct[1],xt=(0,l.useState)(""),ft=(0,o.Z)(xt,2),mt=ft[0],pt=ft[1],vt=(0,l.useState)(""),Zt=(0,o.Z)(vt,2),_t=Zt[0],gt=Zt[1],jt=(0,l.useState)(""),yt=(0,o.Z)(jt,2),bt=yt[0],Ct=yt[1],wt=(0,l.useState)(""),St=(0,o.Z)(wt,2),kt=St[0],Bt=St[1],Tt=(0,l.useState)(null),Pt=(0,o.Z)(Tt,2),It=Pt[0],Wt=Pt[1],Ot=(0,l.useState)("all"),Et=(0,o.Z)(Ot,2),Dt=Et[0],Ft=Et[1],Lt=(0,l.useState)(!1),zt=(0,o.Z)(Lt,2),Vt=zt[0],Nt=zt[1],qt=(0,l.useCallback)((0,a.Z)((0,s.Z)().mark((function e(){var t,n,r,i,a,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Pe(!0),t=null,"admin"!==ye&&"super_admin"!==ye){e.next=11;break}return e.next=6,Promise.all([ne.Z.get("api/batches")]);case 6:n=e.sent,r=(0,o.Z)(n,1),t=r[0],e.next=24;break;case 11:if("tutor"!==ye){e.next=19;break}return e.next=14,Promise.all([ne.Z.get("api/batches/trainer/".concat(je))]);case 14:i=e.sent,a=(0,o.Z)(i,1),t=a[0],e.next=24;break;case 19:return e.next=21,Promise.all([ne.Z.get("api/batches/student/".concat(je))]);case 21:l=e.sent,d=(0,o.Z)(l,1),t=d[0];case 24:Se(t.data.batches||[]),lt(t.data.active_category||t.data.categories||[]),Ge(t.data.active_course||t.data.active_courses||[]),et(t.data.active_trainer||[]),it(t.data.active_student||[]),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),Ee(e.t0.message),console.error("Error fetching data:",e.t0);case 35:return e.prev=35,Pe(!1),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[0,31,35,38]])}))),[ye,je]);(0,l.useEffect)((function(){qt()}),[qt]);var At=(0,l.useMemo)((function(){var e=we.filter((function(e){if(ut){var t,n,r,i,s,a,o=ut.toLowerCase();if(!((null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(o))||(null===(n=e.trainer_name)||void 0===n?void 0:n.toLowerCase().includes(o))||(null===(r=e.course_name)||void 0===r?void 0:r.toLowerCase().includes(o))||(null===(i=e.batch_name)||void 0===i?void 0:i.toLowerCase().includes(o))||(null===(s=e.batch_id)||void 0===s?void 0:s.toString().includes(ut))||(null===(a=e.students)||void 0===a?void 0:a.some((function(e){var t;return null===e||void 0===e||null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(o)})))))return!1}if(me&&pe)if("tutor"===pe){if(e.trainer_id!==me)return!1}else if("student"===pe){var l;if(!(null===(l=e.students)||void 0===l?void 0:l.some((function(e){return e.student_id===me}))))return!1}var d;if("all"!==Dt&&!("active"===Dt?e.status:!e.status))return!1;if(null!==It&&void 0!==It&&It.id){if(e.id!==It.id)return!1}else if(null!==mt&&void 0!==mt&&mt.course_id){if(!(e.course===mt.course_id))return!1}else if(null!==_t&&void 0!==_t&&_t.category_id){if(!(e.category===_t.category_id))return!1}if(null!==bt&&void 0!==bt&&bt.student_id&&!(null===(d=e.students)||void 0===d?void 0:d.some((function(e){return e.student_id===bt.student_id}))))return!1;return null===kt||void 0===kt||!kt.trainer_id||e.trainer_id===kt.trainer_id})),t=ot,n=Ue,r=rt,s=Qe;if(null!==It&&void 0!==It&&It.id){var a=we.find((function(e){return e.id===It.id}));a&&(t=ot.filter((function(e){return e.category_id===a.category})),n=Ue.filter((function(e){return e.course_id===a.course})),r=rt.filter((function(e){var t;return null===(t=a.students)||void 0===t?void 0:t.some((function(t){return t.student_id===e.student_id}))})),s=Qe.filter((function(e){return e.trainer_id===a.trainer_id})))}else if(null!==mt&&void 0!==mt&&mt.course_id){var o=Ue.find((function(e){return e.course_id===mt.course_id}));o&&(t=ot.filter((function(e){return e.category_id===(o.category_id||o.category)})),n=Ue.filter((function(e){return e.course_id===mt.course_id})),r=rt.filter((function(t){return e.some((function(e){var n;return e.course===mt.course_id&&(null===(n=e.students)||void 0===n?void 0:n.some((function(e){return e.student_id===t.student_id})))}))})),s=Qe.filter((function(t){return e.some((function(e){return e.course===mt.course_id&&e.trainer_id===t.trainer_id}))})))}else if(null!==_t&&void 0!==_t&&_t.category_id)t=ot.filter((function(e){return e.category_id===_t.category_id})),n=Ue.filter((function(e){return(e.category_id||e.course_category_id)===_t.category_id})),r=rt.filter((function(t){return e.some((function(e){var n;return e.category===_t.category_id&&(null===(n=e.students)||void 0===n?void 0:n.some((function(e){return e.student_id===t.student_id})))}))})),s=Qe.filter((function(t){return e.some((function(e){return e.category===_t.category_id&&e.trainer_id===t.trainer_id}))}));else if(null!==bt&&void 0!==bt&&bt.student_id){var l=e.filter((function(e){var t;return null===(t=e.students)||void 0===t?void 0:t.some((function(e){return e.student_id===bt.student_id}))})),d=(0,i.Z)(new Set(l.map((function(e){return e.category})))),c=(0,i.Z)(new Set(l.map((function(e){return e.course}))));t=ot.filter((function(e){return d.includes(e.category_id)})),n=Ue.filter((function(e){return c.includes(e.course_id)})),s=Qe.filter((function(e){return l.some((function(t){return t.trainer_id===e.trainer_id}))}))}else if(null!==kt&&void 0!==kt&&kt.trainer_id){var u=e.filter((function(e){return e.trainer_id===kt.trainer_id})),h=(0,i.Z)(new Set(u.map((function(e){return e.category})))),x=(0,i.Z)(new Set(u.map((function(e){return e.course}))));t=ot.filter((function(e){return h.includes(e.category_id)})),n=Ue.filter((function(e){return x.includes(e.course_id)})),r=rt.filter((function(e){return u.some((function(t){var n;return null===(n=t.students)||void 0===n?void 0:n.some((function(t){return t.student_id===e.student_id}))}))}))}return{filteredCategories:t,filteredCourses:n,filteredBatches:e,filteredStudents:r,filteredTrainers:s}}),[ot,Ue,we,rt,Qe,_t,mt,bt,kt,It,ut,Dt,me,pe]),Mt=At.filteredCategories,Ht=At.filteredCourses,Rt=At.filteredBatches,$t=At.filteredStudents,Kt=At.filteredTrainers,Yt=Y.Ry().shape({title:Y.Z_().required("Batch title is required").test("non-empty","Batch title cannot be empty",(function(e){return e&&e.trim().length>0})),slots:Y.Rx().required("Number of slots is required").min(1,"Slots must be at least 1").integer("Slots must be a whole number"),start_date:Y.Z_().required("Start date is required"),end_date:Y.Z_().required("End date is required").test("end-date-after-start","End date must be after start date",(function(e){var t=this.parent.start_date;return!t||!e||new Date(e)>=new Date(t)})),start_time:Y.Z_().required("Start time is required"),end_time:Y.Z_().required("End time is required").test("end-time-after-start","End time must be after start time",(function(e){var t=this.parent,n=t.start_time,r=t.start_date,i=t.end_date;return!n||!e||(r!==i||e>n)})),course_id:Y.Rx().required("Course is required"),trainer:Y.Z_().required("Trainer is required"),students:Y.IX().of(Y.Rx()).test("students-within-slots","Number of students cannot exceed available slots",(function(e){var t=this.parent.slots;return!e||!t||e.length<=t}))}),Ut=(0,K.TA)({initialValues:{title:"",slots:"",start_date:"",end_date:"",start_time:"",end_time:"",course_id:"",trainer:"",students:[]},validationSchema:Yt,enableReinitialize:!0,onSubmit:function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n,r,i,a,o,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Pe(!0),n=t.start_time?"".concat(t.start_time,":00"):"",r=t.end_time?"".concat(t.end_time,":00"):"",!Re){e.next=17;break}return e.next=7,ne.Z.patch("".concat(U.t6,"api/batches/").concat(Re.id),{title:t.title,slots:t.slots,start_date:(0,X.p)(t.start_date),end_date:(0,X.p)(t.end_date),start_time:n,end_time:r,course:t.course_id,trainer:t.trainer,students:t.students});case 7:if(!1!==(i=e.sent).data.success){e.next=13;break}return e.next=11,J().fire({title:"Error!",text:i.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 11:e.next=15;break;case 13:return e.next=15,J().fire({title:"Success!",text:i.data.message,icon:"success",showConfirmButton:!0,confirmButtonText:"OK"});case 15:e.next=27;break;case 17:return e.next=19,ne.Z.post("".concat(U.t6,"api/batches"),{title:t.title,slots:t.slots,start_date:(0,X.p)(t.start_date),end_date:(0,X.p)(t.end_date),start_time:n,end_time:r,course:t.course_id,trainer:t.trainer,students:t.students});case 19:if(!0!==(a=e.sent).data.success){e.next=25;break}return e.next=23,J().fire({title:"Success!",text:a.data.message,icon:"success",showConfirmButton:!0,confirmButtonText:"OK"});case 23:e.next=27;break;case 25:return e.next=27,J().fire({title:"Error!",text:a.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 27:qt(),en(),e.next=37;break;case 31:return e.prev=31,e.t0=e.catch(0),console.error("Error saving batch:",e.t0),e.next=36,J().fire({title:"Error!",text:(null===(o=e.t0.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||e.t0.message||"Failed to save batch",icon:"error"});case 36:Ee(e.t0.message);case 37:return e.prev=37,Pe(!1),e.finish(37);case 40:case"end":return e.stop()}}),e,null,[[0,31,37,40]])})));return function(t){return e.apply(this,arguments)}}()}),Gt=function(e){$e(e),ze(!0)},Jt=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n){var i,a,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(i=n)?"activate":"deactivate",e.next=5,J().fire({title:"".concat(i?"Activate":"Deactivate"," Batch"),text:"Are you sure you want to ".concat(a," this batch?"),icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 5:if(e.sent.isConfirmed){e.next=8;break}return e.abrupt("return");case 8:return Pe(!0),e.next=11,ne.Z.patch("".concat(U.t6,"api/batches/").concat(t.id),{status:n});case 11:if(!1!==(o=e.sent).data.success){e.next=16;break}return e.next=15,J().fire({title:"Error!",text:o.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 15:return e.abrupt("return");case 16:Se(we.map((function(e){return e.batch_id===t.batch_id?(0,r.Z)((0,r.Z)({},e),{},{status:i}):e}))),J().fire({title:"Success",text:"Batch has been ".concat(a,"d successfully!"),icon:"success",showConfirmButton:!0}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Error changing status:",e.t0),Ee(e.t0.message),J().fire("Error","Failed to change status. Please try again.","error");case 25:return e.prev=25,Pe(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,20,25,28]])})));return function(t,n){return e.apply(this,arguments)}}(),Xt=function(e){$e(e),Ut.setValues({title:e.title,slots:e.slots,start_time:e.start_time,end_time:e.end_time,start_date:e.start_date,end_date:e.end_date,course_id:e.course,trainer:e.trainer_id,students:e.students.map((function(e){return e.student_id}))}),Ae(!0)},Qt=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J().fire({title:"Delete Batch",text:"Are you sure you want to delete this batch?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});case 3:if(e.sent.isConfirmed){e.next=6;break}return e.abrupt("return");case 6:return Pe(!0),e.next=9,ne.Z.patch("".concat(U.t6,"api/batches/").concat(t.id,"/archive"));case 9:if(!1!==(n=e.sent).data.success){e.next=14;break}return e.next=13,J().fire({title:"Error!",text:n.data.message,icon:"error",showConfirmButton:!0,confirmButtonText:"OK"});case 13:return e.abrupt("return");case 14:return Se(we.filter((function(e){return e.id!==t.id}))),e.next=17,J().fire({title:"Deleted!",text:"The batch has been deleted successfully.",icon:"success"});case 17:e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(0),console.error("Error deleting batch:",e.t0),e.next=24,J().fire({title:"Error!",text:e.t0.message||"Failed to delete batch",icon:"error"});case 24:Ee(e.t0.message);case 25:return e.prev=25,Pe(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[0,19,25,28]])})));return function(t){return e.apply(this,arguments)}}(),en=function(){ze(!1),Ae(!1),Nt(!1),$e(null),Ut.resetForm()};return Te?(0,le.jsx)(d.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,le.jsx)(c.Z,{})}):Oe?(0,le.jsxs)(d.Z,{sx:{py:4},children:[(0,le.jsxs)(u.Z,{color:"error",children:["Error: ",Oe]}),(0,le.jsx)(h.Z,{onClick:function(){return window.location.reload()},children:"Retry"})]}):(0,le.jsxs)(ie.Z,{sx:{py:4},children:[(0,le.jsxs)(x.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",my:3,spacing:2,children:[(0,le.jsx)(x.ZP,{item:!0,xs:12,children:(0,le.jsx)(f.Z,{direction:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},spacing:2,width:"100%",children:(0,le.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2,width:{xs:"100%",sm:"auto"},"& > *":{minWidth:{xs:"calc(50% - 8px)",sm:200},flexGrow:1}},children:[(0,le.jsx)(p.Z,{size:"small",variant:"outlined",placeholder:"Search...",value:ut,onChange:function(e){return ht(e.target.value)},InputProps:{startAdornment:(0,le.jsx)(v.Z,{position:"start",children:(0,le.jsx)(L.Z,{size:20})}),endAdornment:(0,le.jsx)(v.Z,{position:"end",children:ut&&(0,le.jsx)(Z.Z,{onClick:function(){ht("")},edge:"end",size:"small",children:(0,le.jsx)(z.Z,{size:20})})})},sx:{minWidth:{xs:"100%",sm:250},flexGrow:1}}),("admin"===ye||"super_admin"===ye)&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(_.Z,{id:"trainer_id",options:Kt||[],getOptionLabel:function(e){return e.full_name||""},value:_t,onChange:function(e,t){var n;n=t,Wt(null),Bt(n)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by trainer...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.trainer_id===t.trainer_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.trainer_id}),t.full_name)}}),(0,le.jsx)(_.Z,{id:"students_id",options:$t||[],getOptionLabel:function(e){return e.full_name||""},value:_t,onChange:function(e,t){Ct(t),Wt(null)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by student...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.full_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.student_id===t.student_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.student_id}),t.full_name)}}),(0,le.jsx)(_.Z,{id:"category_id",options:Mt||[],getOptionLabel:function(e){return e.category_name||""},value:_t,onChange:function(e,t){!function(e){gt(e),pt(null),Wt(null)}(t)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by category...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.category_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.category_id===t.category_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.category_id}),t.category_name)}}),(0,le.jsx)(_.Z,{id:"course_id",options:Ht||[],getOptionLabel:function(e){return e.course_name||""},value:mt,onChange:function(e,t){pt(t),Wt(null)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by course...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.course_name)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.course_id===t.course_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.course_id}),t.course_name)}}),(0,le.jsx)(_.Z,{id:"batch_id",options:Rt||[],getOptionLabel:function(e){return e.title||""},value:It,onChange:function(e,t){Wt(t)},size:"small",sx:{minWidth:{xs:"100%",sm:180,md:200},flex:"1 1 auto"},className:"filter-item",renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Filter by batch...",InputProps:(0,r.Z)({},e.InputProps)}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){var n;return null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.inputValue.toLowerCase())}))},isOptionEqualToValue:function(e,t){return e.batch_id===t.batch_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.batch_id}),t.title)}})]}),("super_admin"===ye||"admin"===ye)&&(0,le.jsx)(g.Z,{size:"small",sx:{minWidth:{xs:"100%",sm:180},flex:{xs:"1 1 100%",sm:"0 1 auto"},maxWidth:{sm:250}},children:(0,le.jsxs)(j.Z,{value:Dt,onChange:function(e){return Ft(e.target.value)},endAdornment:"all"!==Dt&&(0,le.jsx)(v.Z,{position:"end",sx:{mr:3},children:(0,le.jsx)(Z.Z,{onClick:function(){Ft("all")},edge:"end",size:"small",children:(0,le.jsx)(z.Z,{size:16})})}),children:[(0,le.jsx)(y.Z,{value:"all",children:"Select Status"}),(0,le.jsx)(y.Z,{value:"active",children:"Active"}),(0,le.jsx)(y.Z,{value:"inActive",children:"In active"})]})})]})})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,children:(0,le.jsx)(f.Z,{spacing:2,direction:"row",justifyContent:"flex-end",children:ve&&(0,le.jsx)(h.Z,{variant:"contained",startIcon:(0,le.jsx)(V.Z,{}),onClick:function(){$e(null),Ut.resetForm(),Ae(!0)},children:"Add New Batch"})})})]}),0===Rt.length?(0,le.jsx)(u.Z,{variant:"body1",textAlign:"center",py:4,children:"No batches found. Create a new batch to get started."}):(0,le.jsx)(x.ZP,{container:!0,spacing:3,children:Rt.map((function(e){var t,n;return(0,le.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,le.jsxs)(b.Z,{sx:{cursor:"pointer",height:"100%",display:"flex",flexDirection:"column",borderLeft:"4px solid",borderLeftColor:null!==e&&void 0!==e&&e.status?"success.main":"error.main",borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"}},children:[(0,le.jsxs)(C.Z,{onClick:function(){return Gt(e)},sx:{flexGrow:1,pb:1},children:[(0,le.jsxs)(f.Z,{direction:"row",justifyContent:"space-between",children:[(0,le.jsx)(m.Z,{children:(0,le.jsx)(u.Z,{variant:"h6",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.batch_name)})}),(0,le.jsxs)(f.Z,{direction:"row",children:[Ze&&(0,le.jsx)(w.Z,{title:"Status",children:(0,le.jsx)(Z.Z,{onClick:function(t){t.stopPropagation(),Jt(e,!(null!==e&&void 0!==e&&e.status))},sx:{mr:1},children:(0,le.jsx)(S.Z,{size:"medium",checked:null===e||void 0===e?void 0:e.status,color:null!==e&&void 0!==e&&e.status?"success":"error"})})}),Ze&&(0,le.jsx)(w.Z,{title:"Edit",children:(0,le.jsx)(Z.Z,{onClick:function(t){t.stopPropagation(),Xt(e)},children:(0,le.jsx)(N.Z,{size:"20"})})}),_e&&(0,le.jsx)(w.Z,{title:"Delete",children:(0,le.jsx)(Z.Z,{onClick:function(t){t.stopPropagation(),Qt(e)},children:(0,le.jsx)(q.Z,{size:"20",color:"red"})})})]})]}),(0,le.jsx)(k.Z,{sx:{my:2}}),(0,le.jsxs)(f.Z,{spacing:1.5,children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(A.Z,{size:"16"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Start Date"})]}),(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,re.o)(null===e||void 0===e?void 0:e.start_date,{includeTime:!1})})]}),(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(M.Z,{size:"16"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Students"})]}),(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(null===e||void 0===e||null===(t=e.students)||void 0===t?void 0:t.length)||0})]}),(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(H.Z,{size:"16"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Available Slots"})]}),(0,le.jsxs)(u.Z,{variant:"body2",fontWeight:"500",children:[(null===e||void 0===e?void 0:e.available_slots)||0," / ",(null===e||void 0===e?void 0:e.slots)||0]})]}),(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(R.Z,{size:"16"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"Schedules"})]}),(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(null===e||void 0===e||null===(n=e.schedules)||void 0===n?void 0:n.length)||0})]})]})]}),(0,le.jsx)(B.Z,{sx:{pt:0,pb:2,px:2},children:(0,le.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,le.jsx)(w.Z,{title:"View Details",children:(0,le.jsx)(Z.Z,{size:"small",onClick:function(){return Gt(e)},sx:{border:1,borderColor:"divider",borderRadius:1},children:(0,le.jsx)($.Z,{size:"18"})})}),(0,le.jsx)(h.Z,{size:"small",variant:"outlined",onClick:function(){return function(e){$e(e),Nt(!0)}(e)},sx:{minWidth:"auto",px:2},children:"View Schedules"})]})})]})},null===e||void 0===e?void 0:e.id)}))}),(0,le.jsxs)(T.Z,{open:Le,onClose:en,maxWidth:"sm",fullWidth:!0,children:[(0,le.jsx)(P.Z,{sx:{p:2},children:(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsx)(u.Z,{variant:"h6",fontWeight:"600",children:"Batch Details"}),(0,le.jsx)(Z.Z,{onClick:en,children:(0,le.jsx)(z.Z,{})})]})}),(0,le.jsx)(I.Z,{dividers:!0,sx:{p:2},children:Re&&(0,le.jsxs)(f.Z,{spacing:2,children:[(0,le.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsx)(b.Z,{variant:"outlined",children:(0,le.jsxs)(C.Z,{sx:{p:2},children:[(0,le.jsx)(u.Z,{variant:"subtitle1",fontWeight:"600",gutterBottom:!0,children:"Batch Information"}),(0,le.jsxs)(f.Z,{spacing:2,children:[(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Course"}),(0,le.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Re.course_name||"Not assigned"})]}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Trainer"}),(0,le.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Re.trainer_name||"Not assigned"})]}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Date Range"}),(0,le.jsxs)(u.Z,{variant:"body1",children:[(0,re.o)(Re.start_date,{includeTime:!1})," \u2014"," ",(0,re.o)(Re.end_date,{includeTime:!1})]})]}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Time Slot"}),(0,le.jsxs)(u.Z,{variant:"body1",children:[(0,re.o)(Re.start_time,{timeOnly:!0})," -"," ",(0,re.o)(Re.end_time,{timeOnly:!0})]})]}),(0,le.jsxs)(m.Z,{sx:{pt:1,borderTop:"1px solid",borderColor:"divider"},children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Created"}),(0,le.jsx)(u.Z,{variant:"body2",children:Re.created_at?(0,re.o)(Re.created_at,{includeTime:!0}):"-"})]})]})]})})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsx)(b.Z,{variant:"outlined",children:(0,le.jsxs)(C.Z,{sx:{p:1.5},children:[(0,le.jsx)(u.Z,{variant:"subtitle2",fontWeight:"600",gutterBottom:!0,children:"Weekly Schedule"}),(0,le.jsx)(f.Z,{spacing:.5,children:(null===(e=Re.weekly_schedule)||void 0===e?void 0:e.length)>0?Re.weekly_schedule.map((function(e,t){var n=e.split(" ")[0],r=e.split(" ").slice(1).join(" ").split(",")[0].split("&")[0].trim();return(0,le.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",fontSize:"0.98rem"},children:[(0,le.jsx)("span",{children:n}),(0,le.jsx)("span",{style:{color:"gray"},children:r})]},t)})):(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"No schedule"})})]})})})]}),(0,le.jsxs)(W.Z,{variant:"outlined",sx:{p:1.5,maxHeight:200,overflow:"auto"},children:[(0,le.jsxs)(u.Z,{variant:"subtitle2",fontWeight:"600",mb:1,children:["Students (",(null===(t=Re.students)||void 0===t?void 0:t.length)||0,")"]}),(0,le.jsx)(x.ZP,{container:!0,spacing:1,children:(null===(n=Re.students)||void 0===n?void 0:n.length)>0?Re.students.map((function(e,t){return(0,le.jsx)(x.ZP,{item:!0,xs:6,children:(0,le.jsxs)(m.Z,{sx:{p:1,border:"1px solid #eee",borderRadius:1,backgroundColor:"#fafafa"},children:[(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,ae.Z)(e.full_name)||"Unknown Student"}),(0,le.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["ID: ",e.registration_id]})]})},t)})):(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",sx:{p:2},children:"No students enrolled"})})]})]})}),(0,le.jsxs)(O.Z,{sx:{p:1},children:[(0,le.jsx)(h.Z,{onClick:en,variant:"outlined",children:"Close"}),Ze&&(0,le.jsx)(h.Z,{variant:"contained",onClick:function(){en(),Xt(Re)},children:"Edit Batch"})]})]}),(0,le.jsxs)(T.Z,{open:Vt,onClose:en,maxWidth:"md",fullWidth:!0,children:[(0,le.jsxs)(P.Z,{children:[(0,le.jsx)(u.Z,{variant:"h6",component:"div",fontWeight:"600",children:"Batch Schedule Details"}),(0,le.jsx)(Z.Z,{onClick:en,sx:{position:"absolute",right:8,top:8},children:(0,le.jsx)(z.Z,{})})]}),(0,le.jsx)(I.Z,{dividers:!0,children:Re&&(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)(m.Z,{mb:3,children:[(0,le.jsx)(u.Z,{variant:"h5",gutterBottom:!0,fontWeight:"600",children:Re.title}),(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[(0,le.jsx)(E.Z,{label:Re.status?"Active":"Inactive",variant:"outlined",size:"small"}),(0,le.jsxs)(u.Z,{variant:"body2",color:"text.secondary",children:["ID: ",Re.batch_id]}),Re.is_archived&&(0,le.jsx)(E.Z,{label:"Archived",variant:"outlined",color:"error",size:"small"})]})]}),(null===(G=Re.course_trainer_assignments)||void 0===G?void 0:G[0])&&(0,le.jsxs)(m.Z,{mb:3,children:[(0,le.jsx)(u.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"600",children:"Course & Trainer Information"}),(0,le.jsx)(W.Z,{variant:"outlined",sx:{p:2},children:(0,le.jsxs)(x.ZP,{container:!0,spacing:3,children:[(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Course"}),(0,le.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:(null===(de=Ue.find((function(e){return e.course_id===Re.course_trainer_assignments[0].course_id})))||void 0===de?void 0:de.course_name)||"Not assigned"})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Trainer"}),(0,le.jsx)(u.Z,{variant:"body1",fontWeight:"500",children:Re.course_trainer_assignments[0].trainer_name||"Not assigned"}),(0,le.jsxs)(u.Z,{variant:"caption",color:"text.secondary",children:["ID: ",Re.course_trainer_assignments[0].employee_id]})]})})]})})]}),(0,le.jsxs)(m.Z,{children:[(0,le.jsxs)(u.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"600",children:["Session Schedules (",(null===(ce=Re.schedules)||void 0===ce?void 0:ce.length)||0,")"]}),(null===(ue=Re.schedules)||void 0===ue?void 0:ue.length)>0?(0,le.jsx)(x.ZP,{container:!0,spacing:2,children:Re.schedules.map((function(e,t){return(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,le.jsxs)(W.Z,{variant:"outlined",sx:{p:2,height:"100%"},children:[(0,le.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,le.jsxs)(u.Z,{variant:"body2",fontWeight:"600",children:["Session ",t+1]}),(0,le.jsx)(E.Z,{label:(null===e||void 0===e?void 0:e.status)||"Scheduled",size:"small",variant:"outlined"})]}),(0,le.jsxs)(f.Z,{spacing:2,children:[(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Date"}),(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:null!==e&&void 0!==e&&e.scheduled_date?(0,re.o)(e.scheduled_date,{includeTime:!1}):"Not scheduled"})]}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Time"}),(0,le.jsxs)(m.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,re.o)(null===e||void 0===e?void 0:e.start_time,{timeOnly:!0})||"--:--"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"-"}),(0,le.jsx)(u.Z,{variant:"body2",fontWeight:"500",children:(0,re.o)(null===e||void 0===e?void 0:e.end_time,{timeOnly:!0})||"--:--"})]})]}),((null===e||void 0===e?void 0:e.room_number)||(null===e||void 0===e?void 0:e.topic))&&(0,le.jsx)(m.Z,{sx:{pt:1,borderTop:1,borderColor:"divider"},children:(0,le.jsxs)(f.Z,{spacing:1,children:[(null===e||void 0===e?void 0:e.room_number)&&(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Room"}),(0,le.jsx)(u.Z,{variant:"body2",children:e.room_number})]}),(null===e||void 0===e?void 0:e.topic)&&(0,le.jsxs)(m.Z,{children:[(0,le.jsx)(u.Z,{variant:"caption",color:"text.secondary",display:"block",children:"Topic"}),(0,le.jsx)(u.Z,{variant:"body2",children:e.topic})]})]})})]})]})},t)}))}):(0,le.jsxs)(W.Z,{variant:"outlined",sx:{p:4,textAlign:"center"},children:[(0,le.jsx)(u.Z,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No Schedules Found"}),(0,le.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"There are no schedules available for this batch."})]})]})]})}),(0,le.jsx)(O.Z,{sx:{p:2},children:(0,le.jsx)(h.Z,{onClick:en,variant:"outlined",children:"Close"})})]}),(0,le.jsxs)(T.Z,{open:qe,onClose:en,maxWidth:"sm",fullWidth:!0,children:[(0,le.jsxs)(P.Z,{children:[Re?"Edit Batch":"Add New Batch",(0,le.jsx)(Z.Z,{"aria-label":"close",onClick:en,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:(0,le.jsx)(z.Z,{})})]}),(0,le.jsx)(I.Z,{children:(0,le.jsx)("form",{onSubmit:Ut.handleSubmit,children:(0,le.jsxs)(x.ZP,{container:!0,spacing:3,sx:{mt:1},children:[(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Batch Title*"}),(0,le.jsx)(p.Z,{fullWidth:!0,id:"title",name:"title",value:Ut.values.title,onChange:Ut.handleChange,error:Ut.touched.title&&Boolean(Ut.errors.title),helperText:Ut.touched.title&&Ut.errors.title,onBlur:Ut.handleBlur,placeholder:"Enter batch title"})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Slots*"}),(0,le.jsx)(p.Z,{fullWidth:!0,id:"slots",name:"slots",type:"number",value:Ut.values.slots,onChange:Ut.handleChange,error:Ut.touched.slots&&Boolean(Ut.errors.slots),helperText:Ut.touched.slots&&Ut.errors.slots,onBlur:Ut.handleBlur,placeholder:"Enter batch slots",inputProps:{min:1}})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Start Date*"}),(0,le.jsx)(Q._,{dateAdapter:te.H,children:(0,le.jsx)(ee.M,{format:U.ZP.dateFormat,minDate:new Date,value:Ut.values.start_date?new Date(Ut.values.start_date):null,onChange:function(e){Ut.setFieldValue("start_date",e),Ut.values.end_date&&e>new Date(Ut.values.end_date)&&Ut.setFieldValue("end_date",null)},slotProps:{textField:{fullWidth:!0,name:"start_date",error:Ut.touched.start_date&&Boolean(Ut.errors.start_date),helperText:Ut.touched.start_date&&Ut.errors.start_date,onBlur:Ut.handleBlur,placeholder:"Select start date"}}})})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"End Date*"}),(0,le.jsx)(Q._,{dateAdapter:te.H,children:(0,le.jsx)(ee.M,{format:U.ZP.dateFormat,minDate:Ut.values.start_date?new Date(Ut.values.start_date):new Date,value:Ut.values.end_date?new Date(Ut.values.end_date):null,onChange:function(e){Ut.setFieldValue("end_date",e)},slotProps:{textField:{fullWidth:!0,name:"end_date",error:Ut.touched.end_date&&Boolean(Ut.errors.end_date),helperText:Ut.touched.end_date&&Ut.errors.end_date,onBlur:Ut.handleBlur,placeholder:"Select end date"}}})})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Start Time*"}),(0,le.jsx)(p.Z,{fullWidth:!0,type:"time",id:"start_time",name:"start_time",value:Ut.values.start_time||"",onChange:Ut.handleChange,error:Ut.touched.start_time&&Boolean(Ut.errors.start_time),helperText:Ut.touched.start_time&&Ut.errors.start_time,onBlur:Ut.handleBlur,InputLabelProps:{shrink:!0},inputProps:{step:300}})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"End Time*"}),(0,le.jsx)(p.Z,{fullWidth:!0,type:"time",id:"end_time",name:"end_time",value:Ut.values.end_time||"",onChange:Ut.handleChange,error:Ut.touched.end_time&&Boolean(Ut.errors.end_time),helperText:Ut.touched.end_time&&Ut.errors.end_time,onBlur:Ut.handleBlur,InputLabelProps:{shrink:!0},inputProps:{step:300}})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Course*"}),(0,le.jsx)(_.Z,{options:Ue||[],getOptionLabel:function(e){return e.course_name},value:(null===Ue||void 0===Ue?void 0:Ue.find((function(e){return e.course_id===Ut.values.course_id})))||null,onChange:function(e,t){Ut.setFieldValue("course_id",t?t.course_id:"")},onBlur:function(){return Ut.setFieldTouched("course_id",!0)},renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select course",error:Ut.touched.course_id&&Boolean(Ut.errors.course_id),helperText:Ut.touched.course_id&&Ut.errors.course_id}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.course_name.toLowerCase().includes(e.inputValue.toLowerCase())||t.course_id.toString().includes(e.inputValue)}))},isOptionEqualToValue:function(e,t){return e.course_id===t.course_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.course_id}),t.course_name)}})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,md:6,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Trainer*"}),(0,le.jsx)(_.Z,{options:Qe,getOptionLabel:function(e){return"".concat(e.full_name," (").concat(e.employee_id,")")},value:Qe.find((function(e){return e.trainer_id===Ut.values.trainer}))||null,onChange:function(e,t){Ut.setFieldValue("trainer",t?t.trainer_id:""),Ut.setFieldValue("employee_id",t?t.employee_id:"")},onBlur:function(){Ut.setFieldTouched("trainer",!0),Ut.setFieldTouched("employee_id",!0)},renderInput:function(e){return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select trainer",error:Ut.touched.trainer&&Boolean(Ut.errors.trainer),helperText:Ut.touched.trainer&&Ut.errors.trainer}))},filterOptions:function(e,t){return e.filter((function(e){return e.full_name.toLowerCase().includes(t.inputValue.toLowerCase())||e.employee_id.toString().includes(t.inputValue)}))},isOptionEqualToValue:function(e,t){return e.trainer_id===t.trainer_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.trainer_id}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)("div",{children:t.full_name}),(0,le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["ID: ",t.employee_id]})]}))}})]})}),(0,le.jsx)(x.ZP,{item:!0,xs:12,children:(0,le.jsxs)(f.Z,{spacing:1,children:[(0,le.jsx)(D.Z,{children:"Students"}),(0,le.jsx)(_.Z,{multiple:!0,options:rt||[],getOptionLabel:function(e){return"".concat(e.full_name," (").concat(e.registration_id,")")},value:(null===rt||void 0===rt?void 0:rt.filter((function(e){var t;return null===(t=Ut.values.students)||void 0===t?void 0:t.includes(e.student_id)})))||[],onChange:function(e,t){var n=t.map((function(e){return e.student_id}));Ut.setFieldValue("students",n)},onBlur:function(){return Ut.setFieldTouched("students",!0)},renderInput:function(e){var t;return(0,le.jsx)(p.Z,(0,r.Z)((0,r.Z)({},e),{},{placeholder:"Select students",error:Ut.touched.students&&Boolean(Ut.errors.students),helperText:Ut.touched.students&&Ut.errors.students||"Selected: ".concat((null===(t=Ut.values.students)||void 0===t?void 0:t.length)||0,"/").concat(Ut.values.slots||0," slots")}))},filterOptions:function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.full_name.toLowerCase().includes(e.inputValue.toLowerCase())||t.registration_id.toString().includes(e.inputValue)}))},isOptionEqualToValue:function(e,t){return e.student_id===t.student_id},renderOption:function(e,t){return(0,l.createElement)("li",(0,r.Z)((0,r.Z)({},e),{},{key:t.student_id}),(0,le.jsxs)(m.Z,{children:[(0,le.jsx)("div",{children:t.full_name}),(0,le.jsxs)("div",{style:{fontSize:"0.8rem",color:"#666"},children:["Registration ID: ",t.registration_id]})]}))},renderTags:function(e,t){return e.map((function(e,n){return(0,l.createElement)(E.Z,(0,r.Z)((0,r.Z)({label:e.full_name},t({index:n})),{},{size:"small",key:e.student_id}))}))}}),(0,le.jsx)(F.Z,{children:(null===(he=Ut.values.students)||void 0===he?void 0:he.length)>0?"Selected ".concat(Ut.values.students.length," out of ").concat(Ut.values.slots||0," slots"):"Select students for this batch (optional)"})]})})]})})}),(0,le.jsxs)(O.Z,{sx:{p:3,pt:2},children:[(0,le.jsx)(h.Z,{onClick:en,variant:"outlined",children:"Cancel"}),(0,le.jsx)(h.Z,{onClick:Ut.submitForm,variant:"contained",disabled:Ut.isSubmitting,startIcon:Ut.isSubmitting?(0,le.jsx)(c.Z,{size:16}):null,children:Ut.isSubmitting?"Saving...":Re?"Update Batch":"Create Batch"})]})]})]})}},78045:function(e,t,n){n.d(t,{o:function(){return s}});var r=n(29439),i=n(23197),s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.includeTime,a=void 0===s||s,o=n.includeSeconds,l=void 0!==o&&o,d=n.timeOnly,c=void 0!==d&&d,u=n.useCurrentIfEmpty,h=void 0!==u&&u,x=n.fallback,f=void 0===x?"":x;if(e)if("string"===typeof e&&/^\d{1,2}:\d{2}(:\d{2})?$/.test(e)){var m=e.split(":").map(Number),p=(0,r.Z)(m,3),v=p[0],Z=p[1],_=p[2];(t=new Date).setHours(v,Z,_||0,0)}else t=e instanceof Date?e:new Date(e);else{if(!h)return f;t=new Date}if(isNaN(t.getTime()))return f;var g=function(e,t){var n=t.getHours(),r=n>=12,i={yyyy:t.getFullYear(),yy:String(t.getFullYear()).slice(-2),MM:String(t.getMonth()+1).padStart(2,"0"),M:t.getMonth()+1,dd:String(t.getDate()).padStart(2,"0"),d:t.getDate(),HH:String(n).padStart(2,"0"),H:n,hh:String(n%12||12).padStart(2,"0"),h:n%12||12,mm:String(t.getMinutes()).padStart(2,"0"),m:t.getMinutes(),ss:String(t.getSeconds()).padStart(2,"0"),s:t.getSeconds(),a:r?"PM":"AM"};return e.replace(/(yyyy|yy|MM|M|dd|d|HH|H|hh|h|mm|m|ss|s|a)/g,(function(e){return i[e]||e}))};if(c){var j=i.ZP.timeFormat;return l||(j=(j=(j=j.replace(/:ss?/g,"")).replace(/(^|\s)ss?(\s|$)/g,"$1$2")).replace(/::/g,":").replace(/(\s|^):|:(\s|$)/g,"$1$2")),g(j,t)}if(a){var y=g(i.ZP.dateFormat,t),b=i.ZP.timeFormat;l||(b=(b=b.replace(/[:\\/]?ss?/g,"")).replace(/::/g,":").replace(/:$/,""));var C=g(b,t);return"".concat(y," ").concat(C)}return g(i.ZP.dateFormat,t)}},90838:function(e,t,n){n.d(t,{p:function(){return r}});var r=function(e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[i,n,r].join("-")}}}]);
//# sourceMappingURL=6450.36ab4f8b.chunk.js.map