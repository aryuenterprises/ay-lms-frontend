"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[5542],{55542:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var s=o(4942),l=o(1413),n=o(29439),a=o(72791),i=o(93433),r=o(80184),c=function(e){var t=e.question,o=e.options,s=void 0===o?[]:o,l=e.pollId,c=e.onVote,u=e.selectedOption,d=e.disabled,p=void 0!==d&&d,v=e.showResults,h=void 0!==v&&v,f=e.userVotes,x=void 0===f?{}:f,m=e.allowMultiple,j=void 0!==m&&m,b=e.theme,N=void 0===b?"default":b,w=(0,a.useState)(void 0!==u?j?u:[u]:[]),g=(0,n.Z)(w,2),k=g[0],y=g[1],V=(0,a.useState)(-1),Z=(0,n.Z)(V,2),M=Z[0],S=Z[1],q=(0,a.useRef)([]),I=Object.values(x).reduce((function(e,t){return e+t}),0);(0,a.useEffect)((function(){M>=0&&q.current[M]&&q.current[M].focus()}),[M]);var C=function(e){var t;p||h||(t=j?k.includes(e)?k.filter((function(t){return t!==e})):[].concat((0,i.Z)(k),[e]):k.includes(e)?[]:[e],y(t),c&&c({pollId:l,selectedOption:j?t:t[0]||null,optionIndex:e}))};return(0,r.jsxs)("div",{className:"poll-container poll-theme-".concat(N," ").concat(h?"show-results":""),children:[(0,r.jsx)("h3",{className:"poll-question",children:t}),(0,r.jsx)("div",{className:"poll-options",role:"radiogroup","aria-label":t,children:s.map((function(e,t){var o=x[t]||0,n=function(e){return 0===I?0:Math.round(e/I*100)}(o),a=k.includes(t),i="".concat(l,"-option-").concat(t);return(0,r.jsx)("div",{ref:function(e){return q.current[t]=e},id:i,className:"poll-option ".concat(a?"selected":""," ").concat(p?"disabled":""),onClick:function(e){return function(e,t){e.preventDefault(),C(t)}(e,t)},onKeyDown:function(e){return function(e,t){if(!p&&!h)switch(e.key){case" ":case"Enter":e.preventDefault(),C(t);break;case"ArrowDown":e.preventDefault(),S((function(e){return e<s.length-1?e+1:0}));break;case"ArrowUp":e.preventDefault(),S((function(e){return e>0?e-1:s.length-1}));break;case"Home":e.preventDefault(),S(0);break;case"End":e.preventDefault(),S(s.length-1)}}(e,t)},onFocus:function(){return function(e){S(e)}(t)},tabIndex:p||h?-1:0,role:j?"checkbox":"radio","aria-checked":a,"aria-disabled":p||h,"aria-label":"".concat(e.text||e,". ").concat(h?"".concat(n,"% of votes"):""),"aria-describedby":h?"".concat(i,"-results"):void 0,children:(0,r.jsxs)("div",{className:"poll-option-content",children:[h&&(0,r.jsxs)("div",{className:"vertical-bar-container",children:[(0,r.jsx)("div",{className:"vertical-bar",style:{height:"".concat(n,"%")},"aria-hidden":"true"}),(0,r.jsxs)("span",{className:"vertical-percentage",children:[n,"%"]})]}),(0,r.jsxs)("div",{className:"poll-option-text",children:[!h&&(0,r.jsx)("span",{className:"poll-checkbox","aria-hidden":"true",children:j?(0,r.jsx)("div",{className:"custom-checkbox ".concat(a?"checked":""),children:a&&"\u2713"}):(0,r.jsx)("div",{className:"custom-radio ".concat(a?"checked":"")})}),(0,r.jsx)("span",{className:"option-label",children:e.text||e})]}),h&&(0,r.jsx)("div",{className:"poll-results",id:"".concat(i,"-results"),children:(0,r.jsx)("div",{className:"poll-stats",children:(0,r.jsxs)("span",{className:"votes",children:[o," vote",1!==o?"s":""]})})})]})},t)}))}),h&&I>0&&(0,r.jsxs)("div",{className:"poll-total-votes","aria-live":"polite","aria-atomic":"true",children:["Total votes: ",I]})]})},u=[{id:"poll1",question:"What's your favorite programming language?",options:[{text:"JavaScript",votes:45},{text:"Python",votes:35},{text:"Java",votes:20},{text:"C++",votes:15}],allowMultiple:!1,theme:"blue"},{id:"poll2",question:"Which frameworks do you use for web development?",options:[{text:"React",votes:60},{text:"Vue",votes:25},{text:"Angular",votes:30},{text:"Svelte",votes:10}],allowMultiple:!0,theme:"green"},{id:"poll3",question:"How many years of experience do you have?",options:[{text:"0-2 years",votes:30},{text:"2-5 years",votes:40},{text:"5-10 years",votes:20},{text:"10+ years",votes:10}],allowMultiple:!1,theme:"purple"}];var d=function(){var e=(0,a.useState)(u.reduce((function(e,t){return e[t.id]={question:t.question,options:t.options.map((function(e){return e.text})),userVotes:t.options.reduce((function(e,t,o){return e[o]=0,e}),{}),allowMultiple:t.allowMultiple,theme:t.theme},e}),{})),t=(0,n.Z)(e,2),o=t[0],i=t[1],d=(0,a.useState)({}),p=(0,n.Z)(d,2),v=p[0],h=p[1];(0,a.useEffect)((function(){var e=localStorage.getItem("pollVotes");e&&i(JSON.parse(e))}),[]),(0,a.useEffect)((function(){localStorage.setItem("pollVotes",JSON.stringify(o))}),[o]);var f=function(e){var t=e.pollId,o=e.selectedOption,n=e.optionIndex;i((function(e){var a=(0,l.Z)({},e[t]);return a.allowMultiple?(a.userVotes=(0,l.Z)({},a.userVotes),o.forEach((function(e){a.userVotes[e]=(a.userVotes[e]||0)+1}))):null!==o&&(a.userVotes[n]=(a.userVotes[n]||0)+1),(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({},t,a))}))};return(0,r.jsxs)("div",{className:"app",children:[(0,r.jsxs)("header",{className:"app-header",children:[(0,r.jsx)("h1",{children:"Voting Polls"}),(0,r.jsx)("p",{children:"Click on options to vote. Each poll can have different settings."})]}),(0,r.jsx)("main",{className:"polls-container",children:u.map((function(e){var t;return(0,r.jsxs)("div",{className:"poll-wrapper",children:[(0,r.jsx)(c,{pollId:e.id,question:e.question,options:e.options.map((function(e){return e.text})),onVote:f,userVotes:(null===(t=o[e.id])||void 0===t?void 0:t.userVotes)||{},showResults:v[e.id]||!1,allowMultiple:e.allowMultiple,theme:e.theme}),(0,r.jsxs)("div",{className:"poll-controls",children:[(0,r.jsx)("button",{className:"results-toggle-btn",onClick:function(){return t=e.id,void h((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,s.Z)({},t,!e[t]))}));var t},children:v[e.id]?"Hide Results":"Show Results"}),(0,r.jsx)("div",{className:"poll-type-badge",children:e.allowMultiple?"Multiple Choice":"Single Choice"})]})]},e.id)}))}),(0,r.jsx)("div",{className:"app-footer",children:(0,r.jsxs)("p",{children:["Total Polls: ",u.length]})})]})}}}]);
//# sourceMappingURL=5542.f827eed5.chunk.js.map