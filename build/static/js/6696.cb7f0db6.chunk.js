"use strict";(self.webpackChunkable_pro_material_react=self.webpackChunkable_pro_material_react||[]).push([[6696],{86696:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var r=n(61819),a=n(15861),i=n(29439),o=n(13967),s=n(61889),c=n(36314),l=n(20890),d=n(697),u=n(24034),p=n(56790),x=n(80184),h=function(e){var t=e.title,n=e.count,r=e.color,a=e.iconPrimary,i=e.percentage,o=e.trend;return(0,x.jsx)(u.Z,{contentSX:{p:2.5},sx:{cursor:"pointer",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-4px)",boxShadow:function(e){return"0 6px 16px 0 ".concat(e.palette.grey[400])}}},children:(0,x.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,x.jsx)(p.Z,{variant:"rounded",color:r,sx:{width:46,height:46,bgcolor:"".concat(r,".lighter"),color:"".concat(r,".dark"),borderRadius:2},children:a}),(0,x.jsx)(l.Z,{variant:"subtitle1",color:"text.secondary",sx:{fontWeight:500},children:t})]}),i&&(0,x.jsxs)(l.Z,{variant:"caption",sx:{color:"up"===o?"success.main":"error.main",display:"flex",alignItems:"center",fontWeight:500},children:["up"===o?"\u2191":"\u2193"," ",i,"%"]})]})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(d.Z,{sx:{p:2,backgroundColor:"background.default",borderRadius:2,border:function(e){return"1px solid ".concat(e.palette.divider)}},children:(0,x.jsx)(c.Z,{spacing:.5,children:(0,x.jsx)(l.Z,{variant:"h4",sx:{fontWeight:700,color:"text.primary"},children:n})})})})]})})};h.defaultProps={trend:"up"};var m=h,g=n(1413),v=n(72791),Z=n(95193),f=n(13496),b=n(23197),j=function(e){var t=e.attendance,n=(0,o.Z)(),r=(0,Z.Z)(n.breakpoints.down("sm")),a=n.palette.mode,s=n.palette.text.primary,c=n.palette.divider,l=n.palette.background.paper,d=(null===t||void 0===t?void 0:t.present)||0,u=(null===t||void 0===t?void 0:t.absent)||0,p=null===t||void 0===t?void 0:t.total,h=[d,u],m=(0,v.useState)({chart:{type:"donut",height:320},labels:["Present","Absent"],legend:{show:!1},dataLabels:{enabled:!1},plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total Days",color:s,formatter:function(){return p}}}}}}}),j=(0,i.Z)(m,2),y=j[0],k=j[1];return(0,v.useEffect)((function(){var e=n.palette.success.dark,t=n.palette.error.dark;k((function(n){return(0,g.Z)((0,g.Z)({},n),{},{colors:[e,t],xaxis:{labels:{style:{colors:[s,s]}}},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:c},stroke:{colors:[l]},theme:{mode:a===b.hY.DARK?"dark":"light"},plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total Days",color:s,formatter:function(){return p}}}}}}})}))}),[a,s,c,l,n,p]),(0,x.jsx)("div",{id:"chart",children:(0,x.jsx)(f.Z,{options:y,series:h,type:"donut",height:r?280:320})})},y=function(e){var t,n,r,a=e.attendance,i=JSON.parse(localStorage.getItem("auth"));return r="employer"===(null===i||void 0===i?void 0:i.loginType)?a.today:a,(0,x.jsx)(u.Z,{children:(0,x.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:(0,x.jsx)(l.Z,{variant:"h5",children:"Attendance"})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(j,{attendance:r})}),(0,x.jsxs)(s.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-between",children:[(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,x.jsx)(l.Z,{variant:"subtitle1",children:"Present Days : "}),(0,x.jsx)(l.Z,{color:"success.dark",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:500},children:null===(t=r)||void 0===t?void 0:t.present})]}),(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,x.jsx)(l.Z,{variant:"subtitle1",children:"Absent Days : "}),(0,x.jsx)(l.Z,{color:"error.dark",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:500},children:null===(n=r)||void 0===n?void 0:n.absent})]})]})]})})},k=n(45987),w=n(81918),_=n(5574),P=n(65661),C=n(39157),S=n(90493),I=n(97123),A=n(94294),D=n(31427),T=n(91388),E=n(54690),W=n(16386),M=n(89731),z=n(21830),L=n.n(z),R=["day","outsideCurrentMonth","selected","onDaySelect"];function N(e){var t,n,h,m=e.schedule,Z=void 0===m?[]:m,f=e.fetchData,j=(0,o.Z)(),y=(0,v.useState)(!1),z=(0,i.Z)(y,2),N=z[0],B=z[1],F=(0,v.useState)(null),O=(0,i.Z)(F,2),H=O[0],Y=O[1],J=(0,v.useState)(null),K=(0,i.Z)(J,2),X=K[0],q=K[1],U=(0,v.useState)(null),G=(0,i.Z)(U,2),Q=G[0],V=G[1],$=(0,v.useState)(!1),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],re=new Date,ae=JSON.parse(localStorage.getItem("auth")),ie=(null===ae||void 0===ae||null===(t=ae.user)||void 0===t?void 0:t.employee_id)||(null===ae||void 0===ae||null===(n=ae.user)||void 0===n?void 0:n.user_id),oe=null===ae||void 0===ae||null===(h=ae.user)||void 0===h?void 0:h.student_id,se=null===ae||void 0===ae?void 0:ae.loginType,ce=function(){return B(!1)},le=function(e){return e?Z.filter((function(t){try{var n=(0,T.Z)(t.scheduled_date);return(0,E.Z)(n,e)}catch(r){return console.error("Invalid date format:",t.scheduled_date),!1}})):[]},de=(0,v.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.get("".concat(b.t6,"api/settings"));case 3:(t=e.sent).data.success&&V(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching settings:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]);(0,v.useEffect)((function(){de()}),[de]);var ue=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X!==t.id){e.next=2;break}return e.abrupt("return");case 2:if(q(t.id),e.prev=3,null!==t.attendance_status&&!1!==t.attendance_status||"automatic_attendance"!==(null===Q||void 0===Q?void 0:Q.attendance_options)||!1!==te){e.next=8;break}if(!t.schedule_id){e.next=8;break}return e.next=8,pe(t);case 8:window.open("".concat(t.class_link),"_blank"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Failed to process class link:",e.t0);case 14:return e.prev=14,setTimeout((function(){return q(null)}),1e3),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i,o,s,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"student"!==se){e.next=10;break}if(a={date:re,student:oe,status:"Present",course:t.course_id,new_batch:t.batch_id,schedule_id:t.schedule_id},t.course_id&&t.batch_id){e.next=5;break}throw new Error("Course and Batch information is required");case 5:return e.next=7,M.Z.post("".concat(b.t6,"api/attendance/").concat(oe),a);case 7:n=e.sent,e.next=14;break;case 10:return i={date:re,trainer:ie,status:"Login",course:t.course_id,new_batch:t.batch_id,schedule_id:t.schedule_id},e.next=13,M.Z.post("".concat(b.t6,"api/trainer_attendance/").concat(ie),i);case 13:n=e.sent;case 14:if(!n.data.success){e.next=20;break}ce(),f(),ne(!0),e.next=21;break;case 20:throw new Error((null===(o=n)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.message)||"Error submitting attendance data");case 21:e.next=28;break;case 23:throw e.prev=23,e.t0=e.catch(0),console.error("Attendance marking failed:",e.t0),L().fire({title:"Error!",text:(null===(c=e.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||e.t0.message||"Error submitting attendance data. Please try again.",icon:"error",confirmButtonText:"OK"}),e.t0;case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={date:re,trainer:ie,status:"Logout",course:t.course_id,new_batch:t.batch_id,schedule_id:t.schedule_id},e.next=4,M.Z.post("".concat(b.t6,"api/trainer_attendance/").concat(ie),n);case 4:if(!(a=e.sent).data.success){e.next=10;break}ce(),f(),e.next=11;break;case 10:throw new Error((null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.message)||"Error submitting attendance data");case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Attendance marking failed:",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();function he(e,t){var n=t.split(" "),r=(0,i.Z)(n,2),a=r[0],o=r[1],s=a.split(":").map(Number),c=(0,i.Z)(s,2),l=c[0],d=c[1],u=l;return"PM"===o&&12!==l?u=l+12:"AM"===o&&12===l&&(u=0),new Date(e.getFullYear(),e.getMonth(),e.getDate(),u,d)}return(0,x.jsxs)(u.Z,{content:!1,sx:{height:"100%"},children:[(0,x.jsx)(d.Z,{sx:{p:3,pb:2},children:(0,x.jsx)(l.Z,{variant:"h5",children:"Class Schedule"})}),(0,x.jsx)(d.Z,{children:(0,x.jsx)(D.W,{onChange:function(e){Y(e),le(e).length>0&&B(!0)},slots:{day:function(e){var t,n=e.day,r=e.outsideCurrentMonth,a=e.selected,i=e.onDaySelect,o=(0,k.Z)(e,R),s=new Date,c=!!(t=n)&&Z.some((function(e){try{var n=(0,T.Z)(e.scheduled_date);return(0,E.Z)(n,t)}catch(r){return console.error("Invalid date format:",e.scheduled_date),!1}})),l=n<s&&!(0,E.Z)(n,s),u=(0,E.Z)(n,s),p=n>s&&!(0,E.Z)(n,s);return(0,x.jsx)(d.Z,(0,g.Z)((0,g.Z)({},o),{},{onClick:function(){i(n)},sx:(0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)((0,g.Z)({width:36,height:36,m:.5,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",cursor:"pointer"},l&&c&&{color:j.palette.text.disabled,backgroundColor:j.palette.secondary.lighter}),u&&{border:"2px solid ".concat(j.palette.primary.main),fontWeight:"bold"}),p&&c&&{backgroundColor:j.palette.success.light,"&:hover":{backgroundColor:j.palette.success.light}}),a&&{backgroundColor:"".concat(j.palette.primary.main," !important"),color:"".concat(j.palette.primary.contrastText," !important")}),r&&{color:j.palette.text.disabled}),children:n.getDate()}))}},sx:{"& .MuiPickersCalendarHeader-root":{marginBottom:1,paddingLeft:2},"& .MuiDayCalendar-weekContainer":{marginTop:1},"& .MuiDayCalendar-header":{"& > span":{margin:.5,paddingRight:2,width:36,textAlign:"center"}}}})}),(0,x.jsxs)(_.Z,{open:N,onClose:ce,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[(0,x.jsxs)(P.Z,{sx:{bgcolor:"background.paper",borderBottom:1,borderColor:"divider"},children:["Classes on ",H&&(0,W.Z)(H,"EEEE, MMMM d, yyyy")]}),(0,x.jsx)(C.Z,{dividers:!0,sx:{p:0},children:(0,x.jsx)(S.Z,{disablePadding:!0,children:H&&le(H).length>0?le(H).map((function(e,t,n){return function(e,t,n){var r,a={done:"success",upcoming:"warning",ongoing:"info",cancelled:"error",missed:"error",completed:"success"}[e.status]||"default",i=new Date,o=(0,T.Z)(e.scheduled_date),u=he(o,e.start_time),h=he(o,e.end_time),m=new Date(u.getTime()-12e5),g=h<i,v=i>=u&&i<=h,Z=i>=m&&i<=h,f=X===e.id;return(0,x.jsx)(d.Z,{sx:{p:1,borderBottom:t!==n.length-1?1:0,borderColor:"divider","&:hover":{backgroundColor:"action.hover"}},children:(0,x.jsxs)(s.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,x.jsx)(s.ZP,{item:!0,xs:1,children:(0,x.jsx)(p.Z,{variant:"rounded",color:"secondary",sx:{color:"secondary.contrastText",bgcolor:"secondary.main",fontWeight:600,width:40,height:40},children:null===(r=e.course_name)||void 0===r?void 0:r.charAt(0).toUpperCase()})}),(0,x.jsx)(s.ZP,{item:!0,xs:7,sm:8,children:(0,x.jsxs)(c.Z,{spacing:.5,children:[(0,x.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[(0,x.jsx)(l.Z,{variant:"subtitle1",component:"span",children:e.course_name}),(0,x.jsx)(l.Z,{variant:"caption",color:"text.secondary",sx:{ml:1},children:e.title})]}),e.class_link&&("tutor"===se&&"Login"!==e.attendance_status||"student"===se&&"present"!==e.attendance_status)&&(0,x.jsx)(l.Z,{variant:"caption",component:Z?"a":"span",onClick:!Z||f?void 0:function(){return ue(e)},sx:{color:Z?"primary.main":"text.disabled",textDecoration:"none","&:hover":{textDecoration:!Z||f?"none":"underline"},display:"inline-block",cursor:!Z||f?"default":"pointer",background:"none",border:"none",font:"inherit",outline:"inherit",opacity:f?.6:1},disabled:f,children:f?"Processing...":Z?"Join Meeting":"Class Not Available"}),"Login"===e.attendance_status&&(0,x.jsx)(l.Z,{variant:"caption",component:g||!v?"span":"a",onClick:g||!v||f?void 0:function(){return xe(e)},sx:{color:g?"text.disabled":v?"primary.main":"text.secondary",textDecoration:"none","&:hover":{textDecoration:g||!v||f?"none":"underline"},display:"inline-block",cursor:g||!v||f?"default":"pointer",background:"none",border:"none",font:"inherit",outline:"inherit",opacity:f?.6:1},disabled:f,children:f?"Processing...":"Logout"})]})}),(0,x.jsx)(s.ZP,{item:!0,xs:4,sm:3,children:(0,x.jsxs)(c.Z,{spacing:.5,alignItems:"flex-end",children:[(0,x.jsx)(l.Z,{variant:"caption",color:"text.secondary",children:"".concat(e.start_time," - ").concat(e.end_time)}),(0,x.jsx)(w.Z,{color:a,size:"small",label:e.status,sx:{textTransform:"capitalize"}})]})})]})},"".concat(e.course_name,"-").concat(t))}(e,t,n)})):(0,x.jsx)(d.Z,{sx:{p:3,textAlign:"center"},children:(0,x.jsx)(l.Z,{variant:"body1",color:"text.secondary",children:"No classes scheduled for this day"})})})}),(0,x.jsx)(I.Z,{sx:{bgcolor:"background.paper",borderTop:1,borderColor:"divider"},children:(0,x.jsx)(A.Z,{onClick:ce,variant:"contained",color:"primary",children:"Close"})})]})]})}N.defaultProps={schedule:[]};var B=function(e){var t=e.attendance,n=(0,o.Z)(),r=(0,Z.Z)(n.breakpoints.down("sm")),a=n.palette.mode,s=n.palette.text.primary,c=n.palette.divider,l=n.palette.background.paper,d=(null===t||void 0===t?void 0:t.present)||0,u=(null===t||void 0===t?void 0:t.absent)||0,p=null===t||void 0===t?void 0:t.total,h=[d,u],m=(0,v.useState)({chart:{type:"donut",height:320},labels:["Present","Absent"],legend:{show:!1},dataLabels:{enabled:!1}}),j=(0,i.Z)(m,2),y=j[0],k=j[1];return(0,v.useEffect)((function(){var e=n.palette.success.dark,t=n.palette.error.dark;k((function(n){return(0,g.Z)((0,g.Z)({},n),{},{colors:[e,t],xaxis:{labels:{style:{colors:[s,s]}}},yaxis:{labels:{style:{colors:[s]}}},grid:{borderColor:c},stroke:{colors:[l]},theme:{mode:a===b.hY.DARK?"dark":"light"}})}))}),[a,s,c,l,n,p]),(0,x.jsx)("div",{id:"chart",children:(0,x.jsx)(f.Z,{options:y,series:h,type:"donut",height:r?280:320})})},F=function(e){var t=e.attendance;return(0,x.jsx)(u.Z,{children:(0,x.jsxs)(s.ZP,{container:!0,spacing:3,children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,children:(0,x.jsx)(l.Z,{variant:"h5",children:"Today Attendance"})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:0===(null===t||void 0===t?void 0:t.present)&&0===(null===t||void 0===t?void 0:t.absent)?(0,x.jsx)(l.Z,{variant:"subtitle1",children:"No Data Available"}):(0,x.jsx)(B,{attendance:t})}),(0,x.jsxs)(s.ZP,{item:!0,xs:12,display:"flex",justifyContent:"space-between",children:[(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,x.jsx)(l.Z,{variant:"subtitle1",children:"Present : "}),(0,x.jsx)(l.Z,{color:"success.dark",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:500},children:null===t||void 0===t?void 0:t.present})]}),(0,x.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:1,children:[(0,x.jsx)(l.Z,{variant:"subtitle1",children:"Absent : "}),(0,x.jsx)(l.Z,{color:"error.dark",sx:{display:"flex",alignItems:"center",gap:.5,fontWeight:500},children:null===t||void 0===t?void 0:t.absent})]})]})]})})},O=n(63266),H=n(17875),Y=n(56416);var J=n.p+"static/media/5.5cc916f12705648b5d5e01dc30573b2c.svg",K=n(62588),X=function(){var e,t=(0,o.Z)(),n=JSON.parse(localStorage.getItem("auth")),r=null===n||void 0===n?void 0:n.loginType,a=null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.company_name;return(0,x.jsx)(u.Z,{border:!1,sx:{color:"common.white",position:"relative",overflow:"hidden","&:after":{content:'""',backgroundImage:"url(".concat(J,")"),position:"absolute",top:0,left:0,right:0,bottom:0,backgroundSize:"cover",backgroundPosition:"bottom right",backgroundRepeat:"no-repeat",zIndex:1}},children:(0,x.jsxs)(s.ZP,{container:!0,children:[(0,x.jsx)(s.ZP,{item:!0,md:8,sm:8,xs:12,children:(0,x.jsxs)(c.Z,{spacing:2,sx:{padding:3,position:"relative",zIndex:2},children:[(0,x.jsxs)(l.Z,{variant:"h2",color:t.palette.background.paper,children:["Welcome to the Aryu Academy ","student"===r?"Student":"tutor"===r?"Tutor":"Admin"," Portal"]}),"employer"===r&&a&&(0,x.jsxs)(l.Z,{variant:"h5",color:t.palette.background.paper,children:[a," + Aryu Academy = A winning learning experience! Let's make every lesson count."]}),(0,x.jsx)(l.Z,{variant:"h6",color:t.palette.background.paper,children:"Your personalized dashboard for accessing course materials, class schedules, assignments, progress tracking, and academic tools."})]})}),(0,x.jsx)(s.ZP,{item:!0,sm:4,xs:12,sx:{display:{xs:"none",sm:"initial"},alignSelf:"center"},children:(0,x.jsx)(c.Z,{sx:{position:"relative",pr:{sm:3,md:8},zIndex:2},justifyContent:"center",alignItems:"flex-end",children:(0,x.jsx)("img",{src:K.Z,alt:"Welcome",width:"200px"})})})]})})};var q=n.p+"static/media/img-dropbox-bg.6ba2c2ca8a6b9fcae659ba52c9b040a7.svg",U=n(43226),G=function(e){var t=e.announcements,n=void 0===t?[]:t,r=(0,o.Z)(),a=(0,Z.Z)(r.breakpoints.down("sm")),p=(0,Z.Z)(r.breakpoints.between("sm","md")),h=(0,v.useState)(0),m=(0,i.Z)(h,2),g=m[0],f=m[1],j=(0,v.useState)(!0),y=(0,i.Z)(j,2),k=y[0],w=y[1],_=n.filter((function(e){return e&&"object"===typeof e})).map((function(e){return{id:e.id||"",title:e.title||"No title",content:e.content||"No content available",background:e.background_pic_url||q,content_pic:e.content_pic_url||q}}));(0,v.useEffect)((function(){if(!(_.length<=1)){var e=setInterval((function(){w(!1),setTimeout((function(){f((function(e){return(e+1)%_.length})),w(!0)}),500)}),5e3);return function(){return clearInterval(e)}}}),[_.length]);var P=function(e){var t=e.text;return(0,x.jsx)(d.Z,{component:"span",sx:{"& img.emoji":{width:"1em !important",height:"1em !important",margin:"0 0.05em !important",verticalAlign:"-0.1em !important"}},dangerouslySetInnerHTML:{__html:U.Z.parse(t)}})};if(0===_.length)return null;var C=_[g];return(0,x.jsx)(s.ZP,{container:!0,spacing:3,children:(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(u.Z,{border:!1,sx:{color:"common.white",bgcolor:r.palette.mode===b.hY.DARK?"secondary.900":"secondary.800","&:after":{content:'""',backgroundImage:"url(".concat(C.background,")"),position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1,opacity:.9,backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},opacity:k?1:0,transition:"opacity 0.5s ease-in-out",minHeight:a?200:300,position:"relative",overflow:"hidden"},children:(0,x.jsx)(s.ZP,{container:!0,alignItems:"center",sx:{height:"100%"},children:(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(c.Z,{spacing:2,sx:{p:a?2:3,zIndex:2,position:"relative",width:"100%",textAlign:a?"center":"left",ml:a?0:p?"10%":"15%",mr:a?0:"5%"},children:(0,x.jsx)(l.Z,{variant:a?"body1":"h6",sx:{lineHeight:1.4,wordBreak:"break-word",whiteSpace:"pre-line"},children:(0,x.jsx)(P,{text:C.content})})})})})})})})};G.defaultProps={announcements:[]};var Q=G,V=n(71652),$=n(12649),ee=n(74213),te=n(99145),ne=function(e){var t=e.color,n=void 0===t?"primary":t,r=e.title,a=e.count,i=e.percentage,o=e.isLoss;return(0,x.jsx)(u.Z,{contentSX:{p:2.25},children:(0,x.jsxs)(c.Z,{spacing:.5,children:[(0,x.jsxs)(l.Z,{variant:"h5",color:"inherit",children:["Course : ",r]}),(0,x.jsxs)(s.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",children:[(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsxs)(l.Z,{variant:"h6",color:"secondary",children:["Total Assignments : ",a]})}),i&&(0,x.jsx)(s.ZP,{item:!0,children:(0,x.jsx)(w.Z,{variant:"combined",color:n,icon:(0,x.jsxs)(x.Fragment,{children:[!o&&(0,x.jsx)(ee.Z,{style:{transform:"rotate(45deg)"}}),o&&(0,x.jsx)(te.Z,{style:{transform:"rotate(45deg)"}})]}),label:"".concat(i,"%"),sx:{ml:1.25,pl:1,borderRadius:1},size:"small"})})]})]})})},re=n(57689),ae=n(80310),ie=function(){var e=(0,o.Z)(),t=(0,re.s0)(),n=JSON.parse(localStorage.getItem("auth")),c=null===n||void 0===n?void 0:n.loginType,l=(0,v.useState)(null),d=(0,i.Z)(l,2),u=d[0],p=d[1],h=(0,v.useState)([]),g=(0,i.Z)(h,2),Z=g[0],f=g[1],j=(0,v.useState)({}),k=(0,i.Z)(j,2),w=k[0],_=k[1],P=(0,v.useState)([]),C=(0,i.Z)(P,2),S=C[0],I=C[1],A=(0,v.useState)([]),D=(0,i.Z)(A,2),T=D[0],E=D[1],W=(0,v.useCallback)((0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.Z.get("".concat(b.t6,"api/dashboard"));case 2:t=e.sent,n=t.data,p(null===n||void 0===n?void 0:n.data),f((null===n||void 0===n?void 0:n.schedule)||[]),_((null===n||void 0===n?void 0:n.attendance)||{}),I(null===n||void 0===n?void 0:n.announcements),"employer"===c?(_(n.data.attendance),I(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.announcements),E(n.data.assignments.per_courses)):"admin"!==c&&"super_admin"!==c||I(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.announcements);case 9:case"end":return e.stop()}}),e)}))),[c]);return(0,v.useEffect)((function(){W()}),[W]),(0,x.jsxs)(s.ZP,{container:!0,rowSpacing:4.5,columnSpacing:2.75,children:[("student"===c||"tutor"===c||"employer"===c||"admin"===c||"super_admin"===c)&&(null!==S&&void 0!==S&&S.some((function(e){return"all"===e.audience||"student"===c&&"students"===e.audience||"tutor"===c&&"trainers"===e.audience||"employer"===c&&"students"===e.audience}))?(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(Q,{announcements:S.filter((function(e){return"all"===e.audience||"student"===c&&"students"===e.audience||"tutor"===c&&"trainers"===e.audience||"employer"===c&&"students"===e.audience}))})}):(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(X,{})})),("admin"===c||"super_admin"===c)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:6,lg:3,onClick:function(){return t("/batch")},children:(0,x.jsx)(m,{title:"Total Active Batches",count:null===u||void 0===u?void 0:u.active_batches,color:"error",iconPrimary:(0,x.jsx)(ae.Z,{})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:6,lg:3,onClick:function(){return t("/course")},children:(0,x.jsx)(m,{title:"Total Active Courses",count:null===u||void 0===u?void 0:u.active_courses,color:"warning",iconPrimary:(0,x.jsx)(O.Z,{color:e.palette.warning.dark})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:6,lg:3,onClick:function(){return t("/students")},children:(0,x.jsx)(m,{title:"Total Active Students",count:null===u||void 0===u?void 0:u.active_students,color:"success",iconPrimary:(0,x.jsx)(H.Z,{color:e.palette.success.dark})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:6,lg:3,onClick:function(){return t("/tutors")},children:(0,x.jsx)(m,{title:"Total Active Tutors",count:null===u||void 0===u?void 0:u.active_trainers,color:"error",iconPrimary:(0,x.jsx)(Y.Z,{color:e.palette.error.dark})})})]}),"employer"===c&&(0,x.jsx)(s.ZP,{item:!0,xs:12,children:(0,x.jsx)(s.ZP,{container:!0,spacing:3,children:null===T||void 0===T?void 0:T.map((function(e){return(0,x.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,sx:{cursor:"pointer"},onClick:function(){return t("/report",{state:{per_courses:T}})},children:(0,x.jsx)(ne,{title:e.course_name,count:e.total_assignments})},e.course_id)}))})}),"student"===c&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,x.jsx)(V._,{dateAdapter:$.H,children:(0,x.jsx)(N,{schedule:Z,fetchData:W})})}),(0,x.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,x.jsx)(y,{attendance:w})})]}),"tutor"===c&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,x.jsx)(V._,{dateAdapter:$.H,children:(0,x.jsx)(N,{schedule:Z,fetchData:W})})})}),"employer"===c&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(s.ZP,{item:!0,xs:12,md:6,children:(0,x.jsx)(F,{attendance:null===w||void 0===w?void 0:w.today})})})]})}}}]);
//# sourceMappingURL=6696.cb7f0db6.chunk.js.map